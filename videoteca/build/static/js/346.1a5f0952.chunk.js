"use strict";(self.webpackChunkvideoteca_frontend=self.webpackChunkvideoteca_frontend||[]).push([[346],{8953:function(e,t,n){var r=n(4165),a=n(5861),c=n(4942),s=n(1413),o=n(9439),u=n(5987),i=n(2791),p=n(733),d=n(5342),l=n(3360),f=n(4437),x=n(8596),h=(n(9629),n(184)),m=["histUser","handleClose","show","commentary_id"],v=(0,x.Z)((function(e){return{containerModal:{border:"2px solid #ccc",borderRadius:10,boxShadow:"4px 4px 4px 0px #5a28e550"},cloud:{width:"25rem",background:"white",color:"black",borderRadius:10},containerForm:{height:"3rem",background:"white",color:"black",border:"2px solid #ccc",borderRadius:10,boxShadow:"4px 4px 4px 0px #5a28e550"},"@media (max-width: 720px)":{root:{display:"flex"}}}}));t.Z=function(e){var t=e.histUser,n=e.handleClose,x=e.show,Z=e.commentary_id,b={commentary:"",historial_user:t,video:(0,u.Z)(e,m).videoID},w=(0,i.useState)(b),k=(0,o.Z)(w,2),y=k[0],_=k[1],g=function(){var e=(0,a.Z)((0,r.Z)().mark((function e(t){var n;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),n=new FormData,e.prev=2,Z){e.next=11;break}return n.append("commentary",y.commentary),n.append("historial_user",y.historial_user.id),n.append("video",y.video),e.next=9,p.z(n);case 9:e.next=14;break;case 11:return n.append("commentary",y.commentary),e.next=14,p.q4(Z,n);case 14:e.next=19;break;case 16:e.prev=16,e.t0=e.catch(2),console.log(e.t0);case 19:case"end":return e.stop()}}),e,null,[[2,16]])})));return function(t){return e.apply(this,arguments)}}();(0,i.useEffect)((function(){var e=function(){var e=(0,a.Z)((0,r.Z)().mark((function e(t){var n;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,p._K(t);case 3:n=e.sent,_((0,s.Z)((0,s.Z)({},y),{},{commentary:n.commentary})),console.log(n),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}();Z&&e(Z)}),[Z]);var j=v();return(0,h.jsxs)(d.Z,{show:x,onHide:n,"aria-labelledby":"example-custom-modal-styling-title",contentClassName:"cloud "+j.cloud,centered:!0,children:[(0,h.jsx)(d.Z.Header,{closeButton:!0,children:(0,h.jsx)(d.Z.Title,{id:"tituloModal",children:"Ingrese su Comentario"})}),(0,h.jsx)(d.Z.Body,{id:"bodyModal",children:(0,h.jsxs)(f.Z,{onSubmit:g,children:[(0,h.jsx)(f.Z.Group,{className:"mb-2 ",controlId:"exampleForm.ControlInput1",children:(0,h.jsx)(f.Z.Control,{as:"textarea",className:j.containerForm,rows:1,name:"commentary",value:y.commentary||"",onChange:function(e){var t=e.target.name;_((0,s.Z)((0,s.Z)({},y),{},(0,c.Z)({},t,e.target.value)))}})}),(0,h.jsxs)(d.Z.Footer,{children:[(0,h.jsx)(l.Z,{variant:"secondary",onClick:n,children:"Cerrar"}),(0,h.jsx)(l.Z,{variant:"primary",type:"submit",onClick:n,children:"Crear"})]})]})})]})}},6292:function(e,t,n){n.d(t,{Z:function(){return w}});var r=n(4165),a=n(5861),c=n(9439),s=n(2791),o=n(7689),u=n(90),i=n(7411),p="https://sccotview.com/api/ubicaciones/",d=function(){var e=(0,a.Z)((0,r.Z)().mark((function e(t){var n;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i.Z.post(p,t);case 2:if(200!==(n=e.sent).status){e.next=7;break}return e.next=6,n.data;case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),l=function(){var e=(0,a.Z)((0,r.Z)().mark((function e(t){var n;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i.Z.post("".concat(p,"list_by_historial/"),t);case 2:if(200!==(n=e.sent).status){e.next=7;break}return e.next=6,n.data;case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),f="https://sccotview.com/api/fechaReprods/",x=function(){var e=(0,a.Z)((0,r.Z)().mark((function e(t){var n;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i.Z.post(f,t);case 2:if(200!==(n=e.sent).status){e.next=7;break}return e.next=6,n.data;case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),h=function(){var e=(0,a.Z)((0,r.Z)().mark((function e(t){var n;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i.Z.post("".concat(f,"list_by_user_video/"),t);case 2:if(200!==(n=e.sent).status){e.next=7;break}return e.next=6,n.data;case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),m=n(9929),v="https://sccotview.com/api/historialVideo/",Z=function(){var e=(0,a.Z)((0,r.Z)().mark((function e(t,n){var a;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i.Z.patch(v+t+"/",n);case 2:if(200!==(a=e.sent).status){e.next=5;break}return e.abrupt("return",a.data);case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),b=(n(5258),n(184)),w=function(e){var t=e.video,n=e.webinarCondition,i=(0,s.useState)(null),p=(0,c.Z)(i,2),f=p[0],v=(p[1],(0,s.useState)(null)),w=(0,c.Z)(v,2),k=w[0],y=(w[1],(0,s.useState)(null)),_=(0,c.Z)(y,2),g=_[0],j=(_[1],(0,s.useState)(!0)),C=(0,c.Z)(j,2),N=C[0],S=C[1],I=((0,o.UO)().id,(0,o.TH)(),(0,s.useRef)(null)),D=(0,s.useRef)(null),F=function(){var e=new Date,t="".concat(e.getDate()).padStart(2,"0"),n="".concat(e.getMonth()+1).padStart(2,"0"),r=e.getFullYear();return"".concat(r,"-").concat(n,"-").concat(t)},M=function(){var e=(0,a.Z)((0,r.Z)().mark((function e(t){var n,a,c,s,o;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t.getDuration();case 3:return n=e.sent,e.next=6,t.getCurrentTime();case 6:if(0===(a=e.sent)||null===k||void 0===k||!k.id){e.next=22;break}if(c=parseInt(90*n/100),s=k.counter_repro,o=g[0].reproducciones,!(a>=c)){e.next=20;break}return s+=1,o+=1,e.next=16,m.o0(k.id,{tiempo:0,visto:!0,counter_repro:s});case 16:return e.next=18,Z(g[0].id,{reproducciones:o});case 18:e.next=22;break;case 20:return e.next=22,m.o0(k.id,{tiempo:parseInt(a)});case 22:e.next=27;break;case 24:e.prev=24,e.t0=e.catch(0),console.error("Error al guardar tiempo:",e.t0);case 27:case"end":return e.stop()}}),e,null,[[0,24]])})));return function(t){return e.apply(this,arguments)}}(),U=(0,s.useCallback)((function(){if(I.current&&t.code_esp&&(k||n)){var e=new u.Z(I.current,{id:t.code_esp,playsinline:!0});if(!n&&null!==(null===k||void 0===k?void 0:k.tiempo)){var s=function(e){var t=e.split(":").map(Number),n=(0,c.Z)(t,3);return 3600*n[0]+60*n[1]+n[2]}(k.tiempo);e.setCurrentTime(s)}n||(e.on("play",(0,a.Z)((0,r.Z)().mark((function e(){var t,n,a,c,s;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,l({histUser_id:k.id});case 3:return t=e.sent,n=F(),(a=new FormData).append("historial_user",k.id),a.append("historial_Video",g[0].id),e.next=10,h(a);case 10:if(c=e.sent,!f){e.next=26;break}if((s=new FormData).append("direccionIP",f.ip),s.append("ciudad",f.city),s.append("pais",f.country),s.append("historial_user",k.id),s.append("historial_Video",g[0].id),t.some((function(e){return e.direccionIP===f.ip&&e.ciudad===f.city&&e.pais===f.country}))){e.next=22;break}return e.next=22,d(s);case 22:if(c.some((function(e){return e.fecha===n}))){e.next=26;break}return e.next=26,x({historial_user:k.id,historial_Video:g[0].id});case 26:e.next=31;break;case 28:e.prev=28,e.t0=e.catch(0),console.error("Error en evento play:",e.t0);case 31:case"end":return e.stop()}}),e,null,[[0,28]])})))),document.URL.includes("/seeVideo/")&&function(e){D.current=setInterval((function(){return M(e)}),1e4)}(e)),S(!1)}}),[t.code_esp,k,g,f,n]);return(0,s.useEffect)((function(){(!n&&t.code_esp&&k&&g&&f||n&&t.code_esp)&&U()}),[t.code_esp,k,g,f,U,n]),(0,s.useEffect)((function(){(t.code_esp&&g&&!n&&k&&f||t.code_esp&&n)&&U()}),[t.code_esp,k,g,f,U,n]),(0,s.useEffect)((function(){return function(){return clearInterval(D.current)}}),[]),(0,b.jsxs)(b.Fragment,{children:[N&&(0,b.jsx)("div",{className:"mt-5 d-flex justify-content-center align-items-center",children:(0,b.jsx)("div",{className:"spinner-grow text-light",role:"status",children:(0,b.jsx)("span",{className:"sr-only"})})}),(0,b.jsx)("div",{id:"iframe1",ref:I})]})}},1241:function(e,t,n){var r=n(9439),a=n(5987),c=(n(2791),n(2918)),s=n(8953),o=n(8596),u=n(5342),i=n(3712),p=n(6151),d=n(3767),l=n(184),f=["handleClose","show","histUser","commentaries"],x=(0,o.Z)((function(e){return{title:{color:"black",textAlign:"center"},nameUser:{color:"Gray",fontSize:"15px"},containerModal:{boxShadow:"4px 4px 4px 0px #5a28e550"},containerComment:{maxWidth:720,margin:"auto",marginBottom:20},"@media (max-width: 720px)":{root:{display:"flex"}}}}));t.Z=function(e){var t=e.handleClose,n=e.show,o=e.histUser,h=e.commentaries,m=((0,a.Z)(e,f),(0,c.d)(!1)),v=(0,r.Z)(m,3),Z=v[0],b=v[1],w=v[2],k=x();if(h)return(0,l.jsxs)(u.Z,{show:n,onHide:t,"aria-labelledby":"example-custom-modal-styling-title",contentClassName:k.containerModal,centered:!0,scrollable:!0,children:[(0,l.jsx)(u.Z.Header,{closeButton:!0,children:(0,l.jsx)(u.Z.Title,{id:"titleModal",className:k.title,children:"Comentarios de usuarios"})}),(0,l.jsx)(u.Z.Body,{id:"bodyModal",className:k.containerModal,children:h&&h.length>0?h.map((function(e,t){var n;return(0,l.jsx)(i.Z,{className:k.containerComment,children:(0,l.jsxs)("div",{className:"row",children:[(0,l.jsxs)("div",{className:"col-9",children:[(0,l.jsx)("p",{children:new Date(e.created_date).toLocaleDateString()}),(0,l.jsx)("h5",{className:k.nameUser,children:e.historial_user.usuario.name}),(0,l.jsx)("h6",{children:e.commentary})]}),(0,l.jsx)("div",{className:"col-2",children:e.historial_user.usuario.id===(null===o||void 0===o||null===(n=o.usuario)||void 0===n?void 0:n.id)&&(0,l.jsxs)(d.Z,{alignItems:"center",children:[(0,l.jsx)(p.Z,{variant:"contained",color:"info",onClick:b,children:"EDITAR"}),(0,l.jsx)(s.Z,{handleClose:w,show:Z,commentary_id:e.id})]})}),(0,l.jsx)("hr",{})]})},t)})):(0,l.jsx)("p",{className:"text-center text-muted",children:"No hay comentarios a\xfan."})})]})}},2918:function(e,t,n){n.d(t,{d:function(){return c}});var r=n(9439),a=n(2791),c=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=(0,a.useState)(e),n=(0,r.Z)(t,2),c=n[0],s=n[1],o=function(){return s(!0)},u=function(){return s(!1)};return[c,o,u]}},733:function(e,t,n){n.d(t,{_K:function(){return i},q4:function(){return p},t$:function(){return u},z:function(){return o}});var r=n(4165),a=n(5861),c=n(7411),s="https://sccotview.com/api/commentaries/",o=function(){var e=(0,a.Z)((0,r.Z)().mark((function e(t){var n;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c.Z.post(s,t);case 2:if(200!==(n=e.sent).status){e.next=7;break}return e.next=6,n.data;case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),u=function(){var e=(0,a.Z)((0,r.Z)().mark((function e(t){var n;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c.Z.post("".concat(s,"list_by_video/"),t);case 2:if(200!==(n=e.sent).status){e.next=9;break}return e.next=6,n.data;case 6:case 12:return e.abrupt("return",e.sent);case 9:return console.log("error"),e.next=12,n.data;case 13:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),i=function(){var e=(0,a.Z)((0,r.Z)().mark((function e(t){var n;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c.Z.get("".concat(s).concat(t));case 2:if(200!==(n=e.sent).status){e.next=7;break}return e.next=6,n.data;case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),p=function(){var e=(0,a.Z)((0,r.Z)().mark((function e(t,n){var a;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c.Z.patch(s+t+"/",n);case 2:if(200!==(a=e.sent).status){e.next=5;break}return e.abrupt("return",a.data);case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()},6542:function(e,t,n){n.d(t,{Ed:function(){return u},Zg:function(){return p},_G:function(){return o},dS:function(){return i}});var r=n(4165),a=n(5861),c=n(7411),s="https://sccotview.com/api/series/",o=function(){var e=(0,a.Z)((0,r.Z)().mark((function e(){var t;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c.Z.get(s);case 2:if(200!==(t=e.sent).status){e.next=7;break}return e.next=6,t.data;case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),u=function(){var e=(0,a.Z)((0,r.Z)().mark((function e(t){var n;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c.Z.post(s,t);case 2:if(200!==(n=e.sent).status){e.next=7;break}return e.next=6,n.data;case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),i=function(){var e=(0,a.Z)((0,r.Z)().mark((function e(t){var n;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c.Z.get("".concat(s).concat(t));case 2:if(200!==(n=e.sent).status){e.next=7;break}return e.next=6,n.data;case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),p=function(){var e=(0,a.Z)((0,r.Z)().mark((function e(t,n){var a;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c.Z.patch(s+t+"/",n);case 2:if(200!==(a=e.sent).status){e.next=5;break}return e.abrupt("return",a.data);case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()},6639:function(e,t,n){n.d(t,{C1:function(){return p},DN:function(){return u},op:function(){return i},xI:function(){return o}});var r=n(4165),a=n(5861),c=n(7411),s="https://sccotview.com/api/temporadas/",o=function(){var e=(0,a.Z)((0,r.Z)().mark((function e(){var t;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c.Z.get(s);case 2:if(200!==(t=e.sent).status){e.next=7;break}return e.next=6,t.data;case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),u=function(){var e=(0,a.Z)((0,r.Z)().mark((function e(t){var n;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c.Z.post(s,t);case 2:if(200!==(n=e.sent).status){e.next=7;break}return e.next=6,n.data;case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),i=function(){var e=(0,a.Z)((0,r.Z)().mark((function e(t){var n;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c.Z.get("".concat(s).concat(t));case 2:if(200!==(n=e.sent).status){e.next=7;break}return e.next=6,n.data;case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),p=function(){var e=(0,a.Z)((0,r.Z)().mark((function e(t,n){var a;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c.Z.patch(s+t+"/",n);case 2:if(200!==(a=e.sent).status){e.next=5;break}return e.abrupt("return",a.data);case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()},9629:function(){}}]);
//# sourceMappingURL=346.1a5f0952.chunk.js.map