"use strict";(self.webpackChunkvideoteca_frontend=self.webpackChunkvideoteca_frontend||[]).push([[753],{7411:function(e,t,n){var r=n(4165),o=n(5861),a=n(3263),i=n(9778),s="https://sccotview.com/api/",c=["free/","free"],u=(localStorage.getItem("access_token"),a.Z.create({baseURL:s,timeout:5e3,headers:{"Content-Type":"multipart/form-data",accept:"application/json"}}));u.interceptors.request.use((function(e){var t=localStorage.getItem("access_token"),n=c.some((function(t){return e.url.includes(t)}));return t&&!n?e.headers.Authorization="JWT "+t:delete e.headers.Authorization,e})),u.interceptors.response.use((function(e){return e}),function(){var e=(0,o.Z)((0,r.Z)().mark((function e(t){var n,o,a,c,l;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.config,"undefined"!==typeof t.response){e.next=4;break}return console.warn("A server/network error occurred. Looks like CORS might be the problem."),e.abrupt("return",Promise.reject(t));case 4:if(401!==t.response.status||n.url!==s+"api/token/refresh/"){e.next=7;break}return window.location.href="/userlogin1/",e.abrupt("return",Promise.reject(t));case 7:if("token_not_valid"!==t.response.data.code||401!==t.response.status||"Unauthorized"!==t.response.statusText){e.next=37;break}if(!(o=localStorage.getItem("refresh_token"))){e.next=34;break}if(a=JSON.parse(i.lW.from(o.split(".")[1],"base64").toString()),c=Math.ceil(Date.now()/1e3),!(a.exp>c)){e.next=29;break}return e.prev=13,e.next=16,u.post("api/token/refresh/",{refresh:o});case 16:return l=e.sent,localStorage.setItem("access_token",l.data.access_token),localStorage.setItem("refresh_token",l.data.refresh_token),u.defaults.headers.Authorization="JWT "+l.data.access_token,n.headers.Authorization="JWT "+l.data.access_token,e.abrupt("return",u(n));case 24:e.prev=24,e.t0=e.catch(13),console.log(e.t0);case 27:e.next=32;break;case 29:console.log("Refresh token is expired",a.exp,c),localStorage.clear(),window.location.href="/userlogin2/";case 32:e.next=37;break;case 34:console.log("Refresh token not available."),localStorage.clear(),window.location.href="/userlogin3/";case 37:return 401===t.response.status&&localStorage.clear(),e.abrupt("return",Promise.reject(t));case 39:case"end":return e.stop()}}),e,null,[[13,24]])})));return function(t){return e.apply(this,arguments)}}()),t.Z=u},6649:function(e,t,n){n.r(t),n.d(t,{default:function(){return S}});var r=n(4942),o=n(1413),a=n(9439),i=n(2791),s=n(7689),c=n(5628),u=n(272),l=n(6513),d=n(8257),p=n(6194),f=n(1288),m=n(8302),h=n(8596),g=n(3712),x=n(5987),v=n(184),b=["message"],k=(0,h.Z)((function(e){return{link:{margin:e.spacing(1,1.5)}}}));var w=function(){var e=k();return function(t){var n=t.message;(0,x.Z)(t,b);return n?(0,v.jsx)("p",{className:e.link,style:{fontSize:"25px",color:"red"},children:n}):(0,v.jsx)("p",{})}},Z=n(1830),y=n.n(Z),j=(n(7087),n(5258),(0,h.Z)((function(e){return{paper:{marginTop:e.spacing(8),display:"flex",flexDirection:"column",alignItems:"center",backgroundColor:"white",color:"black",padding:"30px",borderRadius:"15px",boxShadow:"5px 5px 10px #222261"},avatar:{margin:e.spacing(1),backgroundColor:"dark",width:"80px",height:"80px",border:"2px solid #4949a5"},form:{width:"100%",marginTop:e.spacing(1)},texto:{backgroundColor:e.palette.common.white},submit:{margin:e.spacing(3,0,2),padding:"12px 0"}}})));function S(e){var t=e.onLogin,n=e.onClose,h=(e.open,e.setOpen),x=(0,s.s0)(),b=(0,c.Z)(),k=b.isLoginLoading,Z=b.hasLoginError,S=b.login,E=b.isLogged,O=b.errLogin,C=(0,i.useState)(""),W=(0,a.Z)(C,2),_=W[0],I=W[1],L=Object.freeze({email:"",password:""}),T=w(),P=(0,i.useState)(L),N=(0,a.Z)(P,2),z=N[0],R=N[1],A=(0,i.useState)(!0),V=(0,a.Z)(A,2),D=V[0],B=V[1],J=function(e){var t=e.target,n=t.name,a=t.value;R((function(e){var t=(0,o.Z)((0,o.Z)({},e),{},(0,r.Z)({},n,a.trim()));return B(!(t.email&&t.password)),t}))};(0,i.useEffect)((function(){E&&(n&&n(),setTimeout((function(){y().fire({title:"Bienvenido(a) a SCCOTVIEW",html:"<p style='font-size:17px'>Esta plataforma de videos tiene im\xe1genes y contenido sensible, fruto del dedicado esfuerzo de nuestros especialistas. Disfruta de esta herramienta exclusiva de la SCCOT, creada para ti. <br /><br /> \xa1Gracias por ser parte de nuestra comunidad y a nuestros expositores por su invaluable contribuci\xf3n a la ciencia y la investigaci\xf3n!</p>",imageUrl:"https://sccotview.com/media/videos/SCCOTVIEWLSHORT.png",imageWidth:110,imageHeight:110,imageAlt:"Logo SCCOTVIEW",confirmButtonText:"Aceptar",confirmButtonColor:"rgb(63, 81, 181)",customClass:{popup:"custom-swal-zindex"}}).then((function(){x("/"),t&&t(),window.location.reload()}))}),300))}),[E]),(0,i.useEffect)((function(){Z&&(n&&n(),setTimeout((function(){y().fire({title:""!==O?O:"Lo sentimos no fue posible iniciar sesi\xf3n",html:"Puede contactarnos al correo membresias@sccot.org.co <br /> o cont\xe1ctenos por <a class='text-success' href='https://wa.link/mmff0z' target='_blank'>WhatsApp</a>",confirmButtonText:"Entendido",confirmButtonColor:"#3f51b5",icon:"error"}).then((function(){I(null),h(!0)}))}),300))}),[Z]);z.email&&z.password;var M=j();return(0,v.jsxs)("div",{className:"mt-4",children:[k&&(0,v.jsxs)("strong",{className:"d-flex justify-content-center flex-column align-items-center",children:[(0,v.jsx)("div",{className:"spinner-grow text-light",role:"status"}),(0,v.jsx)("span",{className:"sr-only d-inline h4 mt-1",children:"Espera por favor"})]}),!k&&(0,v.jsxs)(g.Z,{component:"main",maxWidth:"xs",children:[(0,v.jsx)(d.ZP,{}),(0,v.jsxs)("div",{className:M.paper,children:[(0,v.jsx)(u.Z,{className:M.avatar}),(0,v.jsx)(m.Z,{component:"h1",variant:"h5",children:"Iniciar sesi\xf3n"}),(0,v.jsxs)("form",{className:M.form,noValidate:!0,children:[(0,v.jsx)(p.Z,{className:M.texto,margin:"normal",required:!0,fullWidth:!0,id:"email",label:"Correo Electr\xf3nico",name:"email",autoComplete:"email",autoFocus:!0,onChange:J}),(0,v.jsx)(p.Z,{className:M.texto,margin:"normal",required:!0,fullWidth:!0,name:"password",label:"Contrase\xf1a",type:"password",id:"password",autoComplete:"current-password",onChange:J}),(0,v.jsx)(l.Z,{type:"submit",fullWidth:!0,variant:"contained",color:"primary",className:M.submit,onClick:function(e){e.preventDefault(),S({username:z.email,password:z.password})},disabled:D,children:"Ingresar"}),(0,v.jsx)(f.Z,{container:!0,children:(0,v.jsx)(f.Z,{item:!0,xs:!0,children:(0,v.jsx)("a",{href:"javascript:void(0);",className:"cursorPointer text-dark",onClick:function(){n&&n(),setTimeout((function(){y().fire({title:""!==O?O:"\xbfOlvid\xf3 su contrase\xf1a?",html:"Puede contactarnos al correo membresias@sccot.org.co <br /> o cont\xe1ctenos por <a class='text-success' href='https://wa.link/mmff0z' target='_blank'>WhatsApp</a>",confirmButtonText:"Entendido",confirmButtonColor:"#3f51b5",icon:"info",customClass:{popup:"custom-swal-zindex"}}).then((function(){h(!0)}))}),300)},children:"\xbfOlvid\xf3 su contrase\xf1a?"})})})]})]})]}),Z&&(0,v.jsx)(T,{message:_})]})}},5628:function(e,t,n){n.d(t,{Z:function(){return u}});var r=n(9439),o=n(2791),a=n(7689),i=n(2680),s=n(746),c=n(7411);n(1830);function u(){var e=(0,a.s0)(),t=(0,o.useContext)(i.Z),n=t.jwt,u=t.setUSER,l=t.setJWT,d=(0,o.useState)({loading:!1,error:!1}),p=(0,r.Z)(d,2),f=p[0],m=p[1],h=(0,o.useState)(""),g=(0,r.Z)(h,2),x=g[0],v=g[1],b=(0,o.useCallback)((function(e){var t=e.username,n=e.password;m({loading:!0,error:!1}),(0,s.m3)({username:t,password:n}).then((function(e){window.localStorage.setItem("access_token",e.data.access_token),window.localStorage.setItem("refresh_token",e.data.refresh_token),window.localStorage.setItem("user",JSON.stringify(e.data.user)),c.Z.defaults.headers.Authorization="JWT "+localStorage.getItem("access_token"),m({loading:!1,error:!1}),l(e.data.access_token),u(e.data.user)})).catch((function(e){window.localStorage.removeItem("access_token"),window.localStorage.removeItem("refresh_token"),window.localStorage.removeItem("user"),m({loading:!1,error:!0}),console.log(e),v(e.response.data.error||e.response.data.detail)}))}),[l,u]),k=(0,o.useCallback)((function(){c.Z.post("logout/",{refresh_token:localStorage.getItem("refresh_token")}),localStorage.removeItem("access_token"),localStorage.removeItem("refresh_token"),localStorage.removeItem("user"),c.Z.defaults.headers.Authorization=null,l(null),e("/"),window.location.reload()}),[e,l]);return{isLogged:Boolean(n),isLoginLoading:f.loading,hasLoginError:f.error,login:b,logout:k,errLogin:x}}},746:function(e,t,n){n.d(t,{PR:function(){return u},gO:function(){return l},m3:function(){return c}});var r=n(4165),o=n(5861),a=n(3263),i=n(7411),s="https://sccotview.com/api/",c=function(){var e=(0,o.Z)((0,r.Z)().mark((function e(t){var n;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.Z.post(s+"login/",t);case 2:return n=e.sent,console.log(t),e.abrupt("return",n);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),u=function(){var e=(0,o.Z)((0,r.Z)().mark((function e(t){var n;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i.Z.get("".concat(s,"users/").concat(t));case 2:if(200!==(n=e.sent).status){e.next=8;break}return console.log(n),e.next=7,n.data;case 7:return e.abrupt("return",e.sent);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),l=function(){var e=(0,o.Z)((0,r.Z)().mark((function e(t,n){var o;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i.Z.patch("".concat(s,"users/").concat(t,"/"),n);case 2:if(200!==(o=e.sent).status){e.next=7;break}return e.next=6,o.data;case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()},3712:function(e,t,n){var r=n(7462),o=n(5987),a=n(4942),i=n(2791),s=n(8182),c=n(8317),u=n(1122),l=i.forwardRef((function(e,t){var n=e.classes,a=e.className,c=e.component,l=void 0===c?"div":c,d=e.disableGutters,p=void 0!==d&&d,f=e.fixed,m=void 0!==f&&f,h=e.maxWidth,g=void 0===h?"lg":h,x=(0,o.Z)(e,["classes","className","component","disableGutters","fixed","maxWidth"]);return i.createElement(l,(0,r.Z)({className:(0,s.Z)(n.root,a,m&&n.fixed,p&&n.disableGutters,!1!==g&&n["maxWidth".concat((0,u.Z)(String(g)))]),ref:t},x))}));t.Z=(0,c.Z)((function(e){return{root:(0,a.Z)({width:"100%",marginLeft:"auto",boxSizing:"border-box",marginRight:"auto",paddingLeft:e.spacing(2),paddingRight:e.spacing(2),display:"block"},e.breakpoints.up("sm"),{paddingLeft:e.spacing(3),paddingRight:e.spacing(3)}),disableGutters:{paddingLeft:0,paddingRight:0},fixed:Object.keys(e.breakpoints.values).reduce((function(t,n){var r=e.breakpoints.values[n];return 0!==r&&(t[e.breakpoints.up(n)]={maxWidth:r}),t}),{}),maxWidthXs:(0,a.Z)({},e.breakpoints.up("xs"),{maxWidth:Math.max(e.breakpoints.values.xs,444)}),maxWidthSm:(0,a.Z)({},e.breakpoints.up("sm"),{maxWidth:e.breakpoints.values.sm}),maxWidthMd:(0,a.Z)({},e.breakpoints.up("md"),{maxWidth:e.breakpoints.values.md}),maxWidthLg:(0,a.Z)({},e.breakpoints.up("lg"),{maxWidth:e.breakpoints.values.lg}),maxWidthXl:(0,a.Z)({},e.breakpoints.up("xl"),{maxWidth:e.breakpoints.values.xl})}}),{name:"MuiContainer"})(l)},8182:function(e,t,n){function r(e){var t,n,o="";if("string"==typeof e||"number"==typeof e)o+=e;else if("object"==typeof e)if(Array.isArray(e))for(t=0;t<e.length;t++)e[t]&&(n=r(e[t]))&&(o&&(o+=" "),o+=n);else for(t in e)e[t]&&(o&&(o+=" "),o+=t);return o}t.Z=function(){for(var e,t,n=0,o="";n<arguments.length;)(e=arguments[n++])&&(t=r(e))&&(o&&(o+=" "),o+=t);return o}},5660:function(e,t,n){n.d(t,{Z:function(){return m}});var r=n(3366),o=n(7462),a=n(7326),i=n(4578),s=n(2791),c=n(5545);function u(e,t){var n=Object.create(null);return e&&s.Children.map(e,(function(e){return e})).forEach((function(e){n[e.key]=function(e){return t&&(0,s.isValidElement)(e)?t(e):e}(e)})),n}function l(e,t,n){return null!=n[t]?n[t]:e.props[t]}function d(e,t,n){var r=u(e.children),o=function(e,t){function n(n){return n in t?t[n]:e[n]}e=e||{},t=t||{};var r,o=Object.create(null),a=[];for(var i in e)i in t?a.length&&(o[i]=a,a=[]):a.push(i);var s={};for(var c in t){if(o[c])for(r=0;r<o[c].length;r++){var u=o[c][r];s[o[c][r]]=n(u)}s[c]=n(c)}for(r=0;r<a.length;r++)s[a[r]]=n(a[r]);return s}(t,r);return Object.keys(o).forEach((function(a){var i=o[a];if((0,s.isValidElement)(i)){var c=a in t,u=a in r,d=t[a],p=(0,s.isValidElement)(d)&&!d.props.in;!u||c&&!p?u||!c||p?u&&c&&(0,s.isValidElement)(d)&&(o[a]=(0,s.cloneElement)(i,{onExited:n.bind(null,i),in:d.props.in,exit:l(i,"exit",e),enter:l(i,"enter",e)})):o[a]=(0,s.cloneElement)(i,{in:!1}):o[a]=(0,s.cloneElement)(i,{onExited:n.bind(null,i),in:!0,exit:l(i,"exit",e),enter:l(i,"enter",e)})}})),o}var p=Object.values||function(e){return Object.keys(e).map((function(t){return e[t]}))},f=function(e){function t(t,n){var r,o=(r=e.call(this,t,n)||this).handleExited.bind((0,a.Z)(r));return r.state={contextValue:{isMounting:!0},handleExited:o,firstRender:!0},r}(0,i.Z)(t,e);var n=t.prototype;return n.componentDidMount=function(){this.mounted=!0,this.setState({contextValue:{isMounting:!1}})},n.componentWillUnmount=function(){this.mounted=!1},t.getDerivedStateFromProps=function(e,t){var n,r,o=t.children,a=t.handleExited;return{children:t.firstRender?(n=e,r=a,u(n.children,(function(e){return(0,s.cloneElement)(e,{onExited:r.bind(null,e),in:!0,appear:l(e,"appear",n),enter:l(e,"enter",n),exit:l(e,"exit",n)})}))):d(e,o,a),firstRender:!1}},n.handleExited=function(e,t){var n=u(this.props.children);e.key in n||(e.props.onExited&&e.props.onExited(t),this.mounted&&this.setState((function(t){var n=(0,o.Z)({},t.children);return delete n[e.key],{children:n}})))},n.render=function(){var e=this.props,t=e.component,n=e.childFactory,o=(0,r.Z)(e,["component","childFactory"]),a=this.state.contextValue,i=p(this.state.children).map(n);return delete o.appear,delete o.enter,delete o.exit,null===t?s.createElement(c.Z.Provider,{value:a},i):s.createElement(c.Z.Provider,{value:a},s.createElement(t,o,i))},t}(s.Component);f.propTypes={},f.defaultProps={component:"div",childFactory:function(e){return e}};var m=f},5258:function(){},1413:function(e,t,n){n.d(t,{Z:function(){return a}});var r=n(4942);function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function a(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}}}]);
//# sourceMappingURL=753.7f649c67.chunk.js.map