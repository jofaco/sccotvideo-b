"use strict";(self.webpackChunkvideoteca_frontend=self.webpackChunkvideoteca_frontend||[]).push([[346],{8953:function(e,t,n){var r=n(4165),a=n(5861),s=n(4942),c=n(1413),u=n(9439),o=n(5987),i=n(2791),p=n(733),d=n(5342),l=n(3360),f=n(4437),x=n(8596),h=(n(9629),n(184)),v=["histUser","handleClose","show","commentary_id"],m=(0,x.Z)((function(e){return{containerModal:{border:"2px solid #ccc",borderRadius:10,boxShadow:"4px 4px 4px 0px #5a28e550"},cloud:{width:"25rem",background:"white",color:"black",borderRadius:10},containerForm:{height:"3rem",background:"white",color:"black",border:"2px solid #ccc",borderRadius:10,boxShadow:"4px 4px 4px 0px #5a28e550"},"@media (max-width: 720px)":{root:{display:"flex"}}}}));t.Z=function(e){var t=e.histUser,n=e.handleClose,x=e.show,Z=e.commentary_id,b={commentary:"",historial_user:t,video:(0,o.Z)(e,v).videoID},w=(0,i.useState)(b),k=(0,u.Z)(w,2),y=k[0],g=k[1],_=function(){var e=(0,a.Z)((0,r.Z)().mark((function e(t){var n;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),n=new FormData,e.prev=2,Z){e.next=11;break}return n.append("commentary",y.commentary),n.append("historial_user",y.historial_user.id),n.append("video",y.video),e.next=9,p.z(n);case 9:e.next=14;break;case 11:return n.append("commentary",y.commentary),e.next=14,p.q4(Z,n);case 14:e.next=19;break;case 16:e.prev=16,e.t0=e.catch(2),console.log(e.t0);case 19:case"end":return e.stop()}}),e,null,[[2,16]])})));return function(t){return e.apply(this,arguments)}}();(0,i.useEffect)((function(){var e=function(){var e=(0,a.Z)((0,r.Z)().mark((function e(t){var n;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,p._K(t);case 3:n=e.sent,g((0,c.Z)((0,c.Z)({},y),{},{commentary:n.commentary})),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}();Z&&e(Z)}),[Z]);var j=m();return(0,h.jsxs)(d.Z,{show:x,onHide:n,"aria-labelledby":"example-custom-modal-styling-title",centered:!0,children:[(0,h.jsx)(d.Z.Header,{closeButton:!0,children:(0,h.jsx)(d.Z.Title,{id:"tituloModal",className:"text-dark",children:"Ingrese su Comentario"})}),(0,h.jsx)(d.Z.Body,{id:"bodyModal",children:(0,h.jsxs)(f.Z,{onSubmit:_,children:[(0,h.jsx)(f.Z.Group,{className:"mb-2 ",controlId:"exampleForm.ControlInput1",children:(0,h.jsx)(f.Z.Control,{as:"textarea",className:j.containerForm,rows:1,name:"commentary",value:y.commentary||"",onChange:function(e){var t=e.target.name;g((0,c.Z)((0,c.Z)({},y),{},(0,s.Z)({},t,e.target.value)))}})}),(0,h.jsxs)(d.Z.Footer,{children:[(0,h.jsx)(l.Z,{variant:"secondary",onClick:n,children:"Cerrar"}),(0,h.jsx)(l.Z,{variant:"primary",type:"submit",onClick:n,children:"Crear"})]})]})})]})}},6292:function(e,t,n){n.d(t,{Z:function(){return y}});var r=n(4165),a=n(5861),s=n(9439),c=n(2791),u=n(7689),o=n(90),i=n(7411),p="https://sccotview.com/api/ubicaciones/",d=function(){var e=(0,a.Z)((0,r.Z)().mark((function e(t){var n;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i.Z.post(p,t);case 2:if(200!==(n=e.sent).status){e.next=7;break}return e.next=6,n.data;case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),l=function(){var e=(0,a.Z)((0,r.Z)().mark((function e(t){var n;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i.Z.post("".concat(p,"list_by_historial/"),t);case 2:if(200!==(n=e.sent).status){e.next=7;break}return e.next=6,n.data;case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),f="https://sccotview.com/api/fechaReprods/",x=function(){var e=(0,a.Z)((0,r.Z)().mark((function e(t){var n;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i.Z.post(f,t);case 2:if(200!==(n=e.sent).status){e.next=7;break}return e.next=6,n.data;case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),h=function(){var e=(0,a.Z)((0,r.Z)().mark((function e(t){var n;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i.Z.post("".concat(f,"list_by_user_video/"),t);case 2:if(200!==(n=e.sent).status){e.next=7;break}return e.next=6,n.data;case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),v=n(9929),m="https://sccotview.com/api/historialVideo/",Z=function(){var e=(0,a.Z)((0,r.Z)().mark((function e(t){var n;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i.Z.post(m,t);case 2:if(200!==(n=e.sent).status){e.next=7;break}return e.next=6,n.data;case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),b=function(){var e=(0,a.Z)((0,r.Z)().mark((function e(t){var n;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i.Z.post("".concat(m,"list_by_video/"),t);case 2:if(200!==(n=e.sent).status){e.next=7;break}return e.next=6,n.data;case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),w=function(){var e=(0,a.Z)((0,r.Z)().mark((function e(t,n){var a;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i.Z.patch(m+t+"/",n);case 2:if(200!==(a=e.sent).status){e.next=5;break}return e.abrupt("return",a.data);case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),k=(n(5258),n(184)),y=function(e){var t=e.video,n=e.webinarCondition,i=(0,c.useState)(null),p=(0,s.Z)(i,2),f=p[0],m=p[1],y=(0,c.useState)(null),g=(0,s.Z)(y,2),_=g[0],j=g[1],C=(0,c.useState)(null),N=(0,s.Z)(C,2),S=N[0],D=N[1],I=(0,c.useState)(!0),F=(0,s.Z)(I,2),E=F[0],M=F[1],U=(0,u.UO)().id,R=(0,u.TH)(),V=(0,c.useRef)(null),T=(0,c.useRef)(null),B=function(){var e=(0,a.Z)((0,r.Z)().mark((function e(){var t,n;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("https://ipwho.is/");case 3:return t=e.sent,e.next=6,t.json();case 6:n=e.sent,m(n),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),console.error("Error al obtener ubicaci\xf3n:",e.t0);case 13:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(){return e.apply(this,arguments)}}(),H=function(){var e=(0,a.Z)((0,r.Z)().mark((function e(){var t,n,a,s;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,a=(null===R||void 0===R||null===(t=R.state)||void 0===t?void 0:t.id)||(null===R||void 0===R||null===(n=R.state)||void 0===n?void 0:n.usuario)){e.next=4;break}return e.abrupt("return",console.warn("No hay datos suficientes para historial"));case 4:return e.next=6,v.F2(a);case 6:s=e.sent,j(s),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),console.error("Error al obtener historial:",e.t0);case 13:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(){return e.apply(this,arguments)}}(),z=function(){var e=(0,a.Z)((0,r.Z)().mark((function e(){var t,n,a;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,b({video_id:U});case 2:if(!((t=e.sent).length>0)){e.next=7;break}D(t),e.next=13;break;case 7:return(n=new FormData).append("video",U),e.next=11,Z(n);case 11:a=e.sent,D(a);case 13:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),G=function(){var e=new Date,t="".concat(e.getDate()).padStart(2,"0"),n="".concat(e.getMonth()+1).padStart(2,"0"),r=e.getFullYear();return"".concat(r,"-").concat(n,"-").concat(t)},q=function(){var e=(0,a.Z)((0,r.Z)().mark((function e(t){var n,a,s,c,u;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t.getDuration();case 3:return n=e.sent,e.next=6,t.getCurrentTime();case 6:if(0===(a=e.sent)||null===_||void 0===_||!_.id){e.next=22;break}if(s=parseInt(90*n/100),c=_.counter_repro,u=S[0].reproducciones,!(a>=s)){e.next=20;break}return c+=1,u+=1,e.next=16,v.o0(_.id,{tiempo:0,visto:!0,counter_repro:c});case 16:return e.next=18,w(S[0].id,{reproducciones:u});case 18:e.next=22;break;case 20:return e.next=22,v.o0(_.id,{tiempo:parseInt(a)});case 22:e.next=27;break;case 24:e.prev=24,e.t0=e.catch(0),console.error("Error al guardar tiempo:",e.t0);case 27:case"end":return e.stop()}}),e,null,[[0,24]])})));return function(t){return e.apply(this,arguments)}}(),A=(0,c.useCallback)((function(){var e=new o.Z(V.current,{id:t.code_esp,playsinline:!0});if(!n&&null!==_&&void 0!==_&&_.tiempo){var c=function(e){var t=e.split(":").map(Number),n=(0,s.Z)(t,3);return 3600*n[0]+60*n[1]+n[2]}(_.tiempo);e.setCurrentTime(c)}n||(e.on("play",(0,a.Z)((0,r.Z)().mark((function e(){var t,n,a,s,c;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,l({histUser_id:_.id});case 3:return t=e.sent,n=G(),(a=new FormData).append("historial_user",_.id),a.append("historial_Video",S[0].id),e.next=10,h(a);case 10:if(s=e.sent,!f){e.next=26;break}if((c=new FormData).append("direccionIP",f.ip),c.append("ciudad",f.city),c.append("pais",f.country),c.append("historial_user",_.id),c.append("historial_Video",S[0].id),t.some((function(e){return e.direccionIP===f.ip&&e.ciudad===f.city&&e.pais===f.country}))){e.next=22;break}return e.next=22,d(c);case 22:if(s.some((function(e){return e.fecha===n}))){e.next=26;break}return e.next=26,x({historial_user:_.id,historial_Video:S[0].id});case 26:e.next=31;break;case 28:e.prev=28,e.t0=e.catch(0),console.error("Error en evento play:",e.t0);case 31:case"end":return e.stop()}}),e,null,[[0,28]])})))),document.URL.includes("/seeVideo/")&&function(e){T.current=setInterval((function(){return q(e)}),1e4)}(e)),M(!1)}),[t.code_esp,_,S,f,n]);return(0,c.useEffect)((function(){H(),z(),B()}),[]),(0,c.useEffect)((function(){t.code_esp&&(n||!n&&S&&f)?A():console.log("Esperando datos para getVimeoVideo:")}),[t.code_esp,_,S,f,n,A]),(0,k.jsxs)(k.Fragment,{children:[E&&(0,k.jsx)("div",{className:"mt-5 d-flex justify-content-center align-items-center",children:(0,k.jsx)("div",{className:"spinner-grow text-light",role:"status",children:(0,k.jsx)("span",{className:"sr-only"})})}),(0,k.jsx)("div",{id:"iframe1",ref:V})]})}},1241:function(e,t,n){var r=n(9439),a=n(5987),s=(n(2791),n(2918)),c=n(8953),u=n(8596),o=n(5342),i=n(3712),p=n(6151),d=n(3767),l=n(184),f=["handleClose","show","histUser","commentaries"],x=(0,u.Z)((function(e){return{title:{color:"black",textAlign:"center"},nameUser:{color:"Gray",fontSize:"15px"},containerModal:{boxShadow:"4px 4px 4px 0px #5a28e550"},containerComment:{maxWidth:720,margin:"auto",marginBottom:20},"@media (max-width: 720px)":{root:{display:"flex"}}}}));t.Z=function(e){var t=e.handleClose,n=e.show,u=e.histUser,h=e.commentaries,v=((0,a.Z)(e,f),(0,s.d)(!1)),m=(0,r.Z)(v,3),Z=m[0],b=m[1],w=m[2],k=x();if(h)return(0,l.jsxs)(o.Z,{show:n,onHide:t,"aria-labelledby":"example-custom-modal-styling-title",contentClassName:k.containerModal,centered:!0,scrollable:!0,children:[(0,l.jsx)(o.Z.Header,{closeButton:!0,children:(0,l.jsx)(o.Z.Title,{id:"titleModal",className:k.title,children:"Comentarios de usuarios"})}),(0,l.jsx)(o.Z.Body,{id:"bodyModal",className:k.containerModal,children:h&&h.length>0?h.map((function(e,t){var n;return(0,l.jsx)(i.Z,{className:k.containerComment,children:(0,l.jsxs)("div",{className:"row",children:[(0,l.jsxs)("div",{className:"col-9",children:[(0,l.jsx)("p",{children:new Date(e.created_date).toLocaleDateString()}),(0,l.jsx)("h5",{className:k.nameUser,children:e.historial_user.usuario.name}),(0,l.jsx)("h6",{children:e.commentary})]}),(0,l.jsx)("div",{className:"col-2",children:e.historial_user.usuario.id===(null===u||void 0===u||null===(n=u.usuario)||void 0===n?void 0:n.id)&&(0,l.jsxs)(d.Z,{alignItems:"center",children:[(0,l.jsx)(p.Z,{variant:"contained",color:"info",onClick:b,children:"EDITAR"}),(0,l.jsx)(c.Z,{handleClose:w,show:Z,commentary_id:e.id})]})}),(0,l.jsx)("hr",{})]})},t)})):(0,l.jsx)("p",{className:"text-center text-muted",children:"No hay comentarios a\xfan."})})]})}},2918:function(e,t,n){n.d(t,{d:function(){return s}});var r=n(9439),a=n(2791),s=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=(0,a.useState)(e),n=(0,r.Z)(t,2),s=n[0],c=n[1],u=function(){return c(!0)},o=function(){return c(!1)};return[s,u,o]}},733:function(e,t,n){n.d(t,{_K:function(){return i},q4:function(){return p},t$:function(){return o},z:function(){return u}});var r=n(4165),a=n(5861),s=n(7411),c="https://sccotview.com/api/commentaries/",u=function(){var e=(0,a.Z)((0,r.Z)().mark((function e(t){var n;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s.Z.post(c,t);case 2:if(200!==(n=e.sent).status){e.next=7;break}return e.next=6,n.data;case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),o=function(){var e=(0,a.Z)((0,r.Z)().mark((function e(t){var n;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s.Z.post("".concat(c,"list_by_video/"),t);case 2:if(200!==(n=e.sent).status){e.next=9;break}return e.next=6,n.data;case 6:case 12:return e.abrupt("return",e.sent);case 9:return console.log("error"),e.next=12,n.data;case 13:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),i=function(){var e=(0,a.Z)((0,r.Z)().mark((function e(t){var n;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s.Z.get("".concat(c).concat(t));case 2:if(200!==(n=e.sent).status){e.next=7;break}return e.next=6,n.data;case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),p=function(){var e=(0,a.Z)((0,r.Z)().mark((function e(t,n){var a;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s.Z.patch(c+t+"/",n);case 2:if(200!==(a=e.sent).status){e.next=5;break}return e.abrupt("return",a.data);case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()},6542:function(e,t,n){n.d(t,{Ed:function(){return o},Zg:function(){return p},_G:function(){return u},dS:function(){return i}});var r=n(4165),a=n(5861),s=n(7411),c="https://sccotview.com/api/series/",u=function(){var e=(0,a.Z)((0,r.Z)().mark((function e(){var t;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s.Z.get(c);case 2:if(200!==(t=e.sent).status){e.next=7;break}return e.next=6,t.data;case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),o=function(){var e=(0,a.Z)((0,r.Z)().mark((function e(t){var n;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s.Z.post(c,t);case 2:if(200!==(n=e.sent).status){e.next=7;break}return e.next=6,n.data;case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),i=function(){var e=(0,a.Z)((0,r.Z)().mark((function e(t){var n;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s.Z.get("".concat(c).concat(t));case 2:if(200!==(n=e.sent).status){e.next=7;break}return e.next=6,n.data;case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),p=function(){var e=(0,a.Z)((0,r.Z)().mark((function e(t,n){var a;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s.Z.patch(c+t+"/",n);case 2:if(200!==(a=e.sent).status){e.next=5;break}return e.abrupt("return",a.data);case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()},6639:function(e,t,n){n.d(t,{C1:function(){return p},DN:function(){return o},op:function(){return i},xI:function(){return u}});var r=n(4165),a=n(5861),s=n(7411),c="https://sccotview.com/api/temporadas/",u=function(){var e=(0,a.Z)((0,r.Z)().mark((function e(){var t;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s.Z.get(c);case 2:if(200!==(t=e.sent).status){e.next=7;break}return e.next=6,t.data;case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),o=function(){var e=(0,a.Z)((0,r.Z)().mark((function e(t){var n;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s.Z.post(c,t);case 2:if(200!==(n=e.sent).status){e.next=7;break}return e.next=6,n.data;case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),i=function(){var e=(0,a.Z)((0,r.Z)().mark((function e(t){var n;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s.Z.get("".concat(c).concat(t));case 2:if(200!==(n=e.sent).status){e.next=7;break}return e.next=6,n.data;case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),p=function(){var e=(0,a.Z)((0,r.Z)().mark((function e(t,n){var a;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s.Z.patch(c+t+"/",n);case 2:if(200!==(a=e.sent).status){e.next=5;break}return e.abrupt("return",a.data);case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()},9629:function(){}}]);
//# sourceMappingURL=346.e79e80c1.chunk.js.map