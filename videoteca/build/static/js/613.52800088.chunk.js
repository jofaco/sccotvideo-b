"use strict";(self.webpackChunkvideoteca_frontend=self.webpackChunkvideoteca_frontend||[]).push([[613],{3561:function(e,r,t){var n=t(4165),s=t(5861),a=t(9439),i=t(5987),o=t(2791),c=t(7689),u=(t(8040),t(8596)),l=t(8374),d=t(9378),v=t(1756),h=t(9929),x=t(8733),p=t(2680),f=t(8434),m=(t(5258),t(184)),g=["videos","categories"],Z=(0,u.Z)((function(e){return{root:{margin:"auto"},"@media (max-width: 1248px)":{root:{display:"flex"}},"@media (max-width: 768px)":{root:{}}}}));r.Z=function(e){var r=e.videos,t=e.categories,u=(0,i.Z)(e,g),j=(0,c.s0)(),b=(0,o.useState)(null),w=(0,a.Z)(b,2),y=w[0],k=w[1],N=(0,o.useState)(null),C=(0,a.Z)(N,2),S=C[0],V=C[1],_=(0,o.useState)(null),E=(0,a.Z)(_,2),L=E[0],U=E[1],z=(0,o.useContext)(p.Z).user,F=function(){var e=(0,s.Z)((0,n.Z)().mark((function e(){var r;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(z){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,e.next=5,h.UH({user_id:z.id});case 5:r=e.sent,k(r),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(2),console.log(e.t0);case 12:case"end":return e.stop()}}),e,null,[[2,9]])})));return function(){return e.apply(this,arguments)}}(),A=function(){var e=(0,s.Z)((0,n.Z)().mark((function e(){var r;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(z){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,e.next=5,x.kt({user_id:z.id});case 5:r=e.sent,V(r),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(2),console.log(e.t0);case 12:case"end":return e.stop()}}),e,null,[[2,9]])})));return function(){return e.apply(this,arguments)}}();(0,o.useEffect)((function(){z&&(F(),A())}),[]),(0,o.useEffect)((function(){if(S&&t){for(var e=[],r=[],n=[],s=0;s<S.length;s++)r.push(S[s].categoria);for(var a=0;a<t.length;a++)n.push(t[a]);for(var i=0;i<n.length;i++){for(var o=!1,c=0;c<r.length&!o;c++)n[i].categoria===r[c]&&(o=!0);e=S,o||e.push(n[i])}U(e||null)}}),[t,S]);var I=function(){var e=(0,s.Z)((0,n.Z)().mark((function e(r,t){var s,a,i,o;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==z&&void 0!==z&&z.id||13!==t){e.next=3;break}return j("/seeWebinar/".concat(r)),e.abrupt("return");case 3:if(null===z||void 0===z||!z.id){e.next=26;break}if((s=new FormData).append("usuario",z.id),s.append("video",r),a=null,e.prev=8,!(i=y.find((function(e){var t;return(null===(t=e.usuario)||void 0===t?void 0:t.id)===z.id&&e.video===r})))){e.next=14;break}a=i,e.next=18;break;case 14:return e.next=16,h.LK(s);case 16:o=e.sent,a=o.data;case 18:e.next=23;break;case 20:e.prev=20,e.t0=e.catch(8),console.error("Error registrando historial:",e.t0);case 23:j("/seeVideo/".concat(r),{state:a}),e.next=27;break;case 26:j("/seeVideo/".concat(r));case 27:case"end":return e.stop()}}),e,null,[[8,20]])})));return function(r,t){return e.apply(this,arguments)}}(),T=Z();return(0,m.jsxs)("div",{children:[(0,m.jsx)("div",{id:"carousel_videos",className:" ",children:(0,m.jsx)(l.Z,{className:T.root,id:"carousel",children:r&&u.search(r).slice(0,6).map((function(e,r){return(0,m.jsx)(l.Z.Item,{style:{minHeight:"400px"},children:(0,m.jsx)(d.Z,{video:e,listVideos:u.listVideos,histUsers:y,user:z,verVideo:I},e.id)},r)}))})}),(0,m.jsx)("br",{}),(0,m.jsx)("br",{}),(0,m.jsx)("div",{id:"card_videos",className:"mt-5",children:r&&S?(0,m.jsx)("div",{className:"",children:L&&u.search2(L).map((function(e,t){return(0,m.jsx)(m.Fragment,{children:u.search2(L).length<=1?(0,m.jsx)(f.Z,{categoria:e,videos:r,search:u.search,histUsers:y,user:z,verVideo:I},t):(0,m.jsx)(v.Z,{categoria:e,videos:r,search:u.search,histUsers:y,user:z,verVideo:I},t)})}))}):u.search2(t).map((function(e,n){return(0,m.jsx)("div",{children:u.search2(t).length<=1?(0,m.jsx)(f.Z,{categoria:e,videos:r,search:u.search,histUsers:y,user:z,verVideo:I},n):(0,m.jsx)(v.Z,{categoria:e,videos:r,search:u.search,histUsers:y,user:z,verVideo:I},n)},n)}))})]})}},723:function(e,r,t){t.r(r),t.d(r,{default:function(){return A}});var n=t(4165),s=t(5861),a=t(9439),i=t(2791),o=(t(8040),t(1174),t(5987)),c=t(7689),u=t(8596),l=t(8374),d=t(4554),v=t(748),h=t(1652),x=(t(5258),t(2592)),p=t(6627),f=t.n(p),m=t(184),g=["video"],Z=(0,u.Z)((function(e){return{paper:{marginTop:e.spacing(2),marginBottom:e.spacing(3),display:"flex",flexDirection:"column",alignItems:"center",color:"white"},imagenCarousel:{cursor:"pointer",minWidth:"100%",objectFit:"contain",maxHeight:"85vh",objectPosition:"top"},carouselText:{position:"absolute",bottom:0,left:0,width:"100%",background:"linear-gradient(to bottom, transparent 20%, rgba(24, 26, 54, 0.95) 90%)",padding:"300px 20px 20px"},textTitle:{fontSize:"25px"},"@media (max-width: 500px)":{imagenCarousel:{minWidth:"100%",objectFit:"cover",maxHeight:"100vh",objectPosition:"top"},carouselText:{padding:"120px 20px 10px",bottom:"-24px",zIndex:"10"},textTitle:{fontSize:"18px"},containerRating:{display:"none"}}}})),j=function(e){var r=e.video,t=(0,o.Z)(e,g),n=((0,c.s0)(),Z());return(0,m.jsx)("div",{id:"contenedorItemVideo",className:"cursorPointer contenedorItemVideo",children:(0,m.jsxs)("div",{className:""+n.row,onClick:function(){return t.verVideo(r.id)},children:[(0,m.jsx)("div",{className:" "+n.imagen,children:(0,m.jsx)(x.Z,{src:"https://sccotview.com"+r.featured_image,className:n.imagenCarousel+" "})}),(0,m.jsx)("div",{className:" col-12",children:(0,m.jsxs)("div",{className:n.carouselText,children:[(0,m.jsx)("div",{className:"d-flex justify-content-end text-capitalize  ",children:(0,m.jsx)(d.Z,{sx:{"& > legend":{mt:2}},className:n.containerRating,children:(0,m.jsx)("div",{className:"bg-secondary d-inline pt-2 px-1 rounded-2",children:(0,m.jsx)(v.Z,{name:"read-only",value:parseFloat(r.score),precision:.5,readOnly:!0})})})}),(0,m.jsx)("h3",{className:"".concat(n.textTitle," text-light text-capitalize text-start border-bottom border-white pb-2"),children:r.title_espanol}),r.autor.length>0&&(0,m.jsxs)("ul",{className:"d-flex flex-wrap justify-content-start p-0 text-light",children:[(0,m.jsxs)("div",{className:"d-flex justify-content-between w-100 mb-2",children:[(0,m.jsxs)("div",{children:[(0,m.jsxs)("span",{className:"text-capitalize small",children:[r.autor.length>1?"Autores":"Autor"," \u2192"]}),r.autor.slice(0,2).map((function(e,r,t){return(0,m.jsx)("p",{className:"px-1 rounded-4 m-0 d-inline",children:(0,m.jsxs)("small",{className:"text-capitalize ",style:{fontSize:"0.85rem"},children:[f()(e.autor),r<t.length-1?",":""]})},e.id)}))]}),(0,m.jsx)("p",{className:"mx-1",style:{fontSize:"0.95rem"},children:function(e){var r=e.split(":"),t="";return r&&("00"!==r[0]&&(t=r[0]+"h"),"00"!==r[1]&&(t=" "+t+" "+r[1]+"min")),t.trim()}(r.duration)})]}),r.autor.length>2&&(0,m.jsx)("span",{className:"px-2 small",style:{fontSize:"0.85rem"},children:"..."})]})]})})]})})},b=t(1756),w=t(9929),y=t(8733),k=t(2680),N=t(8434),C=["videos","categories","search","search2"],S=(0,u.Z)((function(e){return{root:{},"@media (max-width: 1248px)":{root:{display:"flex"}}}}));var V=function(e){var r=e.videos,t=e.categories,u=e.search,d=e.search2,v=((0,o.Z)(e,C),(0,c.s0)()),h=(0,i.useState)(),x=(0,a.Z)(h,2),p=x[0],f=x[1],g=(0,i.useState)(null),Z=(0,a.Z)(g,2),V=Z[0],_=Z[1],E=(0,i.useState)(null),L=(0,a.Z)(E,2),U=L[0],z=L[1],F=(0,i.useContext)(k.Z).user,A=function(){var e=(0,s.Z)((0,n.Z)().mark((function e(){var r;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,w.UH({user_id:F.id});case 3:r=e.sent,f(r),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}(),I=function(){var e=(0,s.Z)((0,n.Z)().mark((function e(){var r;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,y.kt({user_id:F.id});case 3:r=e.sent,_(r),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}();(0,i.useEffect)((function(){A(),I()}),[]),(0,i.useEffect)((function(){if(V&&t){for(var e=[],r=[],n=[],s=0;s<V.length;s++)r.push(V[s].categoria);for(var a=0;a<t.length;a++)n.push(t[a]);for(var i=0;i<n.length;i++){for(var o=!1,c=0;c<r.length&!o;c++)n[i].categoria===r[c]&&(o=!0);e=V,o||e.push(n[i])}z(e||null)}}),[t,V]);var T=function(){var e=(0,s.Z)((0,n.Z)().mark((function e(r){var t,s,a,i,o,c;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(t=new FormData,a=0,t.append("usuario",F.id),t.append("video",r),e.prev=4,i=0;i<p.length;i++)(o=p[i]).usuario.id===F.id&&o.video===r&&(s=o,a++);if(0!==a){e.next=11;break}return e.next=9,w.LK(t);case 9:c=e.sent,s=c.data;case 11:e.next=16;break;case 13:e.prev=13,e.t0=e.catch(4),console.log(e.t0);case 16:v("/seeVideo/".concat(r),{state:s});case 17:case"end":return e.stop()}}),e,null,[[4,13]])})));return function(r){return e.apply(this,arguments)}}(),H=S();return r.length>0?(0,m.jsxs)("div",{className:"",children:[(0,m.jsx)("div",{id:"carousel_videos",children:(0,m.jsx)(l.Z,{className:H.root,id:"carousel",fade:!0,children:r&&u(r).slice(0,6).map((function(e,r){return(0,m.jsx)(l.Z.Item,{children:(0,m.jsx)(j,{video:e,histUsers:p,user:F,verVideo:T},r)},r)}))})}),(0,m.jsx)("br",{}),(0,m.jsx)("br",{}),(0,m.jsx)("br",{}),(0,m.jsx)("div",{id:"card_videos",className:"",children:V?(0,m.jsx)("div",{children:U&&function(){var e=d(U);return e.map((function(t,n){return e.length<=1?(0,m.jsx)(N.Z,{categoria:t,videos:r,search:u,histUsers:p,user:F,verVideo:T},n):(0,m.jsx)(b.Z,{categoria:t,videos:r,search:u,histUsers:p,user:F,verVideo:T},n)}))}()}):t&&function(){var e=d(t);return e.map((function(t,n){return e.length<=1?(0,m.jsx)(N.Z,{categoria:t,videos:r,search:u,histUsers:p,user:F,verVideo:T},n):(0,m.jsx)(b.Z,{categoria:t,videos:r,search:u,histUsers:p,user:F,verVideo:T},n)}))}()})]}):(0,m.jsx)("div",{id:"card_videos m-5 text-center",children:(0,m.jsx)("h2",{style:{color:"white"},children:(0,m.jsx)("center",{children:"No hay videos disponibles"})})})},_=t(3927),E=t(5764),L=t(9278),U=t(3561),z=function(e){var r=e.videos,t=(0,i.useState)(""),o=(0,a.Z)(t,2),c=o[0],u=o[1],l=(0,i.useState)([]),d=(0,a.Z)(l,2),v=d[0],h=d[1],x=(0,i.useState)([]),p=(0,a.Z)(x,2),f=p[0],g=p[1],Z=(0,i.useState)("All"),j=(0,a.Z)(Z,2),b=j[0],w=j[1],y=(0,i.useState)(!0),N=(0,a.Z)(y,2),C=N[0],S=N[1],z=(0,i.useContext)(k.Z).user;(0,i.useEffect)((function(){var e=function(){var e=(0,s.Z)((0,n.Z)().mark((function e(){var r;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,(0,E.wb)();case 3:r=e.sent,h(r),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log("Error al cargar categor\xedas");case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}();e()}),[]);var F=function(e){return e.normalize("NFD").replace(/[\u0300-\u036f]/g,"")},A=function(e){if(!c)return e;var r=F(c.toLowerCase());return e.filter((function(e){var t,n,s,a,i,o=F(e.title_espanol||"").toLowerCase().includes(r),c=F(e.description_esp||"").toLowerCase().includes(r),u=null===(t=e.categorias)||void 0===t?void 0:t.some((function(e){return F(e.categoria.toLowerCase()).includes(r)})),l=null===(n=e.especialidad)||void 0===n?void 0:n.some((function(e){return F(e.especialidad.toLowerCase()).includes(r)})),d=null===(s=e.subEspecialidad)||void 0===s?void 0:s.some((function(e){return F(e.subEspecialidad.toLowerCase()).includes(r)})),v=null===(a=e.palabraClave)||void 0===a?void 0:a.some((function(e){return F(e.palabraClave.toLowerCase()).includes(r)})),h=null===(i=e.autor)||void 0===i?void 0:i.some((function(e){return F(e.autor.toLowerCase()).includes(r)}));return o||c||u||l||d||v||h}))},I=function(e){var r=document.getElementById("carousel");return e.filter((function(e){return r?e.categoria===b?(r.style.visibility="hidden",r.style.height="10px",F(e.categoria.toLowerCase()).includes(F(c.toLowerCase()))):"All"===b&&(r.style.visibility="visible",r.style.height="100%",!0):(console.warn("No se encontr\xf3 el contenedor del carrusel"),!1)}))};(0,i.useEffect)((function(){if(Array.isArray(r)){var e=A(r);g(e),S(!1)}}),[c,r]);return(0,m.jsxs)("div",{children:[(0,m.jsx)(L.Z,{query:c,setQuery:u,filterParam:b,setFilterParam:w,categories:v}),(0,m.jsx)(_.S,{children:function(){if(C)return(0,m.jsx)("h1",{className:"m-5 text-center",children:"Cargando videos..."});if(0===f.length)return(0,m.jsx)("h1",{className:"m-5 text-center",children:"No se encontraron videos"});var e=null!==z&&void 0!==z&&z.is_superuser?V:U.Z;return(0,m.jsx)(e,{videos:f,categories:v,search:A,search2:I})}()})]})},F=t(2516),A=function(){var e=(0,i.useContext)(k.Z).user,r=(0,F.Z)(z),t=(0,i.useState)({loading:!0,videos:[]}),o=(0,a.Z)(t,2),c=o[0],u=o[1];return(0,i.useEffect)((function(){var r=function(){var r=(0,s.Z)((0,n.Z)().mark((function r(){var t,s;return(0,n.Z)().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(r.prev=0,!e){r.next=7;break}return r.next=4,h.Zs();case 4:r.t0=r.sent,r.next=10;break;case 7:return r.next=9,h.My();case 9:r.t0=r.sent;case 10:t=r.t0,s=t,console.log(s),u({loading:!1,videos:s.videos}),r.next=20;break;case 16:r.prev=16,r.t1=r.catch(0),console.error("Error cargando videos",r.t1),u({loading:!1,videos:[]});case 20:case"end":return r.stop()}}),r,null,[[0,16]])})));return function(){return r.apply(this,arguments)}}();r()}),[e]),(0,m.jsx)("div",{className:"App",children:(0,m.jsx)(r,{isLoading:c.loading,videos:c.videos})})}}}]);
//# sourceMappingURL=613.52800088.chunk.js.map