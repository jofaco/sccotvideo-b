"use strict";(self.webpackChunkvideoteca_frontend=self.webpackChunkvideoteca_frontend||[]).push([[332],{3561:function(e,t,r){var n=r(4165),a=r(5861),s=r(9439),i=r(5987),c=r(2791),u=r(7689),o=(r(8040),r(8596)),f=r(8374),d=r(9378),l=r(1756),p=r(9929),v=r(8733),x=r(2680),h=r(8434),Z=(r(5258),r(184)),m=["videos","categories"],g=(0,o.Z)((function(e){return{root:{margin:"auto"},"@media (max-width: 1248px)":{root:{display:"flex"}},"@media (max-width: 768px)":{root:{}}}}));t.Z=function(e){var t=e.videos,r=e.categories,o=(0,i.Z)(e,m),w=(0,u.s0)(),b=(0,c.useState)(null),k=(0,s.Z)(b,2),j=k[0],y=k[1],S=(0,c.useState)(null),N=(0,s.Z)(S,2),C=N[0],L=N[1],_=(0,c.useState)(null),E=(0,s.Z)(_,2),V=E[0],I=E[1],U=(0,c.useContext)(x.Z).user,O=function(){var e=(0,a.Z)((0,n.Z)().mark((function e(){var t;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(U){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,e.next=5,p.UH({user_id:U.id});case 5:t=e.sent,y(t),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(2),console.log(e.t0);case 12:case"end":return e.stop()}}),e,null,[[2,9]])})));return function(){return e.apply(this,arguments)}}(),F=function(){var e=(0,a.Z)((0,n.Z)().mark((function e(){var t;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(U){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,e.next=5,v.kt({user_id:U.id});case 5:t=e.sent,L(t),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(2),console.log(e.t0);case 12:case"end":return e.stop()}}),e,null,[[2,9]])})));return function(){return e.apply(this,arguments)}}();(0,c.useEffect)((function(){U&&(O(),F())}),[]),(0,c.useEffect)((function(){if(C&&r){for(var e=[],t=[],n=[],a=0;a<C.length;a++)t.push(C[a].categoria);for(var s=0;s<r.length;s++)n.push(r[s]);for(var i=0;i<n.length;i++){for(var c=!1,u=0;u<t.length&!c;u++)n[i].categoria===t[u]&&(c=!0);e=C,c||e.push(n[i])}I(e||null)}}),[r,C]);var z=function(){var e=(0,a.Z)((0,n.Z)().mark((function e(t,r){var a,s,i,c;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==U&&void 0!==U&&U.id||13!==r){e.next=3;break}return w("/seeWebinar/".concat(t)),e.abrupt("return");case 3:if(null===U||void 0===U||!U.id){e.next=26;break}if((a=new FormData).append("usuario",U.id),a.append("video",t),s=null,e.prev=8,!(i=j.find((function(e){var r;return(null===(r=e.usuario)||void 0===r?void 0:r.id)===U.id&&e.video===t})))){e.next=14;break}s=i,e.next=18;break;case 14:return e.next=16,p.LK(a);case 16:c=e.sent,s=c.data;case 18:e.next=23;break;case 20:e.prev=20,e.t0=e.catch(8),console.error("Error registrando historial:",e.t0);case 23:w("/seeVideo/".concat(t),{state:s}),e.next=27;break;case 26:w("/seeVideo/".concat(t));case 27:case"end":return e.stop()}}),e,null,[[8,20]])})));return function(t,r){return e.apply(this,arguments)}}(),H=g();return(0,Z.jsxs)("div",{children:[(0,Z.jsx)("div",{id:"carousel_videos",className:" ",children:(0,Z.jsx)(f.Z,{className:H.root,id:"carousel",children:t&&o.search(t).slice(0,6).map((function(e,t){return(0,Z.jsx)(f.Z.Item,{style:{minHeight:"400px"},children:(0,Z.jsx)(d.Z,{video:e,listVideos:o.listVideos,histUsers:j,user:U,verVideo:z},e.id)},t)}))})}),(0,Z.jsx)("br",{}),(0,Z.jsx)("br",{}),(0,Z.jsx)("div",{id:"card_videos",className:"mt-5",children:t&&C?(0,Z.jsx)("div",{className:"",children:V&&o.search2(V).map((function(e,r){return(0,Z.jsx)(Z.Fragment,{children:o.search2(V).length<=1?(0,Z.jsx)(h.Z,{categoria:e,videos:t,search:o.search,histUsers:j,user:U,verVideo:z},r):(0,Z.jsx)(l.Z,{categoria:e,videos:t,search:o.search,histUsers:j,user:U,verVideo:z},r)})}))}):o.search2(r).map((function(e,n){return(0,Z.jsx)("div",{children:o.search2(r).length<=1?(0,Z.jsx)(h.Z,{categoria:e,videos:t,search:o.search,histUsers:j,user:U,verVideo:z},n):(0,Z.jsx)(l.Z,{categoria:e,videos:t,search:o.search,histUsers:j,user:U,verVideo:z},n)},n)}))})]})}},8561:function(e,t,r){r.r(t),r.d(t,{default:function(){return j}});var n=r(7762),a=r(4165),s=r(5861),i=r(9439),c=r(2791),u=r(7689),o=r(6542),f=r(6639),d=r(1652),l=r(9929),p=r(5987),v=(r(8040),r(1174),r(3927)),x=r(5764),h=r(9278),Z=r(3561),m=r(184),g=["series"],w=function(e){var t=e.series,r=((0,p.Z)(e,g),document.getElementById("carousel")),n=(0,c.useState)(""),u=(0,i.Z)(n,2),o=u[0],f=u[1],d=(0,c.useState)(""),l=(0,i.Z)(d,2),w=l[0],b=l[1],k=(0,c.useState)(["title_espanol"]),j=(0,i.Z)(k,1)[0],y=(0,c.useState)(["categoria"]),S=(0,i.Z)(y,1)[0],N=(0,c.useState)(["All"]),C=(0,i.Z)(N,2),L=C[0],_=C[1],E=localStorage.getItem("user"),V=JSON.parse(E),I=function(){var e=(0,s.Z)((0,a.Z)().mark((function e(){var t;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,(0,x.wb)();case 3:t=e.sent,b(t),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log("Error");case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}();(0,c.useEffect)((function(){I()}),[]);var U=function(e){if(o){if(o){r.style.visibility="hidden",r.style.height="10px";var t=o.toLowerCase();return e.filter((function(e){var r=e.title_espanol.toString().toLowerCase().indexOf(t)>-1;return r||e.categorias.some((function(e){return e.categoria.toLowerCase().includes(t)}))}))}return e.filter((function(e){return e.categorias.categoria.toString().toLowerCase().indexOf(o.toLowerCase())>-1}))}return e},O=function(e){return e.filter((function(e){return e.categoria===L?(r.style.visibility="hidden",r.style.height="10px",S.some((function(t){return e[t].toString().toLowerCase().indexOf(o.toLowerCase())>-1}))):"All"==L?(r.style.visibility="visible",r.style.height="100%",t.filter((function(e){return j.some((function(t){return e[t].toString().toLowerCase().indexOf(o.toLowerCase())>-1}))}))):void 0}))};return V&&t?(V.is_superuser,(0,m.jsxs)("div",{children:[(0,m.jsx)(h.Z,{query:o,setQuery:f,filterParam:L,setFilterParam:_,categories:w}),(0,m.jsx)(v.S,{children:(0,m.jsx)(Z.Z,{videos:t,categories:w,search:U,search2:O})})]})):(0,m.jsx)("p",{style:{fontSize:"25px"},children:"Inicia sesi\xf3n para ver todos los videos!"})},b=r(2516),k=r(7087);r(9713);var j=function(){var e=(0,b.Z)(w),t=(0,u.s0)(),r=(0,c.useState)(),p=(0,i.Z)(r,2),v=p[0],x=p[1],h=(0,c.useState)([]),Z=(0,i.Z)(h,2),g=Z[0],j=Z[1],y=(0,c.useState)([]),S=(0,i.Z)(y,2),N=(S[0],S[1],(0,c.useState)(0)),C=(0,i.Z)(N,2),L=(C[0],C[1]),_=(0,c.useState)([]),E=(0,i.Z)(_,2),V=E[0],I=E[1],U=(0,c.useState)(0),O=(0,i.Z)(U,2),F=(O[0],O[1],(0,c.useState)({loading:!0,videos:null})),z=(0,i.Z)(F,2),H=z[0],P=z[1],W=(0,c.useState)({}),A=(0,i.Z)(W,2),D=A[0],G=A[1];(0,c.useEffect)((function(){var e=function(){var e=(0,s.Z)((0,a.Z)().mark((function e(){var t;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return P({loading:!0}),e.prev=1,e.next=4,o._G();case 4:t=e.sent,j(t),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),console.error("Error cargando series:",e.t0);case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(){return e.apply(this,arguments)}}();e()}),[]),(0,c.useEffect)((function(){var e=function(){var e=(0,s.Z)((0,a.Z)().mark((function e(){var t;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f.xI();case 2:t=e.sent,I(t);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();e()}),[]),(0,c.useEffect)((function(){var e=function(){var e=(0,s.Z)((0,a.Z)().mark((function e(){var t,r,s,i;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t={},r=(0,n.Z)(g),e.prev=2,r.s();case 4:if((s=r.n()).done){e.next=11;break}return i=s.value,e.next=8,q(i.id);case 8:t[i.id]=e.sent;case 9:e.next=4;break;case 11:e.next=16;break;case 13:e.prev=13,e.t0=e.catch(2),r.e(e.t0);case 16:return e.prev=16,r.f(),e.finish(16);case 19:G(t);case 20:case"end":return e.stop()}}),e,null,[[2,13,16,19]])})));return function(){return e.apply(this,arguments)}}();g.length>0&&e()}),[g]);var K=function(){var e=(0,s.Z)((0,a.Z)().mark((function e(){var t;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,l.K7();case 3:t=e.sent,x(t),P({loading:!1}),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}();(0,c.useEffect)((function(){K()}),[]);var q=function(){var e=(0,s.Z)((0,a.Z)().mark((function e(t){var r,n;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d.Zs();case 2:return r=e.sent,n=r.videos.filter((function(e){return 2==e.tipe_of_video&&e.serie==t&&1==e.state})),e.abrupt("return",n.length);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return(0,m.jsx)("div",{className:"d-flex justify-content-center",children:(0,m.jsx)("div",{style:{maxWidth:"1450px",minWidth:"50%",padding:"20px"},children:H.loading?(0,m.jsx)(e,{isLoading:H.loading,series:g}):(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)("div",{className:"d-flex justify-content-end",children:(0,m.jsx)("button",{onClick:function(){return window.history.back()},className:"btn btn-light mt-4",value:"Volver",children:"Volver"})}),(0,m.jsx)("h2",{className:"px-2 mb-3",children:"Listado de Series"}),(0,m.jsx)("div",{className:"d-flex flex-wrap",children:v&&g.map((function(e,r){return(0,m.jsxs)("div",{className:"border rounded cursorPointer card-width p-2 m-3",children:[(0,m.jsxs)("div",{onClick:function(){var r;r=e.id,v?(t("/seeSerie/".concat(r),{state:v}),L(r)):console.warn("Historial de usuarios a\xfan no ha cargado")},children:[D[e.id]>0&&(0,m.jsx)("div",{className:"d-flex justify-content-end mb-1",children:(0,m.jsxs)("small",{children:[" ",D[e.id]||""," Videos"]})}),(0,m.jsx)(k.LazyLoadImage,{effect:"blur",src:"https://sccotview.com"+e.featured_image,className:"rounded mb-2",alt:""}),(0,m.jsx)("h5",{className:"text-capitalize truncate-text",children:e.serie}),(0,m.jsx)("small",{className:"truncate-text mb-0",children:e.description})]}),(0,m.jsx)("div",{children:V.map((function(t,r){return e.id===t.serie?(0,m.jsx)("div",{},r):null}))})]},r)}))})]})})})}},6542:function(e,t,r){r.d(t,{Ed:function(){return u},Zg:function(){return f},_G:function(){return c},dS:function(){return o}});var n=r(4165),a=r(5861),s=r(7411),i="https://sccotview.com/api/series/",c=function(){var e=(0,a.Z)((0,n.Z)().mark((function e(){var t;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s.Z.get(i);case 2:if(200!==(t=e.sent).status){e.next=7;break}return e.next=6,t.data;case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),u=function(){var e=(0,a.Z)((0,n.Z)().mark((function e(t){var r;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s.Z.post(i,t);case 2:if(200!==(r=e.sent).status){e.next=7;break}return e.next=6,r.data;case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),o=function(){var e=(0,a.Z)((0,n.Z)().mark((function e(t){var r;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s.Z.get("".concat(i).concat(t));case 2:if(200!==(r=e.sent).status){e.next=7;break}return e.next=6,r.data;case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),f=function(){var e=(0,a.Z)((0,n.Z)().mark((function e(t,r){var a;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s.Z.patch(i+t+"/",r);case 2:if(200!==(a=e.sent).status){e.next=5;break}return e.abrupt("return",a.data);case 5:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}()},6639:function(e,t,r){r.d(t,{C1:function(){return f},DN:function(){return u},op:function(){return o},xI:function(){return c}});var n=r(4165),a=r(5861),s=r(7411),i="https://sccotview.com/api/temporadas/",c=function(){var e=(0,a.Z)((0,n.Z)().mark((function e(){var t;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s.Z.get(i);case 2:if(200!==(t=e.sent).status){e.next=7;break}return e.next=6,t.data;case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),u=function(){var e=(0,a.Z)((0,n.Z)().mark((function e(t){var r;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s.Z.post(i,t);case 2:if(200!==(r=e.sent).status){e.next=7;break}return e.next=6,r.data;case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),o=function(){var e=(0,a.Z)((0,n.Z)().mark((function e(t){var r;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s.Z.get("".concat(i).concat(t));case 2:if(200!==(r=e.sent).status){e.next=7;break}return e.next=6,r.data;case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),f=function(){var e=(0,a.Z)((0,n.Z)().mark((function e(t,r){var a;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s.Z.patch(i+t+"/",r);case 2:if(200!==(a=e.sent).status){e.next=5;break}return e.abrupt("return",a.data);case 5:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}()}}]);
//# sourceMappingURL=332.71997aef.chunk.js.map