"use strict";(self.webpackChunkvideoteca_frontend=self.webpackChunkvideoteca_frontend||[]).push([[400],{7411:function(e,t,r){var n=r(4165),a=r(5861),s=r(3263),c=r(9778),o="https://sccotview.com/api/",i=["free/","free"],u=(localStorage.getItem("access_token"),s.Z.create({baseURL:o,timeout:5e3,headers:{"Content-Type":"multipart/form-data",accept:"application/json"}}));u.interceptors.request.use((function(e){var t=localStorage.getItem("access_token"),r=i.some((function(t){return e.url.includes(t)}));return t&&!r?e.headers.Authorization="JWT "+t:delete e.headers.Authorization,e})),u.interceptors.response.use((function(e){return e}),function(){var e=(0,a.Z)((0,n.Z)().mark((function e(t){var r,a,s,i,l;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.config,"undefined"!==typeof t.response){e.next=4;break}return console.warn("A server/network error occurred. Looks like CORS might be the problem."),e.abrupt("return",Promise.reject(t));case 4:if(401!==t.response.status||r.url!==o+"api/token/refresh/"){e.next=7;break}return window.location.href="/userlogin1/",e.abrupt("return",Promise.reject(t));case 7:if("token_not_valid"!==t.response.data.code||401!==t.response.status||"Unauthorized"!==t.response.statusText){e.next=37;break}if(!(a=localStorage.getItem("refresh_token"))){e.next=34;break}if(s=JSON.parse(c.lW.from(a.split(".")[1],"base64").toString()),i=Math.ceil(Date.now()/1e3),!(s.exp>i)){e.next=29;break}return e.prev=13,e.next=16,u.post("api/token/refresh/",{refresh:a});case 16:return l=e.sent,localStorage.setItem("access_token",l.data.access_token),localStorage.setItem("refresh_token",l.data.refresh_token),u.defaults.headers.Authorization="JWT "+l.data.access_token,r.headers.Authorization="JWT "+l.data.access_token,e.abrupt("return",u(r));case 24:e.prev=24,e.t0=e.catch(13),console.log(e.t0);case 27:e.next=32;break;case 29:console.log("Refresh token is expired",s.exp,i),localStorage.clear(),window.location.href="/userlogin2/";case 32:e.next=37;break;case 34:console.log("Refresh token not available."),localStorage.clear(),window.location.href="/userlogin3/";case 37:return 401===t.response.status&&localStorage.clear(),e.abrupt("return",Promise.reject(t));case 39:case"end":return e.stop()}}),e,null,[[13,24]])})));return function(t){return e.apply(this,arguments)}}()),t.Z=u},8400:function(e,t,r){r.r(t),r.d(t,{default:function(){return N}});var n=r(9439),a=r(2791),s=r(4165),c=r(5861),o=r(7689),i=(r(8040),r(1174),r(3712)),u=r(8596),l=r(6151),p=r(2680),d=r(5764),f=r(4942),x=r(1413),h=r(5987),v=r(5342),Z=r(3360),g=r(4437),m=(r(9629),r(184)),b=["handleClose","show","category_id","currentItem","setFormData","newData"],w=(0,u.Z)((function(e){return{containerModal:{border:"2px solid #ccc",borderRadius:50,boxShadow:"4px 4px 4px 0px #5a28e550"},containerForm:{height:"3rem",background:"#BFF",border:"2px solid #ccc",borderRadius:50,boxShadow:"4px 4px 4px 0px #5a28e550"},"@media (max-width: 720px)":{root:{display:"flex"}}}})),k=function(e){var t=e.handleClose,r=e.show,n=e.category_id,a=(e.currentItem,e.setFormData),o=e.newData,i=(0,h.Z)(e,b),u=function(){var e=(0,c.Z)((0,s.Z)().mark((function e(t){var r,a,c;return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),r=new FormData,e.prev=2,n){e.next=9;break}return r.append("categoria",o.categoria),e.next=7,d.CX(r);case 7:e.next=12;break;case 9:return r.append("categoria",o.categoria),e.next=12,d.yr(n,r);case 12:return e.next=14,d.wb();case 14:return a=e.sent,e.next=17,a;case 17:c=e.sent,i.setCategories(c),e.next=24;break;case 21:e.prev=21,e.t0=e.catch(2),console.log(e.t0);case 24:case"end":return e.stop()}}),e,null,[[2,21]])})));return function(t){return e.apply(this,arguments)}}(),l=w();return(0,m.jsxs)(v.Z,{show:r,onHide:t,"aria-labelledby":"example-custom-modal-styling-title",contentClassName:l.cloud,centered:!0,children:[(0,m.jsx)(v.Z.Header,{closeButton:!0,children:(0,m.jsx)(v.Z.Title,{id:"tituloModal",children:(0,m.jsx)("h2",{children:n?"Editar Registro":"Crear Registro"})})}),(0,m.jsx)(v.Z.Body,{id:"bodyModal",children:(0,m.jsxs)(g.Z,{onSubmit:u,children:[(0,m.jsx)(g.Z.Group,{className:"mb-2 ",controlId:"exampleForm.ControlInput1",children:(0,m.jsx)(g.Z.Control,{type:"text",className:l.containerForm,rows:1,name:"categoria",value:o.categoria||"",onChange:function(e){var t=e.target.name;a((0,x.Z)((0,x.Z)({},o),{},(0,f.Z)({},t,e.target.value)))}})}),(0,m.jsxs)(v.Z.Footer,{children:[(0,m.jsx)(Z.Z,{variant:"secondary",onClick:t,children:"Close"}),(0,m.jsx)(Z.Z,{variant:"primary",type:"submit",onClick:t,children:n?"Guardar Cambios":"Crear"})]})]})})]})},j=r(2918),y=r(1652),C=function(e){var t=e.categories,r=(0,o.s0)(),f=(0,j.d)(!1),x=(0,n.Z)(f,3),h=x[0],v=x[1],Z=x[2],g=(0,a.useState)(""),b=(0,n.Z)(g,2),w=b[0],C=b[1],S=(0,a.useState)({}),N=(0,n.Z)(S,2),I=N[0],_=N[1],D=(0,a.useState)(t),z=(0,n.Z)(D,2),A=z[0],F=z[1],R=(0,a.useState)({categoria:""}),T=(0,n.Z)(R,2),L=T[0],E=T[1],J=(0,a.useState)([]),M=(0,n.Z)(J,2),P=M[0],W=M[1],B=(0,a.useContext)(p.Z).user,G=(0,u.Z)((function(e){return{paper:{marginTop:e.spacing(0),marginBottom:e.spacing(10),display:"flex",flexDirection:"column",alignItems:"center"},title1:{textAlign:"center",color:"white"}}})),H=function(){var e=(0,c.Z)((0,s.Z)().mark((function e(t){return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:C(t.id),_(t),E({categoria:t.categoria}),v(!0);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),O=function(){var e=(0,c.Z)((0,s.Z)().mark((function e(){return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:C(null),_({}),E({categoria:""}),v(!0);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),U=function(){var e=(0,c.Z)((0,s.Z)().mark((function e(){var t,r;return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,d.wb();case 3:return t=e.sent,e.next=6,t;case 6:r=e.sent,F(r),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),console.log(e.t0);case 13:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(){return e.apply(this,arguments)}}(),X=function(){var e=(0,c.Z)((0,s.Z)().mark((function e(){var t,r;return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,y.Zs();case 3:return t=e.sent,e.next=6,t;case 6:r=e.sent,W(r.videos),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),console.log(e.t0);case 13:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(){return e.apply(this,arguments)}}();(0,a.useEffect)((function(){B?(X(),U(),C(null)):r("/loginuser")}),[]);var q=G();return B?(0,m.jsxs)(i.Z,{children:[(0,m.jsx)("div",{className:q.paper,children:(0,m.jsx)("h1",{className:"mt-4",children:"Categor\xedas"})}),(0,m.jsxs)("div",{className:"d-flex justify-content-between",children:[(0,m.jsx)("div",{children:(0,m.jsxs)("span",{className:"border border-light p-2 rounded text-light",children:[P.length," Videos"]})}),(0,m.jsx)("div",{children:(0,m.jsx)(l.Z,{variant:"contained",color:"success",type:"submit",onClick:function(){return O()},children:"Registrar Categor\xeda"})})]}),(0,m.jsx)("br",{}),(0,m.jsx)("br",{})," ",(0,m.jsx)("br",{}),(0,m.jsx)("div",{children:(0,m.jsx)("section",{className:"content",children:(0,m.jsx)("div",{className:"table-responsive table-condensed table-sm tabla",children:(0,m.jsxs)("table",{className:"table table-hover",id:"dataTableData",name:"dataTableData",style:{fontSize:15,textAlign:"center"},children:[(0,m.jsx)("thead",{className:q.title1,children:(0,m.jsxs)("tr",{children:[(0,m.jsx)("th",{style:{display:"none"},children:"Id"}),(0,m.jsx)("th",{children:"Codigo"}),(0,m.jsx)("th",{children:"Categor\xeda"}),(0,m.jsx)("th",{children:"Cantidad de videos"}),(0,m.jsx)("th",{})]})}),(0,m.jsx)("tbody",{style:{backgroundColor:"white"},children:0===A.length?(0,m.jsx)("tr",{children:(0,m.jsx)("td",{colSpan:11,children:"No hay datos"})}):A.map((function(e,t){return(0,m.jsxs)("tr",{children:[(0,m.jsx)("td",{style:{display:"none"},children:e.id}),(0,m.jsx)("td",{children:e.id}),(0,m.jsx)("td",{children:e.categoria}),(0,m.jsx)("td",{children:P.filter((function(t){return t.categorias.some((function(t){return e.categoria===t.categoria}))})).length}),(0,m.jsx)("td",{children:(0,m.jsx)("button",{className:"btn btn-outline-primary p-1 btn-sm float-right",type:"submit",onClick:function(){return H(e)},children:"editar"})})]},t)}))})]})})})}),(0,m.jsx)(k,{handleClose:Z,show:h,category_id:w,currentItem:I,setCategories:F,setFormData:E,newData:L})]}):(0,m.jsx)("p",{style:{fontSize:"25px"},children:"Inicia sesi\xf3n para ver todos los videos!"})},S=r(2516),N=function(){var e=(0,S.Z)(C),t=(0,a.useContext)(p.Z).user,r=(0,a.useState)({loading:!0,categories:null}),s=(0,n.Z)(r,2),c=s[0],o=s[1];return(0,a.useEffect)((function(){d.wb().then((function(e){o({loading:!1,categories:e})}))}),[o]),t?(0,m.jsx)(i.Z,{children:(0,m.jsx)("div",{className:"App",children:(0,m.jsx)(e,{isLoading:c.loading,categories:c.categories})})}):(0,m.jsx)("p",{style:{fontSize:"25px"},children:"Inicia sesi\xf3n para ver todos los videos!"})}},2516:function(e,t,r){var n=r(1413),a=r(5987),s=(r(2791),r(184)),c=["isLoading"];t.Z=function(e){return function(t){var r=t.isLoading,o=(0,a.Z)(t,c);return r?(0,s.jsxs)("div",{className:"mt-4",style:{fontSize:"25px",display:"flex",justifyContent:"center",textAlign:"center",flexDirection:"column",alignItems:"center"},children:[(0,s.jsx)("div",{className:"spinner-grow text-light",role:"status",children:(0,s.jsx)("span",{className:"sr-only"})}),"Espera por favor"]}):(0,s.jsx)(e,(0,n.Z)({},o))}}},2918:function(e,t,r){r.d(t,{d:function(){return s}});var n=r(9439),a=r(2791),s=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=(0,a.useState)(e),r=(0,n.Z)(t,2),s=r[0],c=r[1],o=function(){return c(!0)},i=function(){return c(!1)};return[s,o,i]}},5764:function(e,t,r){r.d(t,{CX:function(){return i},wb:function(){return o},yr:function(){return u}});var n=r(4165),a=r(5861),s=r(7411),c="https://sccotview.com/api/categorias/",o=function(){var e=(0,a.Z)((0,n.Z)().mark((function e(){var t;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,s.Z.get(c);case 3:return t=e.sent,e.abrupt("return",t.data);case 7:throw e.prev=7,e.t0=e.catch(0),console.error("Error en ListCategorias:",e.t0),e.t0;case 11:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}(),i=function(){var e=(0,a.Z)((0,n.Z)().mark((function e(t){var r;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s.Z.post(c,t);case 2:if(200!==(r=e.sent).status){e.next=7;break}return e.next=6,r.data;case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),u=function(){var e=(0,a.Z)((0,n.Z)().mark((function e(t,r){var a;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s.Z.patch(c+t+"/",r);case 2:if(200!==(a=e.sent).status){e.next=5;break}return e.abrupt("return",a.data);case 5:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}()},1652:function(e,t,r){r.d(t,{Jp:function(){return v},My:function(){return u},PI:function(){return l},Wg:function(){return i},Zs:function(){return o},ff:function(){return x},gY:function(){return Z},iA:function(){return f},jk:function(){return p},om:function(){return d},zj:function(){return h}});var n=r(4165),a=r(5861),s=r(7411),c="https://sccotview.com/api/videos/",o=function(){var e=(0,a.Z)((0,n.Z)().mark((function e(){var t;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s.Z.get("".concat(c));case 2:if(200!==(t=e.sent).status){e.next=7;break}return e.next=6,t.data;case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),i=function(){var e=(0,a.Z)((0,n.Z)().mark((function e(){var t;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s.Z.get("".concat(c,"public/webinars/"));case 2:if(200!==(t=e.sent).status){e.next=7;break}return e.next=6,t.data;case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),u=function(){var e=(0,a.Z)((0,n.Z)().mark((function e(){var t;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s.Z.get("".concat(c,"public/"));case 2:if(200!==(t=e.sent).status){e.next=6;break}return console.log(t.data),e.abrupt("return",t.data);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),l=function(){var e=(0,a.Z)((0,n.Z)().mark((function e(){var t;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s.Z.get("".concat(c,"listPeliculas/"));case 2:if(200!==(t=e.sent).status){e.next=7;break}return e.next=6,t.data;case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),p=function(){var e=(0,a.Z)((0,n.Z)().mark((function e(){var t;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s.Z.get("".concat(c,"listCasos/"));case 2:if(200!==(t=e.sent).status){e.next=7;break}return e.next=6,t.data;case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),d=function(){var e=(0,a.Z)((0,n.Z)().mark((function e(t){var r;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s.Z.get("".concat(c).concat(t));case 2:if(r=e.sent,console.log(r.data),200!==r.status){e.next=8;break}return e.next=7,r.data;case 7:return e.abrupt("return",e.sent);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),f=function(){var e=(0,a.Z)((0,n.Z)().mark((function e(t){var r;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s.Z.get(c+"retrieve/"+t);case 2:if(200!==(r=e.sent).status){e.next=5;break}return e.abrupt("return",r.data);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),x=function(){var e=(0,a.Z)((0,n.Z)().mark((function e(t){var r;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s.Z.post(c,t);case 2:if(r=e.sent,console.log(r),200!==r.status){e.next=10;break}return e.next=7,r.data;case 7:case 13:return e.abrupt("return",e.sent);case 10:if(409!==r.status){e.next=14;break}return e.next=13,r.data;case 14:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),h=function(){var e=(0,a.Z)((0,n.Z)().mark((function e(t,r){var a;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s.Z.put(c+t+"/",r);case 2:if(a=e.sent,console.log(a),200!==a.status){e.next=8;break}return e.next=7,a.data;case 7:return e.abrupt("return",e.sent);case 8:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}(),v=function(){var e=(0,a.Z)((0,n.Z)().mark((function e(t,r){var a;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s.Z.patch(c+t+"/",r);case 2:if(200!==(a=e.sent).status){e.next=5;break}return e.abrupt("return",a.data);case 5:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}(),Z=function(){var e=(0,a.Z)((0,n.Z)().mark((function e(t){return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s.Z.delete("".concat(c).concat(t));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},8040:function(){},9629:function(){}}]);
//# sourceMappingURL=400.a0150f2a.chunk.js.map