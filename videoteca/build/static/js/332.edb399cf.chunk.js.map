{"version":3,"file":"static/js/332.edb399cf.chunk.js","mappings":"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","sources":["components/videos/videoListUser.js","components/videos/series.js","paginas/Series.js","services/serie.js","services/temporada.js"],"sourcesContent":["import { useEffect, useState } from \"react\";\r\nimport { useNavigate } from \"react-router-dom\";\r\nimport {  useContext } from \"react\";\r\n\r\n//components\r\nimport \"react-responsive-carousel/lib/styles/carousel.min.css\"; // requires a loader\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport Carousel from \"react-bootstrap/Carousel\";\r\n//dependencies\r\nimport VideosItem from \"./videosItem\";\r\nimport VideosCategoriaFila from \"./videosCategoriaFila\";\r\nimport * as HistorialUserServer from \"../../services/historialUser\";\r\nimport * as PreferenciasUserServer from \"../../services/preferenciasUser\";\r\nimport Context from \"../context/UserContext\";\r\nimport VideoListSearch from \"./videoListSearch\";\r\nimport \"../../styles/styles.css\"\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  root: {\r\n    margin: \"auto\",\r\n  },\r\n  \"@media (max-width: 1248px)\": {\r\n    root: {\r\n      display: \"flex\",\r\n    },\r\n  },\r\n  \"@media (max-width: 768px)\": {\r\n    root: {\r\n    },\r\n  },\r\n \r\n}));\r\n\r\n/**\r\n * Componente para organizar en el index los videos en su respectiva categoria, con un buscador y filtro\r\n * @param {*} videos\r\n * @param {*} categories\r\n * @returns Contenedor con los videos y categorias \r\n */\r\nfunction VideosListUser({videos, categories, ...props}) {\r\n  const history = useNavigate();\r\n\r\n  const [histUsers, setHistUsers] = useState(null);\r\n  const [prefUsers, setPrefUsers] = useState(null); \r\n  const [categoriasTotales, setCategoriasTotales] = useState(null);\r\n  const { user } = useContext(Context)\r\n\r\n/**\r\n * FunciÃ³n para obtener el historial de los usuarios.\r\n */\r\n  const getHistorialUsers = async () => {\r\n    if (!user) return;\r\n\r\n    try {\r\n      const res = await HistorialUserServer.ListHistorialUser({'user_id':user.id});\r\n      setHistUsers(res);\r\n      //console.log(res);\r\n    } catch (error) {\r\n      console.log(error);\r\n    }\r\n  };\r\n/**\r\n * FunciÃ³n para obtener las preferencias de los usuarios\r\n */\r\n  const getPreferenciasUser = async () => {\r\n    if (!user) return;\r\n    try {\r\n      const res = await PreferenciasUserServer.ListPreferenciaUser({'user_id':user.id});   \r\n      setPrefUsers(res);\r\n     // console.log(res);\r\n    } catch (error) {\r\n      console.log(error);\r\n    }\r\n  };\r\n  \r\n  useEffect(() => {\r\n    if (user) {\r\n\r\n      \r\n      getHistorialUsers();\r\n      getPreferenciasUser();\r\n    }\r\n  // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, []);\r\n  /**\r\n   * FunciÃ³n para organizar las categorias de videos dependiendo de las preferencias.\r\n   */\r\n  useEffect(() => {\r\n    \r\n    \r\n    if(prefUsers && categories) {\r\n      let array = [];\r\n      let array1 =[];\r\n      let array2 = [];\r\n\r\n      for (let i = 0; i < prefUsers.length; i++) {\r\n        array1.push(prefUsers[i].categoria);        \r\n      } \r\n      for (let i = 0; i < categories.length; i++) {\r\n        array2.push(categories[i]);        \r\n      }    \r\n      \r\n      for (var i = 0; i < array2.length; i++) {\r\n          var igual=false;\r\n           for (var j = 0; j < array1.length & !igual; j++) {\r\n               if(array2[i].categoria === array1[j] )\r\n                igual=true;\r\n              }\r\n          array = prefUsers\r\n          if(!igual) array.push(array2[i]);\r\n        }\r\n        \r\n      if (array) {\r\n        //aqui se soluciona esto toca hacer que se coloque el prefUser al inicio y no al final\r\n        \r\n        setCategoriasTotales(array);\r\n      }\r\n      else {\r\n        setCategoriasTotales(null);\r\n      }\r\n\r\n    }\r\n  },[categories, prefUsers])\r\n\r\n  /**\r\n   * FunciÃ³n para redireccionar al reproductor del video seleccionado, se crea un nuevo historial de usuario si es la primera vez en ver el video, de lo contrario se envÃ­a este historial como state\r\n   * @param {*} id \r\n   */\r\nconst verVideo = async (id) => {\r\n    if (!user || !user.id) {\r\n      // alert(\"redirigir a see/Webinar\");\r\n      // Si no hay usuario, solo redirige al video sin historial\r\n      history(`/seeWebinar/${id}`);\r\n      return;\r\n    }\r\n  \r\n    const formData = new FormData();\r\n    let histUser;\r\n    let contador = 0;\r\n  \r\n    formData.append(\"usuario\", user.id);\r\n    formData.append(\"video\", id);\r\n  \r\n    try {\r\n      for (let index = 0; index < histUsers.length; index++) {\r\n        const element = histUsers[index];\r\n        if (element.usuario.id === user.id && element.video === id) {\r\n          histUser = element;\r\n          contador++;\r\n        }\r\n      }\r\n  \r\n      if (contador === 0) {\r\n        const hu = await HistorialUserServer.RegisterHistorialUser(formData);\r\n        histUser = hu.data;\r\n      }\r\n    } catch (error) {\r\n      console.log(error);\r\n    }\r\n    // alert(\"llevar al see/Video\");\r\n  \r\n    history(`/seeVideo/${id}`, { state: histUser });\r\n  };\r\n  //console.log(categoriasTotales);\r\n  const classes = useStyles();\r\n  return (\r\n    <div>\r\n      <div id=\"carousel_videos\" className=\" \">\r\n        {/* <h2 className=\"pb-2\">ð Ãltimos videos</h2> */}\r\n        {/* videos carousel usuario */}\r\n        {/* aca se coloca los ultimos videos traidos del histVisdeoUser */}\r\n        <Carousel  className={classes.root} id=\"carousel\" >\r\n          {videos &&\r\n            props.search(videos).slice(0, 6).map((video,index) => (\r\n              <Carousel.Item key={index} style={{ minHeight: \"400px\" }}>\r\n                <VideosItem\r\n                  key={video.id}\r\n                  video={video}\r\n                  listVideos={props.listVideos}\r\n                  histUsers={histUsers}\r\n                  user={user}\r\n                  verVideo={verVideo}\r\n                />\r\n              </Carousel.Item>\r\n\r\n            ) )}\r\n        </Carousel>\r\n      </div>\r\n     <br></br>\r\n     <br></br>\r\n      \r\n      <div id=\"card_videos\" className=\"mt-5\"   > \r\n      \r\n        {videos && prefUsers ? \r\n          <div className=\"\">\r\n            {/* videos por categorias usuario */}\r\n              {            \r\n              categoriasTotales && props.search2(categoriasTotales).map((element, index) => (\r\n                <>\r\n                { props.search2(categoriasTotales).length <= 1 ?\r\n                  \r\n                <VideoListSearch \r\n                  key= {index}\r\n                  categoria ={element}\r\n                  videos={videos}\r\n                  search={props.search}\r\n                  histUsers = {histUsers}\r\n                  user = {user}\r\n                  verVideo= {verVideo}\r\n                >\r\n                </VideoListSearch>\r\n                :\r\n                <VideosCategoriaFila\r\n                  key= {index}\r\n                  categoria ={element}\r\n                  videos={videos}\r\n                  search={props.search}\r\n                  histUsers = {histUsers}\r\n                  user = {user}\r\n                  verVideo= {verVideo}  \r\n                  >\r\n                </VideosCategoriaFila>\r\n                }   \r\n                  </>\r\n                ))\r\n              }\r\n          </div>\r\n        :\r\n        props.search2(categories).map((element,index) => (\r\n          <div key={index} >\r\n            {props.search2(categories).length <= 1 ?\r\n            <VideoListSearch \r\n            key= {index}\r\n            categoria ={element}\r\n            videos={videos}\r\n            search={props.search}\r\n            histUsers = {histUsers}\r\n            user = {user}\r\n            verVideo= {verVideo}\r\n            >\r\n\r\n            </VideoListSearch>\r\n            :\r\n              <VideosCategoriaFila\r\n                key= {index}\r\n                categoria ={element}\r\n                videos={videos}\r\n                search={props.search}\r\n                histUsers = {histUsers}\r\n                user = {user}\r\n                verVideo= {verVideo}\r\n              >\r\n              </VideosCategoriaFila>\r\n            }\r\n\r\n              </div>\r\n          ))\r\n        }\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default VideosListUser;\r\n","/* eslint-disable array-callback-return */\r\nimport { useEffect, useState } from \"react\";\r\n//Components\r\nimport \"react-responsive-carousel/lib/styles/carousel.min.css\"; // requires a loader\r\nimport \"../../index.css\";\r\n//dependencies\r\nimport { ErrorBoundary } from \"./errorsBoundary\";\r\nimport { ListCategorias } from \"../../services/category\";\r\n\r\nimport SearchComponent from \"./search\";\r\n//import VideosListUser2 from \"./videoListUser2\";\r\nimport VideosListUser from \"./videoListUser\";\r\n\r\n/**\r\n * FunciÃ³n para mostrar los videos con tipo Serie en la pestaÃ±a Series\r\n * @param {object} series\r\n * @returns Componente del buscador y componente lista (Dependendiendo si el usuario es admin o no, se retorna un componente distinto)\r\n */\r\nconst SeriesList = ({series, ...props}) => {\r\n  const contenedorCarousel = document.getElementById(\"carousel\");\r\n\r\n  const [query, setQuery] = useState(\"\");\r\n  const [categories, setCategories] = useState(\"\");\r\n  const [searchParam] = useState([\"title_espanol\"]);\r\n  const [searchParam2] = useState([\"categoria\"]);\r\n\r\n  const [filterParam, setFilterParam] = useState([\"All\"]);\r\n\r\n  const data = localStorage.getItem(\"user\");\r\n  const user = JSON.parse(data);\r\n\r\n  /**\r\n   * FunciÃ³n para traer la lista de categorias \r\n   */\r\n  const listCategorias = async () => {\r\n    try {\r\n      const res = await ListCategorias();\r\n      setCategories(res);\r\n    } catch (error) {\r\n      console.log(\"Error\");\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    listCategorias();\r\n  }, []);\r\n  \r\n  \r\n  /**\r\n   * FunciÃ³n para realizar la busqueda mediante el componente search\r\n   * @param {*} series \r\n   * @returns Parametros de la busqueda\r\n   */\r\n  const search = (videos) => {\r\n    if (!query) {\r\n      return videos\r\n    }\r\n    else if (query) {\r\n      contenedorCarousel.style.visibility = 'hidden'\r\n      contenedorCarousel.style.height = '10px';\r\n      const queryLowerCase = query.toLowerCase();\r\n      return videos.filter((dato) => {\r\n        const titleMatches = dato.title_espanol\r\n          .toString()\r\n          .toLowerCase()\r\n          .indexOf(queryLowerCase) > -1;\r\n  \r\n        if (!titleMatches) {\r\n          const descriptionMatches = dato.categorias.some((categoria) =>\r\n          categoria.categoria.toLowerCase().includes(queryLowerCase)\r\n        );\r\n          return descriptionMatches\r\n        }\r\n        return titleMatches\r\n      })\r\n    }\r\n     else {      \r\n      return videos.filter((dato)=>\r\n      dato.categorias.categoria.toString()\r\n      .toLowerCase()\r\n      .indexOf(query.toLowerCase()) > -1\r\n      )\r\n    }\r\n    \r\n  };\r\n  /**\r\n   * FunciÃ³n para realizar el filtro por categoria\r\n   * @param {*} categories \r\n   * @returns Resultado del filtro\r\n   */\r\n  const search2 = (categories) => {\r\n    return categories.filter((item) => {\r\n      if (item.categoria === filterParam) {\r\n        contenedorCarousel.style.visibility = \"hidden\";\r\n        contenedorCarousel.style.height = \"10px\";\r\n\r\n        return searchParam2.some((parameter) => {\r\n          return (\r\n            item[parameter]\r\n              .toString()\r\n              .toLowerCase()\r\n              .indexOf(query.toLowerCase()) > -1\r\n          );\r\n        });\r\n      }\r\n      // eslint-disable-next-line eqeqeq\r\n      else if (filterParam == \"All\") {\r\n        contenedorCarousel.style.visibility = \"visible\";\r\n        contenedorCarousel.style.height = \"100%\";\r\n        return series.filter((item) => {\r\n          return searchParam.some((parameter) => {\r\n            return (\r\n              item[parameter]\r\n                .toString()\r\n                .toLowerCase()\r\n                .indexOf(query.toLowerCase()) > -1\r\n            );\r\n          });\r\n        });\r\n      }\r\n    });\r\n  };\r\n\r\n  if (user && series) {\r\n    if (user.is_superuser) {\r\n      return (\r\n        <div>\r\n          <SearchComponent\r\n            query={query}\r\n            setQuery={setQuery}\r\n            filterParam={filterParam}\r\n            setFilterParam={setFilterParam}\r\n            categories={categories}\r\n          ></SearchComponent>\r\n          <ErrorBoundary>\r\n            <VideosListUser\r\n              videos={series}\r\n              categories={categories}\r\n              search={search}\r\n              search2={search2}\r\n            />\r\n          </ErrorBoundary>\r\n        </div>\r\n      );\r\n    }\r\n    return (\r\n      <div>\r\n        <SearchComponent\r\n          query={query}\r\n          setQuery={setQuery}\r\n          filterParam={filterParam}\r\n          setFilterParam={setFilterParam}\r\n          categories={categories}\r\n        ></SearchComponent>\r\n        <ErrorBoundary>\r\n        <VideosListUser\r\n            videos={series}\r\n            categories={categories}\r\n            search={search}\r\n            search2={search2}\r\n          />\r\n        </ErrorBoundary>\r\n      </div>\r\n    );\r\n  }\r\n  return (\r\n    <p style={{ fontSize: \"25px\" }}>Inicia sesiÃ³n para ver todos los videos!</p>\r\n  );\r\n};\r\n\r\nexport default SeriesList;\r\n","import { useEffect, useState } from \"react\";\r\nimport { useNavigate } from \"react-router-dom\";\r\n\r\n//import { Link } from 'react-router-dom';\r\n//dependencies\r\nimport * as SerieServer from \"../services/serie\";\r\nimport * as TemporadaServer from \"../services/temporada\";\r\nimport * as VideoServer from \"../services/videoServer\";\r\nimport * as HistorialUserServer from \"../services/historialUser\";\r\n\r\nimport SeriesList from \"../components/videos/series\";\r\nimport VideoLoadingComponent from \"../components/videos/videoLoading\";\r\n//components\r\nimport { Container } from \"@material-ui/core\";\r\nimport { LazyLoadImage } from \"react-lazy-load-image-component\";\r\nimport 'react-lazy-load-image-component/src/effects/blur.css'\r\n\r\n/**\r\n * Carga todos los videos que sean 'Series' para el modulo Series de la aplicaciÃ³n\r\n */\r\nfunction AppSeries() {\r\n  const VideoLoading = VideoLoadingComponent(SeriesList);\r\n  const history = useNavigate();\r\n  const [histUsers, setHistUsers] = useState();\r\n  // \r\n  const [series, setSeries] = useState([]);\r\n  const [videos, setVideos] = useState([]);\r\n  const [idSerie, setIdSerie] = useState(0);\r\n  const [temporadas, setTemporadas] = useState([]);\r\n  const [idTemporada, setIdTemporada] = useState(0);\r\n  const [appState, setAppState] = useState({\r\n    loading: true,\r\n    videos: null,\r\n  });\r\n  const [videoCounts, setVideoCounts] = useState({});\r\n\r\n  useEffect(() => {\r\n    const getSeries = async () => {\r\n      // ð¹ Establecer el estado de carga en true antes de la peticiÃ³n\r\n      setAppState({ loading: true });\r\n  \r\n      try {\r\n        const res = await SerieServer.ListSeries();\r\n        setSeries(res); \r\n      } catch (error) {\r\n        console.error(\"Error cargando series:\", error);\r\n      }\r\n  \r\n      // ð¹ Una vez que termina la carga, establecemos loading en false\r\n    };\r\n  \r\n    getSeries();\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    const getTemporadas = async () => {\r\n      const res = await TemporadaServer.ListTemporadas();\r\n      const temporadas = res;\r\n      setTemporadas(temporadas);\r\n    };\r\n    getTemporadas();\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    const fetchVideoCounts = async () => {\r\n      const counts = {};\r\n      for (const serie of series) {\r\n        counts[serie.id] = await getTotalVideosSerie(serie.id);\r\n      }\r\n      setVideoCounts(counts);\r\n    };\r\n\r\n    if (series.length > 0) {\r\n      fetchVideoCounts();\r\n\r\n    }\r\n  }, [series]);\r\n\r\n  const getHistorialUsers = async () => {\r\n    try {\r\n      const res = await HistorialUserServer.ListHistorial();\r\n      setHistUsers(res);\r\n      setAppState({ loading: false });\r\n\r\n    } catch (error) {\r\n      console.log(error);\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    \r\n    getHistorialUsers();\r\n  }, []);\r\n\r\n  /**\r\n   * FunciÃ³n para redireccionar al reproductor del video seleccionado, se crea un nuevo historial de usuario si es la primera vez en ver el video, de lo contrario se envÃ­a este historial como state\r\n   * @param {*} id\r\n   */\r\n/*   const entrarVideo = async (id) => {\r\n    const formData = new FormData();\r\n    let histUser;\r\n    let contador = 0;\r\n    formData.append(\"usuario\", user.id);\r\n    formData.append(\"video\", id);\r\n    try {\r\n      for (let index = 0; index < histUsers.length; index++) {\r\n        const element = histUsers[index];\r\n        if (element.usuario.id === user.id && element.video === id) {\r\n          histUser = element;\r\n          contador++;\r\n        }\r\n      }\r\n      if (contador === 0) {\r\n        const hu = await HistorialUserServer.RegisterHistorialUser(formData);\r\n        histUser = hu.data;\r\n      }\r\n    } catch (error) {\r\n      console.log(error);\r\n    }\r\n    history(`/seeVideo/${id}`, { state: histUser });\r\n  }; */\r\n\r\n  const entrarTemporada = (temporadaId) => {\r\n    if (!histUsers) {\r\n      console.warn(\"Historial de usuarios aÃºn no ha cargado\");\r\n      return;\r\n    }\r\n    history(`/seeTemporada/${temporadaId}`, { state: histUsers });\r\n  };\r\n  \r\n  \r\n  const entrarSerie = (serieId) => {\r\n    if (!histUsers) {\r\n      console.warn(\"Historial de usuarios aÃºn no ha cargado\");\r\n      return;\r\n    }\r\n    history(`/seeSerie/${serieId}`, { state: histUsers });\r\n    setIdSerie(serieId);\r\n\r\n\r\n  };\r\n \r\n  const getTotalVideosSerie = async (idSerie) => {\r\n    const res = await VideoServer.ListVideos();\r\n   // console.log(res);\r\n    const videos = res.videos.filter(video => video.tipe_of_video == 2 && video.serie == idSerie && video.state == 1);\r\n    //console.log(videos);\r\n    return videos.length;\r\n  };\r\n\r\n  return (\r\n    <div className=\"d-flex justify-content-center\">\r\n      <div style={{ maxWidth: \"1450px\", minWidth: \"50%\", padding: \"20px\" }}>\r\n        {appState.loading ? (<VideoLoading isLoading={appState.loading} series={series} />) : (\r\n          <>\r\n          <div className=\"d-flex justify-content-end\">\r\n              <button onClick={() => window.history.back()} className=\"btn btn-light mt-4\" value=\"Volver\">Volver</button>\r\n            </div>\r\n            <h2 className=\"px-2 mb-3\">Listado de Series</h2>\r\n            <div className=\"d-flex flex-wrap\">\r\n              {histUsers &&\r\n              series.map((serie, index) => {\r\n                return (\r\n                  <div className=\"border rounded cursorPointer card-width p-2 m-3\" key={index}>\r\n                    <div onClick={() => { entrarSerie(serie.id) }}>\r\n                      {videoCounts[serie.id] > 0 &&\r\n                      <div className=\"d-flex justify-content-end mb-1\"><small> {videoCounts[serie.id] || ''} Videos</small></div>\r\n                      }\r\n                      <LazyLoadImage effect=\"blur\" src={'https://sccotview.com' + serie.featured_image} className=\"rounded mb-2\" alt=\"\" />\r\n                      <h5 className=\"text-capitalize truncate-text\">{serie.serie}</h5>\r\n                      <small className=\"truncate-text mb-0\">{serie.description}</small>\r\n                    </div>\r\n                    <div>\r\n                      {temporadas.map((temporada, index) => {\r\n                        if (serie.id === temporada.serie) {\r\n                          return (\r\n                            <div key={index}>\r\n                              {/* AquÃ­ puedes agregar mÃ¡s contenido de la temporada si es necesario */}\r\n                            </div>\r\n                          );\r\n                        }\r\n                        return null;\r\n                      })}\r\n                    </div>\r\n                  </div>\r\n                );\r\n              })\r\n              }\r\n            </div>\r\n          </>\r\n        )}\r\n        \r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default AppSeries;\r\n","import axiosInstance from \"../axios\";\r\n\r\nconst API_URL = \"https://sccotview.com/api/series/\";\r\n\r\n/**\r\n * FunciÃ³n para consultar todas las series registradas en la base de datos.\r\n * @returns Data enviada desde el backend\r\n */\r\nexport const ListSeries = async () => {\r\n  const response = await axiosInstance.get(API_URL);\r\n  if (response.status === 200) {\r\n    return await response.data;\r\n  }\r\n};\r\n\r\nexport const RegisterSerie = async (newSerie) => {\r\n  const response = await axiosInstance.post(API_URL, newSerie);\r\n  if (response.status === 200) {\r\n    return await response.data;\r\n  }\r\n};\r\n\r\nexport const getSerie = async (serieID) => {\r\n  const response = await axiosInstance.get(`${API_URL}${serieID}`);\r\n  if (response.status === 200) {\r\n    return await response.data;\r\n  }\r\n};\r\n\r\n\r\nexport const updateSerie = async(id,updSerie) =>{\r\n  const response = await axiosInstance.patch(API_URL+id+\"/\",updSerie);\r\n  if (response.status === 200) {\r\n      return response.data;\r\n  }\r\n}","import axiosInstance from \"../axios\";\r\n\r\nconst API_URL = \"https://sccotview.com/api/temporadas/\";\r\n\r\n/**\r\n * FunciÃ³n para consultar todas las temporadas registradas en la base de datos.\r\n * @returns Data enviada desde el backend\r\n */\r\nexport const ListTemporadas = async () => {\r\n  const response = await axiosInstance.get(API_URL);\r\n  if (response.status === 200) {\r\n    return await response.data;\r\n  }\r\n};\r\n\r\nexport const RegisterTemporada = async (newTemporada) => {\r\n  const response = await axiosInstance.post(API_URL, newTemporada);\r\n  if (response.status === 200) {\r\n    return await response.data;\r\n  }\r\n};\r\n\r\nexport const getTemporada = async (temporadaID) => {\r\n  const response = await axiosInstance.get(`${API_URL}${temporadaID}`);\r\n  if (response.status === 200) {\r\n    return await response.data;\r\n  }\r\n};\r\n\r\nexport const updateTemporada = async(id,updTemporada) =>{\r\n  const response = await axiosInstance.patch(API_URL+id+\"/\",updTemporada);\r\n  if (response.status === 200) {\r\n      return response.data;\r\n  }\r\n}"],"names":["useStyles","makeStyles","theme","root","margin","display","videos","categories","props","history","useNavigate","useState","histUsers","setHistUsers","prefUsers","setPrefUsers","categoriasTotales","setCategoriasTotales","user","useContext","Context","getHistorialUsers","HistorialUserServer","id","res","console","log","getPreferenciasUser","PreferenciasUserServer","useEffect","array","array1","array2","i","length","push","categoria","igual","j","verVideo","formData","FormData","contador","append","index","element","usuario","video","histUser","hu","data","state","classes","className","search","slice","map","style","minHeight","listVideos","search2","series","contenedorCarousel","document","getElementById","query","setQuery","setCategories","searchParam","searchParam2","filterParam","setFilterParam","localStorage","getItem","JSON","parse","listCategorias","ListCategorias","visibility","height","queryLowerCase","toLowerCase","filter","dato","titleMatches","title_espanol","toString","indexOf","categorias","some","includes","item","parameter","is_superuser","fontSize","VideoLoading","VideoLoadingComponent","SeriesList","setSeries","setIdSerie","temporadas","setTemporadas","loading","appState","setAppState","videoCounts","setVideoCounts","getSeries","SerieServer","error","getTemporadas","TemporadaServer","fetchVideoCounts","counts","serie","getTotalVideosSerie","idSerie","VideoServer","tipe_of_video","maxWidth","minWidth","padding","isLoading","onClick","window","back","value","serieId","warn","LazyLoadImage","effect","src","featured_image","alt","description","temporada","API_URL","ListSeries","axiosInstance","response","status","RegisterSerie","newSerie","getSerie","serieID","updateSerie","updSerie","ListTemporadas","RegisterTemporada","newTemporada","getTemporada","temporadaID","updateTemporada","updTemporada"],"sourceRoot":""}