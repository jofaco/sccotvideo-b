"use strict";(self.webpackChunkvideoteca_frontend=self.webpackChunkvideoteca_frontend||[]).push([[290],{5509:function(e,n,r){r.r(n);var t=r(3433),s=r(1413),i=r(4165),a=r(5861),c=r(9439),o=r(2791),l=r(7689),d=r(1652),u=r(6542),x=r(6639),p=r(2516),h=r(748),m=r(9929),f=r(733),j=r(2918),v=r(1614),Z=r(890),b=r(4554),g=r(3767),N=r(6151),w=r(151),y=r(8596),_=r(1444),k=(r(5258),r(8953)),S=r(1241),C=r(6292),V=r(1830),E=r.n(V),B=r(6627),I=r.n(B),A=r(184),D=(0,y.Z)((function(e){return{paper:{marginTop:e.spacing(0),display:"flex",flexDirection:"column",alignItems:"center"}}}));n.default=function(){var e=(0,l.s0)(),n=(0,j.d)(!1),r=(0,c.Z)(n,3),y=r[0],V=r[1],B=r[2],O=(0,j.d)(!1),T=(0,c.Z)(O,3),z=T[0],J=T[1],U=T[2],F=(0,o.useState)(),R=(0,c.Z)(F,2),q=R[0],H=R[1],K=(0,l.TH)(),L=(0,l.UO)().id,P=(0,o.useState)([]),Y=(0,c.Z)(P,2),$=Y[0],G=Y[1],M=(0,o.useState)([]),Q=(0,c.Z)(M,2),W=Q[0],X=Q[1],ee=(0,o.useState)([]),ne=(0,c.Z)(ee,2),re=ne[0],te=ne[1],se=(0,o.useState)([]),ie=(0,c.Z)(se,2),ae=(ie[0],ie[1]),ce=(0,o.useState)([]),oe=(0,c.Z)(ce,2),le=(oe[0],oe[1]),de=(0,o.useState)(!0),ue=(0,c.Z)(de,2),xe=ue[0],pe=ue[1],he=(0,o.useState)([]),me=(0,c.Z)(he,2),fe=me[0],je=me[1],ve=(0,o.useState)(null),Ze=(0,c.Z)(ve,2),be=(Ze[0],Ze[1]),ge=(0,o.useState)(K.state),Ne=(0,c.Z)(ge,2),we=Ne[0],ye=Ne[1],_e=(0,o.useState)([]),ke=(0,c.Z)(_e,2),Se=ke[0],Ce=ke[1],Ve=(0,o.useState)(-1),Ee=(0,c.Z)(Ve,2),Be=Ee[0],Ie=Ee[1],Ae=localStorage.getItem("user"),De=JSON.parse(Ae),Oe=(0,o.useState)({loading:!0}),Te=(0,c.Z)(Oe,2),ze=Te[0],Je=Te[1],Ue=(0,p.Z)($),Fe=function(e){var n=e.split(":"),r="";return n&&("00"!==n[0]&&(r=n[0]+"h"),"00"!==n[1]&&(r=" "+r+" "+n[1]+"min")),r.trim()},Re=function(){var n=(0,a.Z)((0,i.Z)().mark((function n(r){return(0,i.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:E().fire({title:"\xbfSeguro quieres eliminar este video?",text:"No podras recuperar la informaci\xf3n",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Eliminar video"}).then(function(){var n=(0,a.Z)((0,i.Z)().mark((function n(t){return(0,i.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!t.isConfirmed){n.next=5;break}return n.next=3,d.gY(r);case 3:e("/"),E().fire({title:"Video eliminado con exito",text:"",icon:"success"});case 5:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}());case 1:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}(),qe=function(){var e=(0,a.Z)((0,i.Z)().mark((function e(n,r){var t,s;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u.dS(n);case 2:return t=e.sent,X(t),e.next=6,x.op(r);case 6:s=e.sent,te(s);case 8:case"end":return e.stop()}}),e)})));return function(n,r){return e.apply(this,arguments)}}(),He=function(){var n=(0,a.Z)((0,i.Z)().mark((function n(){var r;return(0,i.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,m.K7();case 3:(r=n.sent)&&De.id?(Ie(r.user_score-1),H(r),pe(!1),void 0!==r.user_score&&Ie(r.user_score-1)):e("/loginuser"),n.next=9;break;case 7:n.prev=7,n.t0=n.catch(0);case 9:case"end":return n.stop()}}),n,null,[[0,7]])})));return function(){return n.apply(this,arguments)}}();(0,o.useEffect)((function(){He();var e=function(){var e=(0,a.Z)((0,i.Z)().mark((function e(n){var r,t;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d.om(n);case 2:r=e.sent,t=r,be(new Date(r.upload_date).toDateString()),je(Fe(r.duration)),G((0,s.Z)((0,s.Z)({},t),{},{duration:fe})),Je({loading:!1});case 8:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}();e(L);var n=function(){var e=(0,a.Z)((0,i.Z)().mark((function e(n){var r;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f.t$({video_id:n});case 2:r=e.sent,Ce(r);case 4:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}();n(L),qe($.serie,$.temporada)}),[fe,L,G,$.title_espanol,$.url_esp,$.url_vimeo_esp,$.serie_id]);var Ke=function(){var e=(0,a.Z)((0,i.Z)().mark((function e(n){var r,t,a,c;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Ie(n),r=$.cumulative_score,t=$.numberOfVotes,!we.user_score){e.next=11;break}return r=r-we.user_score+n+1,a=r/t,ye((0,s.Z)((0,s.Z)({},we),{},{user_score:n+1})),e.next=9,d.Jp($.id,{cumulative_score:r,score:a});case 9:e.next=17;break;case 11:return c=(r=r+n+1)/(t+=1),ye((0,s.Z)((0,s.Z)({},we),{},{user_score:n+1})),e.next=17,d.Jp($.id,{cumulative_score:r,numberOfVotes:t,score:c});case 17:return e.next=19,m.o0(we.id,{user_score:n+1});case 19:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),Le=D();if(!xe)return(0,A.jsxs)(v.Z,{children:[ze.loading?(0,A.jsx)(Ue,{isLoading:ze.loading,video:$}):"",(0,A.jsx)("div",{children:(0,A.jsx)("div",{className:"d-flex justify-content-end",children:(0,A.jsx)("button",{onClick:function(){return window.history.back()},className:"btn btn-light mt-4 my-2",value:"Volver",children:"Volver"})})}),(0,A.jsx)("div",{className:Le.paper,children:(0,A.jsx)("h3",{children:$.title_espanol})}),(0,A.jsx)("br",{}),(0,A.jsxs)("div",{className:"row",children:[(0,A.jsx)("div",{className:"col-8 iframe1 mx-auto",children:(0,A.jsx)(C.Z,{video:$})}),(0,A.jsxs)("div",{className:"col infoVideo",children:[(0,A.jsxs)("div",{className:"d-flex justify-content-between",children:[(0,A.jsx)(Z.Z,{component:"h5",variant:"h6",style:{color:"white",borderBottom:"3px solid white",paddingBottom:"5px"},align:"center",children:$.duration}),(0,A.jsx)("div",{className:"d-flex justify-content-end text-capitalize  ",children:(0,A.jsx)(b.Z,{sx:{"& > legend":{mt:2}},className:Le.containerRating,children:(0,A.jsx)("div",{className:"bg-secondary d-inline pt-2 px-1 rounded-2",children:(0,A.jsx)(h.Z,{name:"read-only",value:parseFloat($.score),precision:.5,readOnly:!0})})})})]}),(0,A.jsx)("br",{}),De.is_superuser&&(0,A.jsxs)("div",{className:"d-flex justify-content-between mb-2",children:[(0,A.jsx)("button",{onClick:function(){return e("/updateVideo/".concat($.id))},className:"btn  btn-outline-primary form-control mx-1",children:"Actualizar"}),(0,A.jsx)("button",{onClick:function(){return $.id&&Re($.id)},className:" btn  btn-outline-danger form-control mx-1",children:"Eliminar"})]}),(0,A.jsxs)("div",{className:"d-flex justify-content-center flex-column align-items-center",children:[(0,A.jsxs)(Z.Z,{component:"h5",variant:"h6",children:["Ay\xfadanos a calificar   \xa0",(0,A.jsx)(b.Z,{sx:{display:"inline-flex",position:"relative",cursor:"pointer",textAlign:"left"},children:(0,t.Z)(new Array(5)).map((function(e,n){return(0,A.jsxs)(b.Z,{position:"relative",sx:{cursor:"pointer"},onClick:function(e){return Ke(n)},children:[(0,A.jsx)(b.Z,{sx:{width:n<=Be?"100%":"0%",overflow:"hidden",position:"absolute"},children:(0,A.jsx)(w.Z,{})}),(0,A.jsx)(b.Z,{children:(0,A.jsx)(_.Z,{})})]},n)}))})]}),(0,A.jsx)("br",{}),(0,A.jsxs)("div",{className:"d-flex ",children:[(0,A.jsx)(g.Z,{alignItems:"center",className:"p-2",children:(0,A.jsx)(N.Z,{variant:"contained",color:"success",type:"submit",onClick:V,children:"Realizar comentario"})}),Se?(0,A.jsx)(g.Z,{alignItems:"center",className:"p-2",children:(0,A.jsx)(N.Z,{variant:"contained",color:"primary",type:"submit",onClick:J,children:"Ver otros comentarios"})}):null]}),(0,A.jsx)("div",{className:"mt-3",children:(0,A.jsx)("div",{className:"table-responsive ",children:(0,A.jsx)("table",{className:"table  text-light ",children:(0,A.jsxs)("thead",{children:[(0,A.jsxs)("tr",{className:"",children:[(0,A.jsx)("td",{scope:"",children:"Autores"}),(0,A.jsx)("td",{children:$.autor&&$.autor.map((function(e){return(0,A.jsx)("li",{children:(0,A.jsx)("small",{className:"",children:I()(e.autor)})},e.id)}))})]}),2===$.tipe_of_video&&(0,A.jsxs)(A.Fragment,{children:[(0,A.jsxs)("tr",{children:[(0,A.jsx)("th",{scope:"col",children:"Serie"}),(0,A.jsx)("th",{scope:"col",children:(0,A.jsx)("a",{className:"text-primary",style:{cursor:"pointer"},onClick:function(){return n=W.id,e("/seeSerie/".concat(n),{state:q}),void ae(n);var n},children:W.serie})})]}),(0,A.jsxs)("tr",{children:[(0,A.jsx)("th",{scope:"col",children:"Temporada"}),(0,A.jsx)("th",{scope:"col",children:(0,A.jsx)("a",{className:"text-primary",style:{cursor:"pointer"},onClick:function(){return n=re.id,e("/seeTemporada/".concat(n),{state:q}),void le(n);var n},children:re.temporada})})]})]})]})})})})]})]}),(0,A.jsx)("div",{children:(0,A.jsx)("p",{className:"mt-4",children:$.description_esp})}),(0,A.jsx)("br",{}),(0,A.jsx)("div",{className:"table-responsive ",children:(0,A.jsxs)("table",{className:"table  text-light ",children:[(0,A.jsx)("thead",{children:(0,A.jsxs)("tr",{children:[(0,A.jsx)("th",{scope:"col",children:"Categor\xedas"}),(0,A.jsx)("th",{scope:"col",children:"Especialidades"}),(0,A.jsx)("th",{scope:"col",children:"Subespecialidades"}),(0,A.jsx)("th",{scope:"col",children:"Palabras claves"})]})}),(0,A.jsx)("tbody",{children:(0,A.jsxs)("tr",{children:[(0,A.jsx)("td",{children:$.categorias&&$.categorias.map((function(e){return(0,A.jsx)("li",{children:(0,A.jsx)("small",{className:"",children:e.categoria})},e.id)}))}),(0,A.jsx)("td",{children:$.especialidad&&$.especialidad.map((function(e){return(0,A.jsx)("li",{children:(0,A.jsx)("small",{className:"",children:e.especialidad})},e.id)}))}),(0,A.jsx)("td",{children:$.subEspecialidad&&$.subEspecialidad.map((function(e){return(0,A.jsx)("li",{children:(0,A.jsx)("small",{className:"",children:e.subEspecialidad})},e.id)}))}),(0,A.jsx)("td",{children:$.palabraClave&&$.palabraClave.map((function(e){return(0,A.jsx)("li",{children:(0,A.jsx)("small",{className:"",children:e.palabraClave})},e.id)}))})]})})]})})]}),(0,A.jsx)(k.Z,{handleClose:B,show:y,histUser:we,videoID:L}),(0,A.jsx)(S.Z,{handleClose:U,show:z,histUser:we,commentaries:Se,videoID:L})]})}}}]);
//# sourceMappingURL=290.da7da90a.chunk.js.map