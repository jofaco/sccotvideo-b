"use strict";(self.webpackChunkvideoteca_frontend=self.webpackChunkvideoteca_frontend||[]).push([[779],{7881:function(e,t,r){r.r(t),r.d(t,{default:function(){return O}});var n=r(4165),s=r(5861),a=r(9439),i=r(2791),o=(r(8040),r(1174),r(5987)),c=r(7689),u=r(8596),l=r(8374),d=r(4554),h=r(748),f=r(1652),p=(r(5258),r(2592)),x=r(6627),v=r.n(x),m=r(184),g=["video"],j=(0,u.Z)((function(e){return{paper:{marginTop:e.spacing(2),marginBottom:e.spacing(3),display:"flex",flexDirection:"column",alignItems:"center",color:"white"},imagenCarousel:{cursor:"pointer",minWidth:"100%",objectFit:"contain",maxHeight:"85vh",objectPosition:"top"},carouselText:{position:"absolute",bottom:0,left:0,width:"100%",background:"linear-gradient(to bottom, transparent 20%, rgba(24, 26, 54, 0.95) 90%)",padding:"300px 20px 20px"},textTitle:{fontSize:"25px"},"@media (max-width: 500px)":{imagenCarousel:{minWidth:"100%",objectFit:"cover",maxHeight:"100vh",objectPosition:"top"},carouselText:{padding:"120px 20px 10px",bottom:"-24px",zIndex:"10"},textTitle:{fontSize:"18px"},containerRating:{display:"none"}}}})),Z=function(e){var t=e.video,r=(0,o.Z)(e,g),n=((0,c.s0)(),j());return(0,m.jsx)("div",{id:"contenedorItemVideo",className:"cursorPointer contenedorItemVideo",children:(0,m.jsxs)("div",{className:""+n.row,onClick:function(){return r.verVideo(t.id)},children:[(0,m.jsx)("div",{className:" "+n.imagen,children:(0,m.jsx)(p.Z,{src:"https://sccotview.com"+t.featured_image,className:n.imagenCarousel+" "})}),(0,m.jsx)("div",{className:" col-12",children:(0,m.jsxs)("div",{className:n.carouselText,children:[(0,m.jsx)("div",{className:"d-flex justify-content-end text-capitalize  ",children:(0,m.jsx)(d.Z,{sx:{"& > legend":{mt:2}},className:n.containerRating,children:(0,m.jsx)("div",{className:"bg-secondary d-inline pt-2 px-1 rounded-2",children:(0,m.jsx)(h.Z,{name:"read-only",value:parseFloat(t.score),precision:.5,readOnly:!0})})})}),(0,m.jsx)("h3",{className:"".concat(n.textTitle," text-light text-capitalize text-start border-bottom border-white pb-2"),children:t.title_espanol}),t.autor.length>0&&(0,m.jsxs)("ul",{className:"d-flex flex-wrap justify-content-start p-0 text-light",children:[(0,m.jsxs)("div",{className:"d-flex justify-content-between w-100 mb-2",children:[(0,m.jsxs)("div",{children:[(0,m.jsxs)("span",{className:"text-capitalize small",children:[t.autor.length>1?"Autores":"Autor"," \u2192"]}),t.autor.slice(0,2).map((function(e,t,r){return(0,m.jsx)("p",{className:"px-1 rounded-4 m-0 d-inline",children:(0,m.jsxs)("small",{className:"text-capitalize ",style:{fontSize:"0.85rem"},children:[v()(e.autor),t<r.length-1?",":""]})},e.id)}))]}),(0,m.jsx)("p",{className:"mx-1",style:{fontSize:"0.95rem"},children:function(e){var t=e.split(":"),r="";return t&&("00"!==t[0]&&(r=t[0]+"h"),"00"!==t[1]&&(r=" "+r+" "+t[1]+"min")),r.trim()}(t.duration)})]}),t.autor.length>2&&(0,m.jsx)("span",{className:"px-2 small",style:{fontSize:"0.85rem"},children:"..."})]})]})})]})})},b=r(1756),w=r(9929),y=r(8733),N=r(2680),k=r(8434),C=["videos","categories","search","search2"],S=(0,u.Z)((function(e){return{root:{},"@media (max-width: 1248px)":{root:{display:"flex"}}}}));var _=function(e){var t=e.videos,r=e.categories,u=e.search,d=e.search2,h=((0,o.Z)(e,C),(0,c.s0)()),f=(0,i.useState)(),p=(0,a.Z)(f,2),x=p[0],v=p[1],g=(0,i.useState)(null),j=(0,a.Z)(g,2),_=j[0],L=j[1],V=(0,i.useState)(null),E=(0,a.Z)(V,2),z=E[0],U=E[1],F=(0,i.useContext)(N.Z).user,I=function(){var e=(0,s.Z)((0,n.Z)().mark((function e(){var t;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,w.UH({user_id:F.id});case 3:t=e.sent,v(t),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}(),P=function(){var e=(0,s.Z)((0,n.Z)().mark((function e(){var t;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,y.kt({user_id:F.id});case 3:t=e.sent,L(t),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}();(0,i.useEffect)((function(){I(),P()}),[]),(0,i.useEffect)((function(){if(_&&r){for(var e=[],t=[],n=[],s=0;s<_.length;s++)t.push(_[s].categoria);for(var a=0;a<r.length;a++)n.push(r[a]);for(var i=0;i<n.length;i++){for(var o=!1,c=0;c<t.length&!o;c++)n[i].categoria===t[c]&&(o=!0);e=_,o||e.push(n[i])}U(e||null)}}),[r,_]);var T=function(){var e=(0,s.Z)((0,n.Z)().mark((function e(t){var r,s,a,i,o,c;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(r=new FormData,a=0,r.append("usuario",F.id),r.append("video",t),e.prev=4,i=0;i<x.length;i++)(o=x[i]).usuario.id===F.id&&o.video===t&&(s=o,a++);if(0!==a){e.next=11;break}return e.next=9,w.LK(r);case 9:c=e.sent,s=c.data;case 11:e.next=16;break;case 13:e.prev=13,e.t0=e.catch(4),console.log(e.t0);case 16:h("/seeVideo/".concat(t),{state:s});case 17:case"end":return e.stop()}}),e,null,[[4,13]])})));return function(t){return e.apply(this,arguments)}}(),O=S();return t.length>0?(0,m.jsxs)("div",{className:"",children:[(0,m.jsx)("div",{id:"carousel_videos",children:(0,m.jsx)(l.Z,{className:O.root,id:"carousel",fade:!0,children:t&&u(t).slice(0,6).map((function(e,t){return(0,m.jsx)(l.Z.Item,{children:(0,m.jsx)(Z,{video:e,histUsers:x,user:F,verVideo:T},t)},t)}))})}),(0,m.jsx)("br",{}),(0,m.jsx)("br",{}),(0,m.jsx)("br",{}),(0,m.jsx)("div",{id:"card_videos",className:"",children:_?(0,m.jsx)("div",{children:z&&d(z).map((function(e,r){return(0,m.jsxs)(m.Fragment,{children:[console.log(d(z).length),d(z).length<=1?(0,m.jsx)(k.Z,{categoria:e,videos:t,search:u,histUsers:x,user:F,verVideo:T},r):(0,m.jsx)(b.Z,{categoria:e,videos:t,search:u,histUsers:x,user:F,verVideo:T},r)]})}))}):r&&d(r).map((function(e,r){return(0,m.jsx)(k.Z,{categoria:e,videos:t,search:u,histUsers:x,user:F,verVideo:T},r)}))})]}):(0,m.jsx)("div",{id:"card_videos m-5 text-center",children:(0,m.jsx)("h2",{style:{color:"white"},children:(0,m.jsx)("center",{children:"No hay videos disponibles"})})})},L=r(3927),V=r(5764),E=r(9278),z=r(9378),U=["videos","categories"],F=(0,u.Z)((function(e){return{root:{margin:"auto"},"@media (max-width: 1248px)":{root:{display:"flex"}},"@media (max-width: 768px)":{root:{}}}}));var I=function(e){var t=e.videos,r=e.categories,u=(0,o.Z)(e,U),d=(0,c.s0)(),h=(0,i.useState)(null),f=(0,a.Z)(h,2),p=f[0],x=f[1],v=(0,i.useState)(null),g=(0,a.Z)(v,2),j=g[0],Z=g[1],C=(0,i.useState)(null),S=(0,a.Z)(C,2),_=S[0],L=S[1],V=(0,i.useContext)(N.Z).user,E=function(){var e=(0,s.Z)((0,n.Z)().mark((function e(){var t;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(V){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,e.next=5,w.UH({user_id:V.id});case 5:t=e.sent,x(t),console.log(t),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(2),console.log(e.t0);case 13:case"end":return e.stop()}}),e,null,[[2,10]])})));return function(){return e.apply(this,arguments)}}(),I=function(){var e=(0,s.Z)((0,n.Z)().mark((function e(){var t;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(V){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,e.next=5,y.kt({user_id:V.id});case 5:t=e.sent,Z(t),console.log(t),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(2),console.log(e.t0);case 13:case"end":return e.stop()}}),e,null,[[2,10]])})));return function(){return e.apply(this,arguments)}}();(0,i.useEffect)((function(){V&&(E(),I())}),[]),(0,i.useEffect)((function(){if(j&&r){for(var e=[],t=[],n=[],s=0;s<j.length;s++)t.push(j[s].categoria);for(var a=0;a<r.length;a++)n.push(r[a]);for(var i=0;i<n.length;i++){for(var o=!1,c=0;c<t.length&!o;c++)n[i].categoria===t[c]&&(o=!0);e=j,o||e.push(n[i])}L(e||null)}}),[r,j]);var P=function(){var e=(0,s.Z)((0,n.Z)().mark((function e(t){var r,s,a,i,o,c;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(r=new FormData,a=0,r.append("usuario",V.id),r.append("video",t),e.prev=4,i=0;i<p.length;i++)(o=p[i]).usuario.id===V.id&&o.video===t&&(s=o,a++);if(0!==a){e.next=11;break}return e.next=9,w.LK(r);case 9:c=e.sent,s=c.data;case 11:e.next=16;break;case 13:e.prev=13,e.t0=e.catch(4),console.log(e.t0);case 16:d("/seeVideo/".concat(t),{state:s});case 17:case"end":return e.stop()}}),e,null,[[4,13]])})));return function(t){return e.apply(this,arguments)}}();console.log(_);var T=F();return(0,m.jsxs)("div",{children:[(0,m.jsx)("div",{id:"carousel_videos",className:" ",children:(0,m.jsx)(l.Z,{className:T.root,id:"carousel",children:t&&u.search(t).slice(0,6).map((function(e,t){return(0,m.jsx)(l.Z.Item,{style:{minHeight:"400px"},children:(0,m.jsx)(z.Z,{video:e,listVideos:u.listVideos,histUsers:p,user:V,verVideo:P},e.id)},t)}))})}),(0,m.jsx)("br",{}),(0,m.jsx)("br",{}),(0,m.jsx)("div",{id:"card_videos",className:"mt-5",children:t&&j?(0,m.jsx)("div",{className:"",children:_&&u.search2(_).map((function(e,r){return(0,m.jsx)(m.Fragment,{children:u.search2(_).length<=1?(0,m.jsx)(k.Z,{categoria:e,videos:t,search:u.search,histUsers:p,user:V,verVideo:P},r):(0,m.jsx)(b.Z,{categoria:e,videos:t,search:u.search,histUsers:p,user:V,verVideo:P},r)})}))}):u.search2(r).map((function(e,n){return(0,m.jsx)("div",{children:u.search2(r).length<=1?(0,m.jsx)(k.Z,{categoria:e,videos:t,search:u.search,histUsers:p,user:V,verVideo:P},n):(0,m.jsx)(b.Z,{categoria:e,videos:t,search:u.search,histUsers:p,user:V,verVideo:P},n)},n)}))})]})},P=function(e){var t=e.videos,r=document.getElementById("carousel"),o=(0,i.useState)(""),c=(0,a.Z)(o,2),u=c[0],l=c[1],d=(0,i.useState)([]),h=(0,a.Z)(d,2),f=h[0],p=h[1],x=(0,i.useState)(["title_espanol","description_esp"]),v=(0,a.Z)(x,1)[0],g=(0,i.useState)(["categoria"]),j=(0,a.Z)(g,1)[0],Z=(0,i.useContext)(N.Z).user,b=(0,i.useState)(t),w=(0,a.Z)(b,2),y=w[0],k=w[1],C=(0,i.useState)("All"),S=(0,a.Z)(C,2),z=S[0],U=S[1];(0,i.useEffect)((function(){console.log(t);var e=function(){var e=(0,s.Z)((0,n.Z)().mark((function e(){var t;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,(0,V.wb)();case 3:t=e.sent,p(t),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log("Error");case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}();e()}),[]);var F=function(e){return e.normalize("NFD").replace(/[\u0300-\u036f]/g,"")},P=function(e){if(u){if(u){var t=F(u.toLowerCase()),r=e.filter((function(e){var r=F(e.title_espanol).toString().toLowerCase().indexOf(t)>-1,n=F(e.description_esp).toString().toLowerCase().indexOf(t)>-1,s=e.categorias.some((function(e){return F(e.categoria.toLowerCase()).includes(t)})),a=e.especialidad.some((function(e){return F(e.especialidad.toLowerCase()).includes(t)})),i=e.subEspecialidad.some((function(e){return F(e.subEspecialidad.toLowerCase()).includes(t)})),o=e.palabraClave.some((function(e){return F(e.palabraClave.toLowerCase()).includes(t)})),c=e.autor.some((function(e){return F(e.autor.toLowerCase()).includes(t)}));return r||n||s||a||o||c||i}));return console.log(r),r}return e.filter((function(e){return F(e.categorias.categoria.toString()).toLowerCase().indexOf(F(u.toLowerCase()))>-1}))}return e},T=function(e){return e.filter((function(e){if(r){if(e.categoria===z)return r.style.visibility="hidden",r.style.height="10px",j.some((function(t){return F(e[t]).toString().toLowerCase().indexOf(F(u.toLowerCase()))>-1}));if("All"===z)return r.style.visibility="visible",r.style.height="100%",t.filter((function(e){return v.some((function(t){return F(e[t]).toString().toLowerCase().indexOf(F(u.toLowerCase()))>-1}))}))}else console.log("tuvimos problemas para cargar el carousel por favor recargar")}))};return(0,i.useEffect)((function(){var e=P(t);k(e)}),[u,t]),Z&&Z.is_superuser?(0,m.jsxs)("div",{children:[(0,m.jsx)(E.Z,{query:u,setQuery:l,filterParam:z,setFilterParam:U,categories:f}),y.length>0?(0,m.jsx)(_,{videos:y,categories:f,search:P,search2:T}):(0,m.jsx)("h1",{className:"m-5 text-center",children:"No se encontraron videos"})]}):(0,m.jsxs)("div",{children:[(0,m.jsx)(E.Z,{query:u,setQuery:l,filterParam:z,setFilterParam:U,categories:f}),(0,m.jsx)(L.S,{children:y.length>0?(0,m.jsx)(I,{videos:y,categories:f,search:P,search2:T}):(0,m.jsx)("h1",{className:"m-5 text-center",children:"No se encontraron videos"})})]})},T=r(2516),O=function(){var e=(0,i.useContext)(N.Z).user,t=(0,T.Z)(P),r=(0,i.useState)({loading:!0,videos:[]}),o=(0,a.Z)(r,2),c=o[0],u=o[1];return(0,i.useEffect)((function(){var t=function(){var t=(0,s.Z)((0,n.Z)().mark((function t(){var r,s;return(0,n.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,!e){t.next=7;break}return t.next=4,f.Zs();case 4:t.t0=t.sent,t.next=10;break;case 7:return t.next=9,f.My();case 9:t.t0=t.sent;case 10:r=t.t0,s=r,console.log(s),u({loading:!1,videos:s.videos}),t.next=20;break;case 16:t.prev=16,t.t1=t.catch(0),console.error("Error cargando videos",t.t1),u({loading:!1,videos:[]});case 20:case"end":return t.stop()}}),t,null,[[0,16]])})));return function(){return t.apply(this,arguments)}}();t()}),[e]),(0,m.jsx)("div",{className:"App",children:(0,m.jsx)(t,{isLoading:c.loading,videos:c.videos})})}}}]);
//# sourceMappingURL=779.0f2dfd7d.chunk.js.map