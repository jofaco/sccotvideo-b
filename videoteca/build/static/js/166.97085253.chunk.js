"use strict";(self.webpackChunkvideoteca_frontend=self.webpackChunkvideoteca_frontend||[]).push([[166],{7411:function(e,n,t){var r=t(4165),o=t(5861),s=t(3263),a=t(9778),i="http://localhost:8000/api/",c=s.Z.create({baseURL:i,timeout:5e3,headers:{Authorization:localStorage.getItem("access_token")?"JWT "+localStorage.getItem("access_token"):null,"Content-Type":"multipart/form-data",accept:"application/json"}});c.interceptors.response.use((function(e){return e}),function(){var e=(0,o.Z)((0,r.Z)().mark((function e(n){var t,o,s,l;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=n.config,"undefined"!==typeof n.response){e.next=4;break}return console.warn("A server/network error occurred. Looks like CORS might be the problem. Sorry about this - we will get it fixed shortly."),e.abrupt("return",Promise.reject(n));case 4:if(401!==n.response.status||t.url!==i+"api/token/refresh/"){e.next=7;break}return window.location.href="/loginuser/",e.abrupt("return",Promise.reject(n));case 7:if("token_not_valid"!==n.response.data.code||401!==n.response.status||"Unauthorized"!==n.response.statusText){e.next=26;break}if(!(o=localStorage.getItem("refresh_token"))){e.next=24;break}if(s=JSON.parse(a.lW.from(o.split(".")[1],"base64").toString()),l=Math.ceil(Date.now()/1e3),console.log(s.exp),!(s.exp>l)){e.next=17;break}return e.abrupt("return",c.post("api/token/refresh/",{refresh:o}).then((function(e){return localStorage.setItem("access_token",e.data.access_token),localStorage.setItem("refresh_token",e.data.refresh_token),c.defaults.headers.Authorization="JWT "+e.data.access_token,t.headers.Authorization="JWT "+e.data.access_token,c(t)})).catch((function(e){console.log(e)})));case 17:console.log("Refresh token is expired",s.exp,l),window.localStorage.removeItem("access_token"),window.localStorage.removeItem("refresh_token"),window.localStorage.removeItem("user"),window.location.href="/loginuser/";case 22:e.next=26;break;case 24:console.log("Refresh token not available."),window.location.href="/loginuser/";case 26:return 401===n.response.status&&(window.location.href="/loginuser/"),e.abrupt("return",Promise.reject(n));case 28:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}()),n.Z=c},5752:function(e,n,t){t.r(n),t.d(n,{default:function(){return D}});var r=t(4165),o=t(5861),s=t(9439),a=t(2791),i=t(1087),c=t(9952),l=t(6488),u=t(6513),f=t(8596),d=t(5628),h=t(184),x=(0,f.Z)((function(e){return{link:{margin:e.spacing(1,1.5),textTransform:"capitalize"}}})),m=function(){var e=(0,d.Z)(),n=e.isLogged,t=e.logout,r=x();return n?(0,h.jsxs)(h.Fragment,{children:[(0,h.jsxs)(u.Z,{href:"#",variant:"outlined",sx:{color:"#ffff"},className:r.link,component:i.OL,to:"/Perfil",children:[(0,h.jsx)(c.Z,{fontSize:"small"}),"\xa0"]}),(0,h.jsx)(u.Z,{href:"#",color:"primary",variant:"outlined",className:r.link,component:i.OL,to:"#",onClick:function(e){e.preventDefault(),t()},children:(0,h.jsxs)("div",{className:"d-flex justify-content-center align-items-center",children:[(0,h.jsx)(l.Z,{fontSize:"small"}),"\xa0"]})})]}):(0,h.jsx)(h.Fragment,{children:(0,h.jsxs)(u.Z,{href:"#",color:"primary",variant:"outlined",className:r.link,component:i.OL,to:"/loginuser",children:[(0,h.jsx)(c.Z,{fontSize:"small"}),"\xa0 INGRESAR"]})})},p=t(6934),g=t(1034);(0,p.ZP)(g.Z)((function(e){var n=e.theme;return{width:62,height:34,padding:7,"& .MuiSwitch-switchBase":{margin:1,padding:0,transform:"translateX(5px)","&.Mui-checked":{color:"#fff",transform:"translateX(5px)","& .MuiSwitch-thumb:before":{backgroundImage:'url(\'data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" height="20" width="20" viewBox="0 0 20 20"><path fill="'.concat(encodeURIComponent("#fff"),'" d="M4.2 2.5l-.7 1.8-1.8.7 1.8.7.7 1.8.6-1.8L6.7 5l-1.9-.7-.6-1.8zm15 8.3a6.7 6.7 0 11-6.6-6.6 5.8 5.8 0 006.6 6.6z"/></svg>\')')},"& + .MuiSwitch-track":{opacity:1,backgroundColor:"dark"===n.palette.mode?"#8796A5":"#aab4be"}}},"& .MuiSwitch-thumb":{backgroundColor:"dark"===n.palette.mode?"#003892":"#001e3c",width:32,height:32,"&:before":{content:"''",position:"absolute",width:"100%",height:"100%",left:0,top:0,backgroundRepeat:"no-repeat",backgroundPosition:"center",backgroundImage:'url(\'data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" height="20" width="20" viewBox="0 0 20 20"><path fill="'.concat(encodeURIComponent("#fff"),'" d="M9.305 1.667V3.75h1.389V1.667h-1.39zm-4.707 1.95l-.982.982L5.09 6.072l.982-.982-1.473-1.473zm10.802 0L13.927 5.09l.982.982 1.473-1.473-.982-.982zM10 5.139a4.872 4.872 0 00-4.862 4.86A4.872 4.872 0 0010 14.862 4.872 4.872 0 0014.86 10 4.872 4.872 0 0010 5.139zm0 1.389A3.462 3.462 0 0113.471 10a3.462 3.462 0 01-3.473 3.472A3.462 3.462 0 016.527 10 3.462 3.462 0 0110 6.528zM1.665 9.305v1.39h2.083v-1.39H1.666zm14.583 0v1.39h2.084v-1.39h-2.084zM5.09 13.928L3.616 15.4l.982.982 1.473-1.473-.982-.982zm9.82 0l-.982.982 1.473 1.473.982-.982-1.473-1.473zM9.305 16.25v2.083h1.389V16.25h-1.39z"/></svg>\')')}},"& .MuiSwitch-track":{opacity:1,backgroundColor:"dark"===n.palette.mode?"#8796A5":"#aab4be",borderRadius:10}}}));function j(){var e=(0,a.useState)("dark"),n=(0,s.Z)(e,2),t=n[0];n[1];return(0,a.useEffect)((function(){document.getElementById("carousel"),document.body.setAttribute("data-theme",t)}),[t]),(0,h.jsx)(h.Fragment,{})}var Z=t(2680),k=t(1413),v=t(6151),w=(0,f.Z)((function(e){return{link:{margin:e.spacing(3,1),color:"black"}}})),b=function(){var e=(0,d.Z)().isLogged,n=(0,a.useContext)(Z.Z).user,t=w(),r=(0,a.useState)(!1),o=(0,s.Z)(r,2),c=(o[0],o[1],(0,a.useState)([])),l=(0,s.Z)(c,2);l[0],l[1];return(0,h.jsxs)(h.Fragment,{children:[e&&n.is_superuser&&(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)("a",{className:t.link,component:i.OL,href:"/",children:(0,h.jsx)(v.Z,{sx:{color:"#fff"},children:"INICIO"})}),(0,h.jsx)("a",{className:t.link,component:i.OL,href:"/Videos",children:(0,h.jsx)(v.Z,{sx:{color:"#fff"},children:"VIDEOS"})}),(0,h.jsx)("a",{className:t.link,component:i.OL,href:"/Series",children:(0,h.jsx)(v.Z,{sx:{color:"#fff"},children:"SERIES"})}),(0,h.jsx)("a",{className:t.link,component:i.OL,href:"/Casos",children:(0,h.jsx)(v.Z,{sx:{color:"#fff"},children:"CASOS"})}),(0,h.jsx)("a",{className:t.link,component:i.OL,href:"/Ajustes",children:(0,h.jsx)(v.Z,{sx:{color:"#fff"},children:"AJUSTES"})}),(0,h.jsx)("a",{className:t.link,component:i.OL,href:"/VideoForm",children:(0,h.jsx)(v.Z,{sx:{color:"#fff"},children:"AGREGAR VIDEO"})})]}),e&&!n.is_superuser&&(0,h.jsxs)("div",{className:"",children:[(0,h.jsx)("a",{className:t.link,component:i.OL,href:"/",children:(0,h.jsx)(v.Z,{sx:{color:"#fff"},children:"INICIO"})}),(0,h.jsx)("a",{className:t.link,component:i.OL,href:"/Videos",children:(0,h.jsx)(v.Z,{sx:{color:"#fff"},children:"VIDEOS"})}),(0,h.jsx)("a",{className:t.link,component:i.OL,href:"/Series",children:(0,h.jsx)(v.Z,{sx:{color:"#fff"},children:"SERIES"})}),(0,h.jsx)("a",{className:t.link,component:i.OL,href:"/Casos",children:(0,h.jsx)(v.Z,{sx:{color:"#fff"},children:"CASOS"})})]})]})},S=t(7087),I=(t(9713),t(1971)),L=t(7447),O=t(8302),N=(0,f.Z)((function(e){return{link:{margin:e.spacing(1,1),color:"black"}}})),C=function(e){var n=N();return e.user.is_superuser?(0,h.jsxs)(I.Z,{onClick:e.handleDrawerToggle,sx:{textAlign:"center"},children:[(0,h.jsx)("a",{className:n.link,component:i.OL,href:"/",children:(0,h.jsx)(v.Z,{sx:{color:"#fff"},children:(0,h.jsx)(S.LazyLoadImage,{effect:"blur",src:"http://localhost:8000/media/videos/logoSCCOTView.png",alt:"",className:"",style:{width:"220px",objectFit:"contain",minHeight:"2px"}})})}),(0,h.jsx)(L.Z,{}),(0,h.jsx)(I.Z,{display:"flex",mt:2,mr:2,justifyContent:"center",fontWeight:500,children:(0,h.jsxs)(O.Z,{component:"span",variant:"body2",children:[(0,h.jsx)(I.Z,{ml:2,fontWeight:"fontWeightLight",fontSize:14,children:(0,h.jsx)(j,{})}),(0,h.jsx)(I.Z,{ml:2,fontWeight:"fontWeightLight",fontSize:14,className:"mb-4",children:e.user.name}),(0,h.jsxs)("div",{className:"d-flex flex-column",children:[(0,h.jsx)("a",{className:n.link,component:i.OL,href:"/",children:(0,h.jsx)(v.Z,{sx:{color:"#fff"},children:"INICIO"})}),(0,h.jsx)("a",{className:n.link,component:i.OL,href:"/Videos",children:(0,h.jsx)(v.Z,{sx:{color:"#fff"},children:"VIDEOS"})}),(0,h.jsx)("a",{className:n.link,component:i.OL,href:"/Series",children:(0,h.jsx)(v.Z,{sx:{color:"#fff"},children:"SERIES"})}),(0,h.jsx)("a",{className:n.link,component:i.OL,href:"/Casos",children:(0,h.jsx)(v.Z,{sx:{color:"#fff"},children:"CASOS"})}),(0,h.jsx)("a",{className:n.link,component:i.OL,href:"/Ajustes",children:(0,h.jsx)(v.Z,{sx:{color:"#fff"},children:"AJUSTES"})}),(0,h.jsx)("a",{className:n.link,component:i.OL,href:"/VideoForm",children:(0,h.jsx)(v.Z,{sx:{color:"#fff"},children:"AGREGAR VIDEO"})})]})]})})]}):(0,h.jsxs)(I.Z,{onClick:e.handleDrawerToggle,sx:{textAlign:"center"},children:[(0,h.jsx)("div",{children:(0,h.jsx)("img",{src:"http://localhost:8000/media/videos/logoSCCOTView.png",style:{width:"170px",objectFit:"contain",minHeight:"2px"}})}),(0,h.jsx)(L.Z,{}),(0,h.jsx)(I.Z,{display:"flex",mt:2,mr:2,flexDirection:"column",alignItems:"center",justifyContent:"center",fontWeight:500,children:(0,h.jsxs)(O.Z,{component:"span",variant:"body2",children:[(0,h.jsx)(I.Z,{ml:2,fontWeight:"fontWeightLight",fontSize:14,children:(0,h.jsx)(j,{})}),(0,h.jsx)(I.Z,{ml:2,fontWeight:"fontWeightLight",fontSize:14,children:e.user.name_odoo}),(0,h.jsxs)("div",{className:"d-flex flex-column",children:[(0,h.jsx)("a",{className:n.link,component:i.OL,href:"/",children:(0,h.jsx)(v.Z,{sx:{color:"#fff"},children:"INICIO"})}),(0,h.jsx)("a",{className:n.link,component:i.OL,href:"/Videos",children:(0,h.jsx)(v.Z,{sx:{color:"#fff"},children:"VIDEOS"})}),(0,h.jsx)("a",{className:n.link,component:i.OL,href:"/Series",children:(0,h.jsx)(v.Z,{sx:{color:"#fff"},children:"SERIES"})}),(0,h.jsx)("a",{className:n.link,component:i.OL,href:"/Casos",children:(0,h.jsx)(v.Z,{sx:{color:"#fff"},children:"CASOS"})})]})]})})]})},y=t(8167),_=t(7690),z=t(7025),A=t(5667),E=t(8336),T=(t(5258),(0,f.Z)((function(e){return{appBar:{borderBottom:"1px solid ".concat(e.palette.divider)},link:{margin:e.spacing(1,1.5)},toolbarTitle:{flexGrow:1},paper:{display:"flex",flexDirection:"column",alignItems:"center"}}}))),R=(0,p.ZP)("div")((function(e){var n=e.theme;return(0,k.Z)((0,k.Z)({display:"flex",alignItems:"center",padding:n.spacing(0,1)},n.mixins.toolbar),{},{justifyContent:"flex-end"})})),V=function(e){var n=T(),t=e.window,r=(0,a.useState)(!1),o=(0,s.Z)(r,2),c=o[0],l=o[1],u=function(){l(!c)},f=(0,h.jsx)(C,{user:e.user,handleDrawerToggle:u}),d=void 0!==t?function(){return t().document.body}:void 0;return(0,h.jsx)(a.Fragment,{children:(0,h.jsxs)(I.Z,{children:[(0,h.jsx)(y.Z,{position:"relative",color:"default",component:"nav",className:n.appBar,children:(0,h.jsxs)(_.Z,{children:[(0,h.jsx)(z.Z,{color:"inherit","aria-label":"open drawer",edge:"start",onClick:u,sx:{mr:2,display:{sm:"none"}},children:(0,h.jsx)(E.Z,{})}),(0,h.jsx)(O.Z,{variant:"h6",component:"div",className:n.toolbarTitle,sx:{flexGrow:1,display:{xs:"none",sm:"block"}},children:(0,h.jsx)("div",{className:"",children:(0,h.jsx)("a",{component:i.OL,href:"/",children:(0,h.jsx)(S.LazyLoadImage,{effect:"blur",src:"http://localhost:8000/media/videos/logoSCCOTView.png",alt:"",className:"",style:{width:"170px",objectFit:"contain",minHeight:"2px"}})})})}),(0,h.jsxs)("div",{className:"containerLinksNavbar",children:[(0,h.jsx)(b,{}),(0,h.jsx)(j,{})]}),(0,h.jsx)(m,{})]})}),(0,h.jsx)(I.Z,{component:"nav",children:(0,h.jsxs)(A.ZP,{container:d,variant:"temporary",open:c,onClose:u,ModalProps:{keepMounted:!0},sx:{display:{xs:"flex",sm:"none"},"& .MuiDrawer-paper":{boxSizing:"border-box",width:350}},children:[(0,h.jsx)(R,{children:(0,h.jsx)(z.Z,{onClick:u,children:"\u2716"})}),(0,h.jsx)(L.Z,{}),f]})})]})})},W=t(5764),M=(0,f.Z)((function(e){return{appBar:{borderBottom:"4px solid ".concat(e.palette.divider)},link:{margin:e.spacing(1,1.5)},toolbarTitle:{flexGrow:1},paper:{display:"flex",flexDirection:"column",alignItems:"center"}}})),D=function(){var e=M(),n=(0,d.Z)().isLogged,t=(0,a.useState)(!1),c=(0,s.Z)(t,1)[0],l=(0,a.useState)(""),u=(0,s.Z)(l,2),f=u[0],x=u[1],p=(0,a.useContext)(Z.Z).user,g=function(){var e=(0,o.Z)((0,r.Z)().mark((function e(){var n;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,(0,W.wb)();case 3:n=e.sent,x(n),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log("Error");case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}();return(0,a.useEffect)((function(){n&&g()}),[n]),n&&f?(0,h.jsx)(V,{user:p,categories:f}):(0,h.jsx)(a.Fragment,{children:(0,h.jsx)(I.Z,{children:(0,h.jsx)(y.Z,{position:"relative",open:c,color:"default",elevation:0,className:e.appBar,children:(0,h.jsxs)(_.Z,{className:e.toolbar,children:[(0,h.jsx)(O.Z,{variant:"h6",color:"inherit",noWrap:!0,className:e.toolbarTitle,children:(0,h.jsx)("a",{component:i.OL,href:"/",children:(0,h.jsx)(S.LazyLoadImage,{effect:"blur",src:"http://localhost:8000/media/videos/logoSCCOTView.png",alt:"",className:"",style:{width:"170px",objectFit:"contain",minHeight:"2px"}})})}),(0,h.jsx)(j,{}),(0,h.jsx)(m,{})]})})})})}},5628:function(e,n,t){t.d(n,{Z:function(){return l}});var r=t(9439),o=t(2791),s=t(7689),a=t(2680),i=t(746),c=t(7411);t(1830);function l(){var e=(0,s.s0)(),n=(0,o.useContext)(a.Z),t=n.jwt,l=n.setUSER,u=n.setJWT,f=(0,o.useState)({loading:!1,error:!1}),d=(0,r.Z)(f,2),h=d[0],x=d[1],m=(0,o.useState)(""),p=(0,r.Z)(m,2),g=p[0],j=p[1],Z=(0,o.useCallback)((function(e){var n=e.username,t=e.password;x({loading:!0,error:!1}),(0,i.m3)({username:n,password:t}).then((function(e){window.localStorage.setItem("access_token",e.data.access_token),window.localStorage.setItem("refresh_token",e.data.refresh_token),window.localStorage.setItem("user",JSON.stringify(e.data.user)),c.Z.defaults.headers.Authorization="JWT "+localStorage.getItem("access_token"),x({loading:!1,error:!1}),u(e.data.access_token),l(e.data.user)})).catch((function(e){window.localStorage.removeItem("access_token"),window.localStorage.removeItem("refresh_token"),window.localStorage.removeItem("user"),x({loading:!1,error:!0}),console.log(e),j(e.response.data.error||e.response.data.detail)}))}),[u,l]),k=(0,o.useCallback)((function(){c.Z.post("logout/",{refresh_token:localStorage.getItem("refresh_token")}),localStorage.removeItem("access_token"),localStorage.removeItem("refresh_token"),localStorage.removeItem("user"),c.Z.defaults.headers.Authorization=null,u(null),e("/"),window.location.reload()}),[e,u]);return{isLogged:Boolean(t),isLoginLoading:h.loading,hasLoginError:h.error,login:Z,logout:k,errLogin:g}}},746:function(e,n,t){t.d(n,{PR:function(){return l},gO:function(){return u},m3:function(){return c}});var r=t(4165),o=t(5861),s=t(3263),a=t(7411),i="http://localhost:8000/api/",c=function(){var e=(0,o.Z)((0,r.Z)().mark((function e(n){var t;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s.Z.post(i+"login/",n);case 2:return t=e.sent,console.log(n),e.abrupt("return",t);case 5:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),l=function(){var e=(0,o.Z)((0,r.Z)().mark((function e(n){var t;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.Z.get("".concat(i,"users/").concat(n));case 2:if(200!==(t=e.sent).status){e.next=8;break}return console.log(t),e.next=7,t.data;case 7:return e.abrupt("return",e.sent);case 8:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),u=function(){var e=(0,o.Z)((0,r.Z)().mark((function e(n,t){var o;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.Z.patch("".concat(i,"users/").concat(n,"/"),t);case 2:if(200!==(o=e.sent).status){e.next=7;break}return e.next=6,o.data;case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}}),e)})));return function(n,t){return e.apply(this,arguments)}}()},5764:function(e,n,t){t.d(n,{CX:function(){return c},wb:function(){return i},yr:function(){return l}});var r=t(4165),o=t(5861),s=t(7411),a="http://localhost:8000/api/categorias/",i=function(){var e=(0,o.Z)((0,r.Z)().mark((function e(){var n;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s.Z.get(a);case 2:if(200!==(n=e.sent).status){e.next=7;break}return e.next=6,n.data;case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),c=function(){var e=(0,o.Z)((0,r.Z)().mark((function e(n){var t;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s.Z.post(a,n);case 2:if(200!==(t=e.sent).status){e.next=7;break}return e.next=6,t.data;case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),l=function(){var e=(0,o.Z)((0,r.Z)().mark((function e(n,t){var o;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s.Z.patch(a+n+"/",t);case 2:if(200!==(o=e.sent).status){e.next=5;break}return e.abrupt("return",o.data);case 5:case"end":return e.stop()}}),e)})));return function(n,t){return e.apply(this,arguments)}}()},5258:function(){}}]);
//# sourceMappingURL=166.97085253.chunk.js.map