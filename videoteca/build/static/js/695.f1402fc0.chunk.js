"use strict";(self.webpackChunkvideoteca_frontend=self.webpackChunkvideoteca_frontend||[]).push([[695],{7411:function(e,t,r){var n=r(4165),a=r(5861),s=r(3263),o=r(9778),c="https://sccotview.com/api/",i=s.Z.create({baseURL:c,timeout:5e3,headers:{Authorization:localStorage.getItem("access_token")?"JWT "+localStorage.getItem("access_token"):null,"Content-Type":"multipart/form-data",accept:"application/json"}});i.interceptors.response.use((function(e){return e}),function(){var e=(0,a.Z)((0,n.Z)().mark((function e(t){var r,a,s,l;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.config,"undefined"!==typeof t.response){e.next=4;break}return console.warn("A server/network error occurred. Looks like CORS might be the problem. Sorry about this - we will get it fixed shortly."),e.abrupt("return",Promise.reject(t));case 4:if(401!==t.response.status||r.url!==c+"api/token/refresh/"){e.next=7;break}return window.location.href="/loginuser/",e.abrupt("return",Promise.reject(t));case 7:if("token_not_valid"!==t.response.data.code||401!==t.response.status||"Unauthorized"!==t.response.statusText){e.next=26;break}if(!(a=localStorage.getItem("refresh_token"))){e.next=24;break}if(s=JSON.parse(o.lW.from(a.split(".")[1],"base64").toString()),l=Math.ceil(Date.now()/1e3),console.log(s.exp),!(s.exp>l)){e.next=17;break}return e.abrupt("return",i.post("api/token/refresh/",{refresh:a}).then((function(e){return localStorage.setItem("access_token",e.data.access_token),localStorage.setItem("refresh_token",e.data.refresh_token),i.defaults.headers.Authorization="JWT "+e.data.access_token,r.headers.Authorization="JWT "+e.data.access_token,i(r)})).catch((function(e){console.log(e)})));case 17:console.log("Refresh token is expired",s.exp,l),window.localStorage.removeItem("access_token"),window.localStorage.removeItem("refresh_token"),window.localStorage.removeItem("user"),window.location.href="/loginuser/";case 22:e.next=26;break;case 24:console.log("Refresh token not available."),window.location.href="/loginuser/";case 26:return 401===t.response.status&&(window.location.href="/loginuser/"),e.abrupt("return",Promise.reject(t));case 28:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),t.Z=i},3695:function(e,t,r){r.r(t),r.d(t,{default:function(){return Z}});var n=r(9439),a=r(2791),s=r(4165),o=r(5861),c=r(7689),i=(r(8040),r(1174),r(3712)),l=r(8596),u=r(3767),d=r(6151),p=r(2680),f=r(6849),x=r(1479),h=r(2918),v=r(184),b=function(e){var t=e.palabrasClaves,r=(0,c.s0)(),b=(0,h.d)(!1),m=(0,n.Z)(b,3),Z=m[0],g=m[1],k=m[2],w=(0,a.useState)(""),j=(0,n.Z)(w,2),C=j[0],y=j[1],S=(0,a.useState)({}),I=(0,n.Z)(S,2),_=I[0],N=I[1],D=(0,a.useState)(t),A=(0,n.Z)(D,2),F=A[0],P=A[1],R=(0,a.useState)({palabraClave:""}),T=(0,n.Z)(R,2),z=T[0],L=T[1],B=(0,a.useContext)(p.Z).user,E=(0,l.Z)((function(e){return{paper:{marginTop:e.spacing(0),marginBottom:e.spacing(10),display:"flex",flexDirection:"column",alignItems:"center"},title1:{textAlign:"center",color:"white"}}})),J=function(){var e=(0,o.Z)((0,s.Z)().mark((function e(t){return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:y(t.id),N(t),L({palabraClave:t.palabraClave}),g(!0);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),M=function(){var e=(0,o.Z)((0,s.Z)().mark((function e(){return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:y(null),N({}),L({palabraClave:""}),g(!0);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),W=function(){var e=(0,o.Z)((0,s.Z)().mark((function e(){var t,r;return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,f.kt();case 3:return t=e.sent,e.next=6,t;case 6:r=e.sent,P(r),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),console.log(e.t0);case 13:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(){return e.apply(this,arguments)}}();(0,a.useEffect)((function(){B&&B.is_superuser?(W(),y(null)):r("/loginuser")}),[]);var G=E();return B?(0,v.jsxs)(i.Z,{children:[(0,v.jsx)("div",{className:G.paper,children:(0,v.jsx)("h1",{className:"mt-4 text-center",children:"Palabras Claves"})}),(0,v.jsx)(u.Z,{alignItems:"center",children:(0,v.jsx)(d.Z,{variant:"contained",color:"success",type:"submit",onClick:function(){return M()},children:"Registrar PalabraClave"})}),(0,v.jsx)("br",{}),(0,v.jsx)("br",{})," ",(0,v.jsx)("br",{}),(0,v.jsx)("div",{children:(0,v.jsx)("section",{className:"content",children:(0,v.jsx)("div",{className:"table-responsive table-condensed table-sm tabla",children:(0,v.jsxs)("table",{className:"table table-hover",id:"dataTableData",name:"dataTableData",style:{fontSize:11,textAlign:"center"},children:[(0,v.jsx)("thead",{className:G.title1,children:(0,v.jsxs)("tr",{children:[(0,v.jsx)("th",{style:{display:"none"},children:"Id"}),(0,v.jsx)("th",{children:"Codigo"}),(0,v.jsx)("th",{children:"PalabraClave"}),(0,v.jsx)("th",{})]})}),(0,v.jsx)("tbody",{style:{backgroundColor:"white"},children:0===F.length?(0,v.jsx)("tr",{children:(0,v.jsx)("td",{colSpan:11,children:"No hay datos"})}):F.map((function(e,t){return(0,v.jsxs)("tr",{children:[(0,v.jsx)("td",{style:{display:"none"},children:e.id}),(0,v.jsx)("td",{children:e.id}),(0,v.jsx)("td",{children:e.palabraClave}),(0,v.jsx)("td",{children:(0,v.jsx)("button",{className:"btn btn-outline-primary p-1 btn-sm float-right",type:"submit",onClick:function(){return J(e)},children:"editar"})})]},t)}))})]})})})}),(0,v.jsx)(x.Z,{handleClose:k,show:Z,palabraclave_id:C,currentItem:_,setPalabrasClaves:P,setFormData:L,newData:z})]}):(0,v.jsx)("p",{style:{fontSize:"25px"},children:"Inicia sesi\xf3n para ver todos los videos!"})},m=r(2516),Z=function(){var e=(0,m.Z)(b),t=(0,a.useContext)(p.Z).user,r=(0,a.useState)({loading:!0,palabrasClaves:null}),s=(0,n.Z)(r,2),o=s[0],c=s[1];return(0,a.useEffect)((function(){f.kt().then((function(e){c({loading:!1,palabrasClaves:e})}))}),[c]),t?(0,v.jsx)(i.Z,{children:(0,v.jsx)("div",{className:"App",children:(0,v.jsx)(e,{isLoading:o.loading,palabrasClaves:o.palabrasClaves})})}):(0,v.jsx)("p",{style:{fontSize:"25px"},children:"Inicia sesi\xf3n para ver todos los videos!"})}},1479:function(e,t,r){var n=r(4165),a=r(5861),s=r(4942),o=r(1413),c=r(5987),i=(r(2791),r(6849)),l=r(5342),u=r(3360),d=r(4437),p=r(8596),f=(r(9629),r(184)),x=["handleClose","show","palabraclave_id","currentItem","setFormData","newData"],h=(0,p.Z)((function(e){return{containerModal:{border:"2px solid #ccc",borderRadius:50,boxShadow:"4px 4px 4px 0px #5a28e550"},containerForm:{height:"3rem",background:"#BFF",border:"2px solid #ccc",borderRadius:50,boxShadow:"4px 4px 4px 0px #5a28e550"},"@media (max-width: 720px)":{root:{display:"flex"}}}}));t.Z=function(e){var t=e.handleClose,r=e.show,p=e.palabraclave_id,v=(e.currentItem,e.setFormData),b=e.newData,m=(0,c.Z)(e,x),Z=function(){var e=(0,a.Z)((0,n.Z)().mark((function e(t){var r,a,s;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),r=new FormData,e.prev=2,p){e.next=9;break}return r.append("palabraClave",b.palabraClave),e.next=7,i.eA(r);case 7:e.next=12;break;case 9:return r.append("palabraClave",b.palabraClave),e.next=12,i.Zb(p,r);case 12:return e.next=14,i.kt();case 14:return a=e.sent,e.next=17,a;case 17:s=e.sent,m.setPalabrasClaves(s),e.next=24;break;case 21:e.prev=21,e.t0=e.catch(2),console.log(e.t0);case 24:case"end":return e.stop()}}),e,null,[[2,21]])})));return function(t){return e.apply(this,arguments)}}(),g=h();return(0,f.jsxs)(l.Z,{show:r,onHide:t,"aria-labelledby":"example-custom-modal-styling-title",contentClassName:g.cloud,centered:!0,children:[(0,f.jsx)(l.Z.Header,{closeButton:!0,children:(0,f.jsx)(l.Z.Title,{id:"tituloModal",className:"text-dark mx-2 mt-2",children:(0,f.jsxs)("h4",{children:[p?"Editar Registro":"Registrar"," Palabra clave"]})})}),(0,f.jsx)(l.Z.Body,{id:"bodyModal",children:(0,f.jsxs)(d.Z,{onSubmit:Z,children:[(0,f.jsx)(d.Z.Group,{className:"mb-2 ",controlId:"exampleForm.ControlInput1",children:(0,f.jsx)(d.Z.Control,{type:"text",className:g.containerForm,rows:1,name:"palabraClave",value:b.palabraClave||"",onChange:function(e){var t=e.target.name;v((0,o.Z)((0,o.Z)({},b),{},(0,s.Z)({},t,e.target.value)))}})}),(0,f.jsxs)(l.Z.Footer,{children:[(0,f.jsx)(u.Z,{variant:"secondary",onClick:t,children:"Close"}),(0,f.jsx)(u.Z,{variant:"primary",type:"submit",onClick:t,children:p?"Guardar Cambios":"Crear"})]})]})})]})}},2516:function(e,t,r){var n=r(1413),a=r(5987),s=(r(2791),r(184)),o=["isLoading"];t.Z=function(e){return function(t){var r=t.isLoading,c=(0,a.Z)(t,o);return r?(0,s.jsxs)("div",{className:"mt-4",style:{fontSize:"25px",display:"flex",justifyContent:"center",textAlign:"center",flexDirection:"column",alignItems:"center"},children:[(0,s.jsx)("div",{className:"spinner-grow text-light",role:"status",children:(0,s.jsx)("span",{className:"sr-only"})}),"Espera por favor"]}):(0,s.jsx)(e,(0,n.Z)({},c))}}},2918:function(e,t,r){r.d(t,{d:function(){return s}});var n=r(9439),a=r(2791),s=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=(0,a.useState)(e),r=(0,n.Z)(t,2),s=r[0],o=r[1],c=function(){return o(!0)},i=function(){return o(!1)};return[s,c,i]}},6849:function(e,t,r){r.d(t,{Zb:function(){return l},eA:function(){return i},kt:function(){return c}});var n=r(4165),a=r(5861),s=r(7411),o="https://sccotview.com/api/palabrasclaves/",c=function(){var e=(0,a.Z)((0,n.Z)().mark((function e(){var t;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s.Z.get(o);case 2:if(200!==(t=e.sent).status){e.next=7;break}return e.next=6,t.data;case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),i=function(){var e=(0,a.Z)((0,n.Z)().mark((function e(t){var r;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s.Z.post(o,t);case 2:if(r=e.sent,console.log("registrar palabras claves"),200!==r.status){e.next=8;break}return e.next=7,r.data;case 7:return e.abrupt("return",e.sent);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),l=function(){var e=(0,a.Z)((0,n.Z)().mark((function e(t,r){var a;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s.Z.patch(o+t+"/",r);case 2:if(200!==(a=e.sent).status){e.next=5;break}return e.abrupt("return",a.data);case 5:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}()},8040:function(){},9629:function(){}}]);
//# sourceMappingURL=695.f1402fc0.chunk.js.map