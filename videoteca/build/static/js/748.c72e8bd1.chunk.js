(self.webpackChunkvideoteca_frontend=self.webpackChunkvideoteca_frontend||[]).push([[748],{5509:function(e,n,r){"use strict";r.r(n);var t=r(3433),i=r(1413),s=r(4165),c=r(5861),a=r(9439),o=r(2791),u=r(7689),l=r(1652),d=r(6542),f=r(6639),p=r(2516),x=r(748),h=r(9929),m=r(733),v=r(2918),j=r(1614),Z=r(890),b=r(4554),g=r(3767),y=r(6151),w=r(151),N=r(8596),_=r(1444),k=(r(5258),r(8953)),S=r(1241),C=r(4030),E=r(1830),V=r.n(E),I=r(6627),L=r.n(I),T=r(184),A=(0,N.Z)((function(e){return{paper:{marginTop:e.spacing(0),display:"flex",flexDirection:"column",alignItems:"center"}}}));n.default=function(){var e=(0,u.s0)(),n=(0,v.d)(!1),r=(0,a.Z)(n,3),N=r[0],E=r[1],I=r[2],O=(0,v.d)(!1),z=(0,a.Z)(O,3),B=z[0],D=z[1],F=z[2],M=(0,o.useState)(),P=(0,a.Z)(M,2),R=P[0],J=P[1],U=(0,u.TH)(),q=(0,u.UO)().id,G=(0,o.useState)([]),H=(0,a.Z)(G,2),K=H[0],W=H[1],Y=(0,o.useState)([]),$=(0,a.Z)(Y,2),Q=$[0],X=$[1],ee=(0,o.useState)([]),ne=(0,a.Z)(ee,2),re=ne[0],te=ne[1],ie=(0,o.useState)([]),se=(0,a.Z)(ie,2),ce=(se[0],se[1]),ae=(0,o.useState)([]),oe=(0,a.Z)(ae,2),ue=(oe[0],oe[1]),le=(0,o.useState)(!0),de=(0,a.Z)(le,2),fe=de[0],pe=de[1],xe=(0,o.useState)([]),he=(0,a.Z)(xe,2),me=he[0],ve=he[1],je=(0,o.useState)(null),Ze=(0,a.Z)(je,2),be=(Ze[0],Ze[1]),ge=(0,o.useState)(U.state),ye=(0,a.Z)(ge,2),we=ye[0],Ne=ye[1],_e=(0,o.useState)([]),ke=(0,a.Z)(_e,2),Se=ke[0],Ce=ke[1],Ee=(0,o.useState)(-1),Ve=(0,a.Z)(Ee,2),Ie=Ve[0],Le=Ve[1],Te=localStorage.getItem("user"),Ae=JSON.parse(Te),Oe=(0,o.useState)({loading:!0}),ze=(0,a.Z)(Oe,2),Be=ze[0],De=ze[1],Fe=(0,p.Z)(K),Me=function(e){var n=e.split(":"),r="";return n&&("00"!==n[0]&&(r=n[0]+"h"),"00"!==n[1]&&(r=" "+r+" "+n[1]+"min")),r.trim()},Pe=function(){var n=(0,c.Z)((0,s.Z)().mark((function n(r){return(0,s.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:V().fire({title:"\xbfSeguro quieres eliminar este video?",text:"No podras recuperar la informaci\xf3n",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Eliminar video"}).then(function(){var n=(0,c.Z)((0,s.Z)().mark((function n(t){return(0,s.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!t.isConfirmed){n.next=5;break}return n.next=3,l.gY(r);case 3:e("/"),V().fire({title:"Video eliminado con exito",text:"",icon:"success"});case 5:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}());case 1:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}(),Re=function(){var e=(0,c.Z)((0,s.Z)().mark((function e(n,r){var t,i;return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d.dS(n);case 2:return t=e.sent,X(t),e.next=6,f.op(r);case 6:i=e.sent,te(i);case 8:case"end":return e.stop()}}),e)})));return function(n,r){return e.apply(this,arguments)}}(),Je=function(){var n=(0,c.Z)((0,s.Z)().mark((function n(){var r;return(0,s.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,h.K7();case 3:(r=n.sent)&&Ae.id?(Le(r.user_score-1),J(r),pe(!1),void 0!==r.user_score&&Le(r.user_score-1)):e("/loginuser"),n.next=9;break;case 7:n.prev=7,n.t0=n.catch(0);case 9:case"end":return n.stop()}}),n,null,[[0,7]])})));return function(){return n.apply(this,arguments)}}();(0,o.useEffect)((function(){Je();var e=function(){var e=(0,c.Z)((0,s.Z)().mark((function e(n){var r,t;return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l.om(n);case 2:r=e.sent,t=r,be(new Date(r.upload_date).toDateString()),ve(Me(r.duration)),W((0,i.Z)((0,i.Z)({},t),{},{duration:me})),De({loading:!1});case 8:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}();e(q);var n=function(){var e=(0,c.Z)((0,s.Z)().mark((function e(n){var r;return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m.t$({video_id:n});case 2:r=e.sent,Ce(r);case 4:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}();n(q),Re(K.serie,K.temporada)}),[me,q,W,K.title_espanol,K.url_esp,K.url_vimeo_esp,K.serie_id]);var Ue=function(){var e=(0,c.Z)((0,s.Z)().mark((function e(n){var r,t,c,a;return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Le(n),r=K.cumulative_score,t=K.numberOfVotes,!we.user_score){e.next=11;break}return r=r-we.user_score+n+1,c=r/t,Ne((0,i.Z)((0,i.Z)({},we),{},{user_score:n+1})),e.next=9,l.Jp(K.id,{cumulative_score:r,score:c});case 9:e.next=17;break;case 11:return a=(r=r+n+1)/(t+=1),Ne((0,i.Z)((0,i.Z)({},we),{},{user_score:n+1})),e.next=17,l.Jp(K.id,{cumulative_score:r,numberOfVotes:t,score:a});case 17:return e.next=19,h.o0(we.id,{user_score:n+1});case 19:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),qe=A();if(!fe)return(0,T.jsxs)(j.Z,{children:[Be.loading?(0,T.jsx)(Fe,{isLoading:Be.loading,video:K}):"",(0,T.jsx)("div",{children:(0,T.jsx)("div",{className:"d-flex justify-content-end",children:(0,T.jsx)("button",{onClick:function(){return window.history.back()},className:"btn btn-light mt-4 my-2",value:"Volver",children:"Volver"})})}),(0,T.jsx)("div",{className:qe.paper,children:(0,T.jsx)("h3",{children:K.title_espanol})}),(0,T.jsx)("br",{}),(0,T.jsxs)("div",{className:"row",children:[(0,T.jsx)("div",{className:"col-8 iframe1 mx-auto",children:(0,T.jsx)(C.Z,{video:K})}),(0,T.jsxs)("div",{className:"col infoVideo",children:[(0,T.jsxs)("div",{className:"d-flex justify-content-between",children:[(0,T.jsx)(Z.Z,{component:"h5",variant:"h6",style:{color:"white",borderBottom:"3px solid white",paddingBottom:"5px"},align:"center",children:K.duration}),(0,T.jsx)("div",{className:"d-flex justify-content-end text-capitalize  ",children:(0,T.jsx)(b.Z,{sx:{"& > legend":{mt:2}},className:qe.containerRating,children:(0,T.jsx)("div",{className:"bg-secondary d-inline pt-2 px-1 rounded-2",children:(0,T.jsx)(x.Z,{name:"read-only",value:parseFloat(K.score),precision:.5,readOnly:!0})})})})]}),(0,T.jsx)("br",{}),Ae.is_superuser&&(0,T.jsxs)("div",{className:"d-flex justify-content-between mb-2",children:[(0,T.jsx)("button",{onClick:function(){return e("/updateVideo/".concat(K.id))},className:"btn  btn-outline-primary form-control mx-1",children:"Actualizar"}),(0,T.jsx)("button",{onClick:function(){return K.id&&Pe(K.id)},className:" btn  btn-outline-danger form-control mx-1",children:"Eliminar"})]}),(0,T.jsxs)("div",{className:"d-flex justify-content-center flex-column align-items-center",children:[(0,T.jsxs)(Z.Z,{component:"h5",variant:"h6",children:["Ay\xfadanos a calificar   \xa0",(0,T.jsx)(b.Z,{sx:{display:"inline-flex",position:"relative",cursor:"pointer",textAlign:"left"},children:(0,t.Z)(new Array(5)).map((function(e,n){return(0,T.jsxs)(b.Z,{position:"relative",sx:{cursor:"pointer"},onClick:function(e){return Ue(n)},children:[(0,T.jsx)(b.Z,{sx:{width:n<=Ie?"100%":"0%",overflow:"hidden",position:"absolute"},children:(0,T.jsx)(w.Z,{})}),(0,T.jsx)(b.Z,{children:(0,T.jsx)(_.Z,{})})]},n)}))})]}),(0,T.jsx)("br",{}),(0,T.jsxs)("div",{className:"d-flex ",children:[(0,T.jsx)(g.Z,{alignItems:"center",className:"p-2",children:(0,T.jsx)(y.Z,{variant:"contained",color:"success",type:"submit",onClick:E,children:"Realizar comentario"})}),Se?(0,T.jsx)(g.Z,{alignItems:"center",className:"p-2",children:(0,T.jsx)(y.Z,{variant:"contained",color:"primary",type:"submit",onClick:D,children:"Ver otros comentarios"})}):null]}),(0,T.jsx)("div",{className:"mt-3",children:(0,T.jsx)("div",{className:"table-responsive ",children:(0,T.jsx)("table",{className:"table  text-light ",children:(0,T.jsxs)("thead",{children:[(0,T.jsxs)("tr",{className:"",children:[(0,T.jsx)("td",{scope:"",children:"Autores"}),(0,T.jsx)("td",{children:K.autor&&K.autor.map((function(e){return(0,T.jsx)("li",{children:(0,T.jsx)("small",{className:"",children:L()(e.autor)})},e.id)}))})]}),2===K.tipe_of_video&&(0,T.jsxs)(T.Fragment,{children:[(0,T.jsxs)("tr",{children:[(0,T.jsx)("th",{scope:"col",children:"Serie"}),(0,T.jsx)("th",{scope:"col",children:(0,T.jsx)("a",{className:"text-primary",style:{cursor:"pointer"},onClick:function(){return n=Q.id,e("/seeSerie/".concat(n),{state:R}),void ce(n);var n},children:Q.serie})})]}),(0,T.jsxs)("tr",{children:[(0,T.jsx)("th",{scope:"col",children:"Temporada"}),(0,T.jsx)("th",{scope:"col",children:(0,T.jsx)("a",{className:"text-primary",style:{cursor:"pointer"},onClick:function(){return n=re.id,e("/seeTemporada/".concat(n),{state:R}),void ue(n);var n},children:re.temporada})})]})]})]})})})})]})]}),(0,T.jsx)("div",{children:(0,T.jsx)("p",{className:"mt-4",children:K.description_esp})}),(0,T.jsx)("br",{}),(0,T.jsx)("div",{className:"table-responsive ",children:(0,T.jsxs)("table",{className:"table  text-light ",children:[(0,T.jsx)("thead",{children:(0,T.jsxs)("tr",{children:[(0,T.jsx)("th",{scope:"col",children:"Categor\xedas"}),(0,T.jsx)("th",{scope:"col",children:"Especialidades"}),(0,T.jsx)("th",{scope:"col",children:"Subespecialidades"}),(0,T.jsx)("th",{scope:"col",children:"Palabras claves"})]})}),(0,T.jsx)("tbody",{children:(0,T.jsxs)("tr",{children:[(0,T.jsx)("td",{children:K.categorias&&K.categorias.map((function(e){return(0,T.jsx)("li",{children:(0,T.jsx)("small",{className:"",children:e.categoria})},e.id)}))}),(0,T.jsx)("td",{children:K.especialidad&&K.especialidad.map((function(e){return(0,T.jsx)("li",{children:(0,T.jsx)("small",{className:"",children:e.especialidad})},e.id)}))}),(0,T.jsx)("td",{children:K.subEspecialidad&&K.subEspecialidad.map((function(e){return(0,T.jsx)("li",{children:(0,T.jsx)("small",{className:"",children:e.subEspecialidad})},e.id)}))}),(0,T.jsx)("td",{children:K.palabraClave&&K.palabraClave.map((function(e){return(0,T.jsx)("li",{children:(0,T.jsx)("small",{className:"",children:e.palabraClave})},e.id)}))})]})})]})})]}),(0,T.jsx)(k.Z,{handleClose:I,show:N,histUser:we,videoID:q}),(0,T.jsx)(S.Z,{handleClose:F,show:B,histUser:we,commentaries:Se,videoID:q})]})}},151:function(e,n,r){"use strict";var t=r(4836);n.Z=void 0;var i=t(r(5649)),s=r(184),c=(0,i.default)((0,s.jsx)("path",{d:"M12 17.27 18.18 21l-1.64-7.03L22 9.24l-7.19-.61L12 2 9.19 8.63 2 9.24l5.46 4.73L5.82 21z"}),"Star");n.Z=c},1444:function(e,n,r){"use strict";var t=r(4836);n.Z=void 0;var i=t(r(5649)),s=r(184),c=(0,i.default)((0,s.jsx)("path",{d:"m22 9.24-7.19-.62L12 2 9.19 8.63 2 9.24l5.46 4.73L5.82 21 12 17.27 18.18 21l-1.63-7.03L22 9.24zM12 15.4l-3.76 2.27 1-4.28-3.32-2.88 4.38-.38L12 6.1l1.71 4.04 4.38.38-3.32 2.88 1 4.28L12 15.4z"}),"StarBorder");n.Z=c},5649:function(e,n,r){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),Object.defineProperty(n,"default",{enumerable:!0,get:function(){return t.createSvgIcon}});var t=r(9387)},9387:function(e,n,r){"use strict";r.r(n),r.d(n,{capitalize:function(){return i.Z},createChainedFunction:function(){return s},createSvgIcon:function(){return c.Z},debounce:function(){return a},deprecatedPropType:function(){return o},isMuiElement:function(){return l},ownerDocument:function(){return d},ownerWindow:function(){return f},requirePropFactory:function(){return p},setRef:function(){return x},unstable_ClassNameGenerator:function(){return y},unstable_useEnhancedEffect:function(){return h},unstable_useId:function(){return m.Z},unsupportedProp:function(){return v},useControlled:function(){return j.Z},useEventCallback:function(){return Z.Z},useForkRef:function(){return b.Z},useIsFocusVisible:function(){return g.Z}});var t=r(5902),i=r(4036),s=r(8949).Z,c=r(9201);var a=function(e){var n,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:166;function t(){for(var t=this,i=arguments.length,s=new Array(i),c=0;c<i;c++)s[c]=arguments[c];var a=function(){e.apply(t,s)};clearTimeout(n),n=setTimeout(a,r)}return t.clear=function(){clearTimeout(n)},t};var o=function(e,n){return function(){return null}},u=r(2791);var l=function(e,n){return u.isValidElement(e)&&-1!==n.indexOf(e.type.muiName)},d=r(9723).Z,f=r(7979).Z;r(7462);var p=function(e,n){return function(){return null}},x=r(2971).Z,h=r(5721).Z,m=r(5836);var v=function(e,n,r,t,i){return null},j=r(8744),Z=r(9683),b=r(2071),g=r(3031),y={configure:function(e){t.Z.configure(e)}}},8949:function(e,n,r){"use strict";function t(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return n.reduce((function(e,n){return null==n?e:function(){for(var r=arguments.length,t=new Array(r),i=0;i<r;i++)t[i]=arguments[i];e.apply(this,t),n.apply(this,t)}}),(function(){}))}r.d(n,{Z:function(){return t}})},9723:function(e,n,r){"use strict";function t(e){return e&&e.ownerDocument||document}r.d(n,{Z:function(){return t}})},7979:function(e,n,r){"use strict";r.d(n,{Z:function(){return i}});var t=r(9723);function i(e){return(0,t.Z)(e).defaultView||window}},4836:function(e){e.exports=function(e){return e&&e.__esModule?e:{default:e}},e.exports.__esModule=!0,e.exports.default=e.exports}}]);
//# sourceMappingURL=748.c72e8bd1.chunk.js.map