{"version":3,"file":"static/js/290.da7da90a.chunk.js","mappings":"icA8BMA,GAAYC,EAAAA,EAAAA,IAAW,SAACC,GAAD,MAAY,CACvCC,MAAO,CACLC,UAAWF,EAAMG,QAAQ,GACzBC,QAAS,OACTC,cAAe,SACfC,WAAY,UALa,IAqc7B,UAzboB,WAElB,IAAMC,GAAUC,EAAAA,EAAAA,MAChB,GAAwCC,EAAAA,EAAAA,IAAS,GAAjD,eAAOC,EAAP,KAAaC,EAAb,KAAyBC,EAAzB,KACA,GAA2CH,EAAAA,EAAAA,IAAS,GAApD,eAAOI,EAAP,KAAcC,EAAd,KAA2BC,EAA3B,KACA,GAAkCC,EAAAA,EAAAA,YAAlC,eAAOC,EAAP,KAAkBC,EAAlB,KAEMC,GAAWC,EAAAA,EAAAA,MACTC,GAAOC,EAAAA,EAAAA,MAAPD,GACR,GAA0BL,EAAAA,EAAAA,UAAS,IAAnC,eAAOO,EAAP,KAAcC,EAAd,KACA,GAA0BR,EAAAA,EAAAA,UAAS,IAAnC,eAAOS,EAAP,KAAcC,EAAd,KACA,IAAkCV,EAAAA,EAAAA,UAAS,IAA3C,iBAAOW,GAAP,MAAkBC,GAAlB,MACA,IAA8BZ,EAAAA,EAAAA,UAAS,IAAvC,iBAAgBa,IAAhB,aACA,IAAsCb,EAAAA,EAAAA,UAAS,IAA/C,iBAAoBc,IAApB,aAEA,IAA8Bd,EAAAA,EAAAA,WAAS,GAAvC,iBAAOe,GAAP,MAAgBC,GAAhB,MACA,IAAgChB,EAAAA,EAAAA,UAAS,IAAzC,iBAAOiB,GAAP,MAAiBC,GAAjB,MACA,IAAoClB,EAAAA,EAAAA,UAAS,MAA7C,iBAAmBmB,IAAnB,aACA,IAAgCnB,EAAAA,EAAAA,UAASG,EAASiB,OAAlD,iBAAOC,GAAP,MAAiBC,GAAjB,MACA,IAAwCtB,EAAAA,EAAAA,UAAS,IAAjD,iBAAOuB,GAAP,MAAqBC,GAArB,MACA,IAAoCxB,EAAAA,EAAAA,WAAU,GAA9C,iBAAOyB,GAAP,MAAmBC,GAAnB,MAIMC,GAAOC,aAAaC,QAAQ,QAC5BC,GAAOC,KAAKC,MAAML,IAGxB,IAAgC3B,EAAAA,EAAAA,UAAS,CACvCe,SAAS,IADX,iBAAOkB,GAAP,MAAiBC,GAAjB,MAGMC,IAAeC,EAAAA,EAAAA,GAAsB7B,GAOrC8B,GAAiB,SAACC,GACtB,IAAIC,EAASD,EAASE,MAAM,KACxBC,EAAe,GAYnB,OAXIF,IACgB,OAAdA,EAAO,KACTE,EAAeF,EAAO,GAAK,KAEX,OAAdA,EAAO,KACTE,EAAe,IAAMA,EAAe,IAAMF,EAAO,GAAK,QAMnDE,EAAaC,MACrB,EAWKC,GAAY,yCAAG,WAAOC,GAAP,sEAEnBC,IAAAA,KAAU,CACRC,MAAO,0CACPC,KAAM,wCACNC,KAAM,UACNC,kBAAkB,EAClBC,mBAAoB,UACpBC,kBAAmB,OACnBC,kBAAmB,mBAClBC,KARH,yCAQS,WAAOC,GAAP,0EACHA,EAAOC,YADJ,gCAECC,EAAAA,GAAwBZ,GAFzB,OAGLrD,EAAQ,KACRsD,IAAAA,KAAU,CACRC,MAAO,4BACPC,KAAM,GACNC,KAAM,YAPH,2CART,uDAFmB,2CAAH,sDAuBZS,GAAoB,yCAAG,WAAOC,EAAQC,GAAf,8FAEGC,EAAAA,GAAqBF,GAFxB,cAEnBG,EAFmB,OAIzBnD,EAASmD,GAJgB,SAMOC,EAAAA,GAA6BH,GANpC,OAMnBI,EANmB,OAQzBnD,GAAamD,GARY,2CAAH,wDAUpBC,GAAiB,yCAAG,kHAEJC,EAAAA,KAFI,QAEhBC,EAFgB,SAIXpC,GAAKzB,IACdqB,GAAcwC,EAAIC,WAAW,GAC7BjE,EAAagE,GACblD,IAAW,QAGYoD,IAAnBF,EAAIC,YACNzC,GAAcwC,EAAIC,WAAa,IAGjC5E,EAAQ,cAdY,uGAAH,sDA0BvB8E,EAAAA,EAAAA,YAAU,WACRL,KAEA,IAAMM,EAAQ,yCAAG,WAAO1B,GAAP,8FACGY,EAAAA,GAAqBZ,GADxB,OACTsB,EADS,OAET3D,EAAQ2D,EAGd/C,GAAc,IAAIoD,KAAKL,EAAIM,aAAaC,gBACxCvD,GAAYmB,GAAe6B,EAAI5B,WAC/B9B,GAAS,kBACJD,GADG,IAEN+B,SAAUrB,MAEZiB,GAAY,CAAEnB,SAAS,IAXR,2CAAH,sDAeduD,EAASjE,GAET,IAAMqE,EAAe,yCAAG,WAAOC,GAAP,4FACJC,EAAAA,GAAqC,CAAC,SAAWD,IAD7C,OAChBT,EADgB,OAEtB1C,GAAgB0C,GAFM,2CAAH,sDAIrBQ,EAAgBrE,GAEhBoD,GAAqBlD,EAAME,MAAMF,EAAMI,UACxC,GAAE,CAACM,GAAUZ,EAAIG,EAAUD,EAAMsE,cAAetE,EAAMuE,QAASvE,EAAMwE,cAAcxE,EAAMyE,WAQ1F,IAAMC,GAAW,yCAAG,WAAOC,GAAP,qFAClBxD,GAAcwD,GACVC,EAAmB5E,EAAM4E,iBACzBC,EAAe7E,EAAM8E,eAErBhE,GAAS8C,WALK,wBAMhBgB,EAAmBA,EAAmB9D,GAAS8C,WAAae,EAAM,EAC5DI,EAAcH,EAAiBC,EACrC9D,IAAY,kBAAID,IAAL,IAAe8C,WAAWe,EAAM,KAR3B,SASV1B,EAAAA,GAA+BjD,EAAMF,GAAI,CAAC,iBAAoB8E,EAAkB,MAASG,IAT/E,sCAcVA,GADNH,EAAmBA,EAAmBD,EAAM,IAD5CE,GAAe,GAGf9D,IAAY,kBAAID,IAAL,IAAe8C,WAAWe,EAAM,KAf3B,UAgBV1B,EAAAA,GAA+BjD,EAAMF,GAAI,CAAC,iBAAoB8E,EAAiB,cAAiBC,EAAa,MAASE,IAhB5G,yBAkBZrB,EAAAA,GAAwC5C,GAAShB,GAAG,CAAC,WAAc6E,EAAM,IAlB7D,4CAAH,sDAuBXK,GAAUzG,IAEhB,IAAKiC,GACH,OACA,UAAC,IAAD,WACGkB,GAASlB,SAAY,SAACoB,GAAD,CAAcqD,UAAWvD,GAASlB,QAASR,MAAOA,IAAW,IACnF,0BACE,gBAAKkF,UAAU,6BAAf,UACE,mBAASC,QAAS,kBAAMC,OAAOpG,QAAQqG,MAArB,EAA6BH,UAAU,0BAA0BI,MAAM,SAAzF,yBAGJ,gBAAKJ,UAAWF,GAAQtG,MAAxB,UACE,wBACGsB,EAAMsE,mBAIX,mBACA,iBAAKY,UAAU,MAAf,WACE,gBAAKA,UAAU,wBAAf,UACE,SAAC,IAAD,CACElF,MAAOA,OAIX,iBAAKkF,UAAU,gBAAf,WACE,iBAAKA,UAAU,iCAAf,WACA,SAAC,IAAD,CAAYK,UAAU,KAAKC,QAAQ,KAAKC,MAAO,CAACC,MAAM,QAAQC,aAAa,kBAAkBC,cAAc,OAAQC,MAAM,SAAzH,SACG7F,EAAM+B,YAET,gBAAKmD,UAAU,+CAAf,UACE,SAAC,IAAD,CAAKY,GAAI,CAAC,aAAc,CAAEC,GAAI,IAAMb,UAAWF,GAAQgB,gBAAvD,UACE,gBAAKd,UAAU,4CAAf,UACE,SAAC,IAAD,CAAQe,KAAK,YAAYX,MAAOY,WAAWlG,EAAMmG,OAAQC,UAAW,GAAKC,UAAQ,cAKvF,kBACC9E,GAAK+E,eACJ,iBAAKpB,UAAU,sCAAf,WAEE,mBACEC,QAAS,kBAAMnG,EAAQ,gBAAD,OAAiBgB,EAAMF,IAApC,EACToF,UAAU,6CAFZ,yBAQA,mBACEC,QAAS,kBAAMnF,EAAMF,IAAMsC,GAAapC,EAAMF,GAArC,EACToF,UAAU,6CAFZ,0BASJ,iBAAKA,UAAU,+DAAf,WACA,UAAC,IAAD,CAAYK,UAAU,KAAKC,QAAQ,KAAnC,4CAEE,SAAC,IAAD,CACEM,GAAI,CACFjH,QAAS,cACT0H,SAAU,WACVC,OAAQ,UACRC,UAAW,QALf,UAQG,OAAI,IAAIC,MAtOF,IAsOqBC,KAAI,SAACC,EAAKjC,GACpC,OACE,UAAC,IAAD,CAEA4B,SAAS,WACTT,GAAI,CACFU,OAAQ,WAEVrB,QAAS,SAAC0B,GAAD,OAAOnC,GAAYC,EAAnB,EANT,WAQE,SAAC,IAAD,CACEmB,GAAI,CACFgB,MAAOnC,GAASzD,GAAa,OAAS,KACtC6F,SAAU,SACVR,SAAU,YAJd,UAOE,SAAC,IAAD,OAEF,SAAC,IAAD,WACE,SAAC,IAAD,QAjBC5B,EAqBR,UAGL,mBACA,iBAAKO,UAAU,UAAf,WAEE,SAAC,IAAD,CAAQnG,WAAW,SAASmG,UAAU,MAAtC,UACE,SAAC,IAAD,CACAM,QAAQ,YACRE,MAAM,UACNsB,KAAK,SACL7B,QAAS/F,EAJT,mCAQD4B,IACC,SAAC,IAAD,CAAQjC,WAAW,SAASmG,UAAU,MAAtC,UACE,SAAC,IAAD,CACEM,QAAQ,YACRE,MAAM,UACNsB,KAAK,SACL7B,QAAS5F,EAJX,qCASF,SAIJ,gBAAK2F,UAAU,OAAf,UAEE,gBAAKA,UAAU,oBAAf,UACE,kBAAOA,UAAU,qBAAjB,UACE,8BACE,gBAAIA,UAAU,GAAd,WACE,eAAI+B,MAAM,GAAV,sBACA,wBACCjH,EAAMkH,OACLlH,EAAMkH,MAAMP,KAAI,SAAAO,GAAK,OACnB,yBAAmB,kBAAOhC,UAAU,GAAjB,SAAqBiC,IAAkBD,EAAMA,UAAvDA,EAAMpH,GADI,SAMA,IAAxBE,EAAMoH,gBACL,iCACE,2BACE,eAAIH,MAAM,MAAV,oBACA,eAAIA,MAAM,MAAV,UACE,cACE/B,UAAU,eACVO,MAAO,CAAEe,OAAQ,WACjBrB,QAAS,kBAlRdhC,EAkRgCjD,EAAMJ,GAjRzDd,EAAQ,aAAD,OAAcmE,GAAU,CAACtC,MAAMnB,SACtCY,GAAW6C,GAFO,IAACA,CAkRc,EAHX,SAKGjD,EAAMA,cAIb,2BACE,eAAI+G,MAAM,MAAV,wBACA,eAAIA,MAAM,MAAV,UACE,cACE/B,UAAU,eACVO,MAAO,CAAEe,OAAQ,WACjBrB,QAAS,kBAzRV/B,EAyRgChD,GAAUN,GAxRjEd,EAAQ,iBAAD,OAAkBoE,GAAc,CAACvC,MAAMnB,SAC9Ca,GAAe6C,GAFO,IAACA,CAyRU,EAHX,SAKGhD,GAAUA,oCAiB/B,0BACE,cAAG8E,UAAU,OAAb,SACKlF,EAAMqH,qBAGb,mBACA,gBAAKnC,UAAU,oBAAf,UACE,mBAAOA,UAAU,qBAAjB,WACE,4BACE,2BACE,eAAI+B,MAAM,MAAV,4BACA,eAAIA,MAAM,MAAV,6BACA,eAAIA,MAAM,MAAV,gCAEA,eAAIA,MAAM,MAAV,mCAGJ,4BACE,2BACE,wBACCjH,EAAMsH,YACLtH,EAAMsH,WAAWX,KAAI,SAAAY,GAAS,OAC5B,yBAAuB,kBAAOrC,UAAU,GAAjB,SAAqBqC,EAAUA,aAA7CA,EAAUzH,GADS,OAKhC,wBACGE,EAAMwH,cACLxH,EAAMwH,aAAab,KAAI,SAAAa,GAAY,OACjC,yBAA0B,kBAAOtC,UAAU,GAAjB,SAAqBsC,EAAaA,gBAAnDA,EAAa1H,GADW,OAKvC,wBACCE,EAAMyH,iBACLzH,EAAMyH,gBAAgBd,KAAI,SAAAc,GAAe,OACvC,yBAA6B,kBAAOvC,UAAU,GAAjB,SAAqBuC,EAAgBA,mBAAzDA,EAAgB3H,GADc,OAY3C,wBACGE,EAAM0H,cACH1H,EAAM0H,aAAaf,KAAI,SAAAe,GAAY,OACjC,yBAA0B,kBAAOxC,UAAU,GAAjB,SAAqBwC,EAAaA,gBAAnDA,EAAa5H,GADW,oBAanD,SAAC,IAAD,CACET,YAAaA,EACbF,KAAMA,EACN2B,SAAUA,GACVuB,QAAUvC,KAEZ,SAAC,IAAD,CACET,YAAaG,EACbL,KAAMG,EACNwB,SAAUA,GACVE,aAAgBA,GAChBqB,QAAUvC,MAOjB,C","sources":["components/videos/videoDetail.js"],"sourcesContent":["import { useEffect, useState } from \"react\";\r\nimport {useLocation, useNavigate, useParams, Link} from 'react-router-dom';\r\n\r\n\r\n//dependencias\r\nimport * as VideoServer from \"../../services/videoServer\";\r\nimport * as SerieServer from \"../../services/serie\";\r\nimport * as TemporadaServer from \"../../services/temporada\";\r\nimport VideoLoadingComponent from \"./videoLoading\";\r\n\r\nimport Rating from '@mui/material/Rating';\r\n\r\nimport * as HistorialUserServer from \"../../services/historialUser\";\r\nimport * as commentaryServer from \"../../services/commentary\";\r\nimport { useModal } from \"../../hooks/useModal\";\r\n\r\n//MaterialUI\r\nimport { Container,Button,Box,Stack,Typography } from '@mui/material';\r\nimport StarIcon from \"@mui/icons-material/Star\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport StarBorderIcon from \"@mui/icons-material/StarBorder\";\r\n//components\r\nimport \"../../styles/styles.css\";\r\nimport ModalComentario from \"./comentarioModal\";\r\nimport ModalComentarios from \"./listComentariosModal\";\r\nimport IframeVideo from \"./iframeVideo\";\r\nimport { ErrorBoundary } from \"react-error-boundary\";\r\nimport Swal from \"sweetalert2\";\r\nimport capitalizarNombre from \"../functions/capitalizarNombre\";\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  paper: {\r\n    marginTop: theme.spacing(0),\r\n    display: \"flex\",\r\n    flexDirection: \"column\",\r\n    alignItems: \"center\",\r\n  },\r\n}));\r\n/**\r\n * Función para mostrar el detalle de un video y guardar la puntuación.\r\n * @returns Componente que muestra el detalle de un video junto con el iframe\r\n */\r\nconst VideoDetail = () => {\r\n  \r\n  const history = useNavigate();\r\n  const [show, handleShow, handleClose] = useModal(false);\r\n  const [show2, handleShow2, handleClose2] = useModal(false);\r\n  const [histUsers, setHistUsers] = useState();  \r\n\r\n  const location = useLocation();\r\n  const { id } = useParams();\r\n  const [video, setVideo] = useState([]);\r\n  const [serie, setSerie] = useState([]);\r\n  const [temporada, setTemporada] = useState([]);\r\n  const [idSerie, setIdSerie] = useState([]);\r\n  const [idTemporada, setIdTemporada] = useState([]);\r\n\r\n  const [loading, setLoading] = useState(true);\r\n  const [duracion, setDuracion] = useState([]);\r\n  const [uploadDate, setUploadDate] = useState(null);\r\n  const [histUser, setHistUser] = useState(location.state);\r\n  const [commentaries, setCommentaries] = useState([]);\r\n  const [activeStar, setActiveStar] = useState(-1);\r\n  const totalStars = 5;\r\n\r\n  // superuser\r\n  const data = localStorage.getItem(\"user\");\r\n  const user = JSON.parse(data);\r\n\r\n  //\r\n  const [appState, setAppState] = useState({\r\n    loading: true\r\n  });\r\n  const VideoLoading = VideoLoadingComponent(video);\r\n  \r\n  /**\r\n   * Función para almacenar la duración del video en un formato adecuado para mostrarla en pantalla.\r\n   * @param {time} duration \r\n   * @returns Duración en el formato adecuado.\r\n   */\r\n  const changeDuration = (duration) => {\r\n    let tiempo = duration.split(':');\r\n    let new_duration = \"\";\r\n    if (tiempo) {\r\n      if (tiempo[0] !== \"00\") {\r\n        new_duration = tiempo[0] + \"h\";\r\n      }\r\n      if (tiempo[1] !== \"00\") {\r\n        new_duration = \" \" + new_duration + \" \" + tiempo[1] + \"min\";\r\n      }\r\n      /* if (tiempo[2] !==\"00\") {\r\n        new_duration = \" \"+new_duration+\" \"+tiempo[2]+\"s\";\r\n      } */\r\n    }\r\n    return new_duration.trim(); // trim() para eliminar cualquier espacio en blanco adicional\r\n  };\r\n  const entrarSerie = (serieId)=>{\r\n    history(`/seeSerie/${serieId}`,{state:histUsers});\r\n    setIdSerie(serieId)\r\n    //console.log(serieId);\r\n  }\r\n  const entrarTemporada = (temporadaId)=>{\r\n    history(`/seeTemporada/${temporadaId}`,{state:histUsers});\r\n    setIdTemporada(temporadaId)\r\n    //console.log(temporadaId);\r\n  }\r\n  const handleDelete = async (videoID) => {\r\n\r\n    Swal.fire({\r\n      title: \"¿Seguro quieres eliminar este video?\",\r\n      text: \"No podras recuperar la información\",\r\n      icon: \"warning\",\r\n      showCancelButton: true,\r\n      confirmButtonColor: \"#3085d6\",\r\n      cancelButtonColor: \"#d33\",\r\n      confirmButtonText: \"Eliminar video\"\r\n    }).then( async (result) => {\r\n      if (result.isConfirmed) {\r\n        await VideoServer.DeleteVideo(videoID)\r\n        history(\"/\");\r\n        Swal.fire({\r\n          title: \"Video eliminado con exito\",\r\n          text: \"\",\r\n          icon: \"success\"\r\n        });\r\n      }\r\n    });\r\n  };\r\n  \r\n  const getSerieAndTemporada = async (serieId,temporadaId) =>{\r\n\r\n      const responseSerie = await SerieServer.getSerie(serieId)\r\n     // console.log(responseSerie);\r\n      setSerie(responseSerie)\r\n\r\n      const responseTemporada = await TemporadaServer.getTemporada(temporadaId)\r\n      //console.log(responseTemporada);\r\n      setTemporada(responseTemporada)\r\n  }\r\n  const getHistorialUsers = async () => {\r\n    try {\r\n      const res = await HistorialUserServer.ListHistorial();\r\n      /* console.log(res); */\r\n      if (res && user.id) {\r\n        setActiveStar(res.user_score-1);\r\n        setHistUsers(res);\r\n        setLoading(false);\r\n  \r\n        // Suponiendo que `res` tiene la estructura { user_score: ... }\r\n        if (res.user_score !== undefined) {\r\n          setActiveStar(res.user_score - 1);\r\n        }\r\n      } else {\r\n        history(\"/loginuser\");\r\n      }\r\n    } catch (error) {\r\n      //console.log(error);\r\n    }\r\n  };\r\n  \r\n\r\n  \r\n  /**\r\n   * Función para obtener la información del video en reproducción\r\n   */\r\n  useEffect(() => {\r\n    getHistorialUsers();\r\n    \r\n    const getVideo = async (videoID) => {\r\n      const res = await VideoServer.getVideo(videoID);\r\n      const video = res;\r\n      //console.log(video);\r\n\r\n      setUploadDate(new Date(res.upload_date).toDateString());\r\n      setDuracion(changeDuration(res.duration));\r\n      setVideo({\r\n        ...video,\r\n        duration: duracion,           \r\n      });\r\n      setAppState({ loading: false});\r\n      \r\n    };\r\n\r\n    getVideo(id);\r\n    /*  */\r\n    const getCommentaries = async (videoId) => {\r\n      const res = await commentaryServer.ListCommentaryVideo({'video_id':videoId});\r\n      setCommentaries(res);\r\n    }\r\n    getCommentaries(id);\r\n    /*  */\r\n    getSerieAndTemporada(video.serie,video.temporada)\r\n  }, [duracion, id, setVideo, video.title_espanol, video.url_esp, video.url_vimeo_esp,video.serie_id]);\r\n  \r\n\r\n   \r\n  /**\r\n   * Función para cambiar la calificación del video.\r\n   * @param {int} index \r\n   */\r\n  const handleClick = async (index) => {\r\n    setActiveStar(index);\r\n    let cumulative_score = video.cumulative_score;\r\n    let number_votes = video.numberOfVotes;\r\n\r\n    if (histUser.user_score) {\r\n      cumulative_score = cumulative_score - histUser.user_score + index+1;\r\n      const score_video = cumulative_score/number_votes;\r\n      setHistUser({...histUser, user_score:index+1});\r\n      await VideoServer.partialUpdateVideo(video.id, {'cumulative_score': cumulative_score, 'score': score_video})\r\n\r\n    } else {\r\n      number_votes +=1;\r\n      cumulative_score = cumulative_score + index+1;\r\n      const score_video = cumulative_score/number_votes;\r\n      setHistUser({...histUser, user_score:index+1});\r\n      await VideoServer.partialUpdateVideo(video.id, {'cumulative_score': cumulative_score,'numberOfVotes': number_votes,'score': score_video})\r\n    }\r\n    await HistorialUserServer.updateHistorialUser(histUser.id,{'user_score': index+1});\r\n \r\n  };\r\n  \r\n  \r\n  const classes = useStyles();\r\n\r\n  if (!loading ) {\r\n    return (\r\n    <Container>\r\n      {appState.loading  ?  <VideoLoading isLoading={appState.loading} video={video} /> :\"\"}\r\n      <div>\r\n        <div className=\"d-flex justify-content-end\">\r\n          <button  onClick={() => window.history.back()} className=\"btn btn-light mt-4 my-2\" value=\"Volver\">Volver</button>\r\n        </div>\r\n      </div>\r\n      <div className={classes.paper}>\r\n        <h3>\r\n          {video.title_espanol}\r\n        </h3>\r\n      </div>\r\n      \r\n      <br></br>\r\n      <div className=\"row\">\r\n        <div className=\"col-8 iframe1 mx-auto\">\r\n          <IframeVideo\r\n            video={video}\r\n            >\r\n          </IframeVideo>\r\n        </div>\r\n        <div className=\"col infoVideo\" >\r\n          <div className=\"d-flex justify-content-between\">\r\n          <Typography component=\"h5\" variant=\"h6\" style={{color:\"white\",borderBottom:\"3px solid white\",paddingBottom:'5px'}} align=\"center\">\r\n            {video.duration}\r\n          </Typography>\r\n          <div className=\"d-flex justify-content-end text-capitalize  \">\r\n            <Box sx={{'& > legend': { mt: 2 }}} className={classes.containerRating}>\r\n              <div className=\"bg-secondary d-inline pt-2 px-1 rounded-2\">\r\n                <Rating name=\"read-only\" value={parseFloat(video.score)} precision={0.5} readOnly />\r\n              </div>\r\n            </Box>\r\n          </div>\r\n          </div>\r\n          <br></br>\r\n          {user.is_superuser &&\r\n            <div className=\"d-flex justify-content-between mb-2\">\r\n              \r\n              <button\r\n                onClick={() => history(`/updateVideo/${video.id}`)}\r\n                className=\"btn  btn-outline-primary form-control mx-1\"\r\n                \r\n                >\r\n                Actualizar\r\n              </button>\r\n              \r\n              <button\r\n                onClick={() => video.id && handleDelete(video.id)}\r\n                className=\" btn  btn-outline-danger form-control mx-1\"\r\n                >\r\n                Eliminar\r\n              </button>\r\n            </div>\r\n          }\r\n\r\n          <div className=\"d-flex justify-content-center flex-column align-items-center\">\r\n          <Typography component=\"h5\" variant=\"h6\">\r\n            Ayúdanos a calificar   &nbsp;\r\n            <Box \r\n              sx={{\r\n                display: \"inline-flex\",\r\n                position: \"relative\",\r\n                cursor: \"pointer\",\r\n                textAlign: \"left\",\r\n              }}\r\n            >\r\n              {[...new Array(totalStars)].map((arr, index) => {\r\n                return (\r\n                  <Box \r\n                  key={index} \r\n                  position=\"relative\"\r\n                  sx={{\r\n                    cursor: \"pointer\",\r\n                  }}\r\n                  onClick={(e) => handleClick(index)}\r\n                  >\r\n                    <Box \r\n                      sx={{\r\n                        width: index <= activeStar ? \"100%\" : \"0%\",\r\n                        overflow: \"hidden\",\r\n                        position: \"absolute\",\r\n                      }}\r\n                    >\r\n                      <StarIcon />\r\n                    </Box>\r\n                    <Box>\r\n                      <StarBorderIcon />\r\n                    </Box>\r\n                  </Box>\r\n                )\r\n              })}\r\n            </Box>\r\n          </Typography>\r\n          <br></br>\r\n          <div className=\"d-flex \">\r\n\r\n            <Stack  alignItems=\"center\" className=\"p-2\">\r\n              <Button \r\n              variant=\"contained\" \r\n              color=\"success\"\r\n              type=\"submit\"\r\n              onClick={handleShow}>\r\n                Realizar comentario\r\n              </Button>\r\n            </Stack>\r\n            {commentaries ? \r\n              <Stack  alignItems=\"center\" className=\"p-2\">\r\n                <Button \r\n                  variant=\"contained\" \r\n                  color=\"primary\"\r\n                  type=\"submit\"\r\n                  onClick={handleShow2}>\r\n                  Ver otros comentarios\r\n                </Button>\r\n              </Stack>\r\n              : \r\n              null\r\n            }\r\n          </div>\r\n            \r\n          <div className=\"mt-3\">\r\n\r\n            <div className=\"table-responsive \">\r\n              <table className=\"table  text-light \">\r\n                <thead>\r\n                  <tr className=\"\">\r\n                    <td scope=\"\">Autores</td>\r\n                    <td>\r\n                    {video.autor && (\r\n                      video.autor.map(autor => (\r\n                        <li key={autor.id}><small className=\"\">{capitalizarNombre(autor.autor)}</small></li>\r\n                      ))\r\n                    )}\r\n                    </td>\r\n                  </tr>\r\n                  {video.tipe_of_video === 2 && (\r\n                    <>\r\n                      <tr>\r\n                        <th scope=\"col\">Serie</th>\r\n                        <th scope=\"col\">\r\n                          <a \r\n                            className=\"text-primary\" \r\n                            style={{ cursor: \"pointer\" }} \r\n                            onClick={() => entrarSerie(serie.id)}\r\n                          >\r\n                            {serie.serie}\r\n                          </a>\r\n                        </th>\r\n                      </tr>\r\n                      <tr>\r\n                        <th scope=\"col\">Temporada</th>\r\n                        <th scope=\"col\">\r\n                          <a \r\n                            className=\"text-primary\" \r\n                            style={{ cursor: \"pointer\" }} \r\n                            onClick={() => entrarTemporada(temporada.id)}\r\n                          >\r\n                            {temporada.temporada}\r\n                          </a>\r\n                        </th>\r\n                      </tr>\r\n                    </>\r\n                  )}\r\n\r\n\r\n                </thead>\r\n              </table>\r\n            </div>\r\n            \r\n            \r\n            \r\n          </div>\r\n        </div>\r\n        </div>\r\n        <div>\r\n          <p className=\"mt-4\">\r\n              {video.description_esp}\r\n          </p>\r\n        </div>\r\n        <br/>\r\n        <div className=\"table-responsive \">\r\n          <table className=\"table  text-light \">\r\n            <thead>\r\n              <tr>\r\n                <th scope=\"col\">Categorías</th>\r\n                <th scope=\"col\">Especialidades</th>\r\n                <th scope=\"col\">Subespecialidades</th>\r\n                {/* <th scope=\"col\">Autores</th> */}\r\n                <th scope=\"col\">Palabras claves</th>\r\n              </tr>\r\n            </thead>\r\n            <tbody>\r\n              <tr>\r\n                <td>\r\n                {video.categorias && (\r\n                  video.categorias.map(categoria => (\r\n                    <li key={categoria.id}><small className=\"\">{categoria.categoria}</small></li>\r\n                  ))\r\n                )}\r\n                </td>\r\n                <td>\r\n                  {video.especialidad && (\r\n                    video.especialidad.map(especialidad => (\r\n                      <li key={especialidad.id}><small className=\"\">{especialidad.especialidad}</small></li>\r\n                    ))\r\n                  )}\r\n                </td>\r\n                <td>\r\n                {video.subEspecialidad && (\r\n                  video.subEspecialidad.map(subEspecialidad => (\r\n                    <li key={subEspecialidad.id}><small className=\"\">{subEspecialidad.subEspecialidad}</small></li>\r\n                  ))\r\n                )}\r\n                </td>\r\n                {/* <td>\r\n                {video.autor && (\r\n                  video.autor.map(autor => (\r\n                    <li key={autor.id}><small className=\"\">{autor.autor}</small></li>\r\n                  ))\r\n                )}\r\n                </td> */}\r\n                <td>\r\n                  {video.palabraClave && (\r\n                      video.palabraClave.map(palabraClave => (\r\n                        <li key={palabraClave.id}><small className=\"\">{palabraClave.palabraClave}</small></li>\r\n                      ))\r\n                  )}\r\n                </td>\r\n              </tr>\r\n              \r\n            </tbody>\r\n          </table>\r\n        </div>\r\n        \r\n      </div>\r\n      \r\n      <ModalComentario\r\n        handleClose={handleClose}\r\n        show={show}\r\n        histUser={histUser}\r\n        videoID ={id}\r\n      ></ModalComentario>\r\n      <ModalComentarios\r\n        handleClose={handleClose2}\r\n        show={show2}\r\n        histUser={histUser}\r\n        commentaries = {commentaries}\r\n        videoID= {id}\r\n      ></ModalComentarios>\r\n    </Container>\r\n    );\r\n  }\r\n  \r\n  \r\n};\r\n\r\nexport default VideoDetail;\r\n"],"names":["useStyles","makeStyles","theme","paper","marginTop","spacing","display","flexDirection","alignItems","history","useNavigate","useModal","show","handleShow","handleClose","show2","handleShow2","handleClose2","useState","histUsers","setHistUsers","location","useLocation","id","useParams","video","setVideo","serie","setSerie","temporada","setTemporada","setIdSerie","setIdTemporada","loading","setLoading","duracion","setDuracion","setUploadDate","state","histUser","setHistUser","commentaries","setCommentaries","activeStar","setActiveStar","data","localStorage","getItem","user","JSON","parse","appState","setAppState","VideoLoading","VideoLoadingComponent","changeDuration","duration","tiempo","split","new_duration","trim","handleDelete","videoID","Swal","title","text","icon","showCancelButton","confirmButtonColor","cancelButtonColor","confirmButtonText","then","result","isConfirmed","VideoServer","getSerieAndTemporada","serieId","temporadaId","SerieServer","responseSerie","TemporadaServer","responseTemporada","getHistorialUsers","HistorialUserServer","res","user_score","undefined","useEffect","getVideo","Date","upload_date","toDateString","getCommentaries","videoId","commentaryServer","title_espanol","url_esp","url_vimeo_esp","serie_id","handleClick","index","cumulative_score","number_votes","numberOfVotes","score_video","classes","isLoading","className","onClick","window","back","value","component","variant","style","color","borderBottom","paddingBottom","align","sx","mt","containerRating","name","parseFloat","score","precision","readOnly","is_superuser","position","cursor","textAlign","Array","map","arr","e","width","overflow","type","scope","autor","capitalizarNombre","tipe_of_video","description_esp","categorias","categoria","especialidad","subEspecialidad","palabraClave"],"sourceRoot":""}