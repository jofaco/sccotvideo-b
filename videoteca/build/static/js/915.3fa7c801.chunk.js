"use strict";(self.webpackChunkvideoteca_frontend=self.webpackChunkvideoteca_frontend||[]).push([[915],{7411:function(e,t,r){var n=r(4165),a=r(5861),o=r(3263),s=r(9778),c="https://sccotview.com/api/",i=["free/","free"],u=(localStorage.getItem("access_token"),o.Z.create({baseURL:c,timeout:5e3,headers:{"Content-Type":"multipart/form-data",accept:"application/json"}}));u.interceptors.request.use((function(e){var t=localStorage.getItem("access_token"),r=i.some((function(t){return e.url.includes(t)}));return t&&!r?e.headers.Authorization="JWT "+t:delete e.headers.Authorization,e})),u.interceptors.response.use((function(e){return e}),function(){var e=(0,a.Z)((0,n.Z)().mark((function e(t){var r,a,o,i,l;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.config,"undefined"!==typeof t.response){e.next=4;break}return console.warn("A server/network error occurred. Looks like CORS might be the problem."),e.abrupt("return",Promise.reject(t));case 4:if(401!==t.response.status||r.url!==c+"api/token/refresh/"){e.next=7;break}return window.location.href="/userlogin1/",e.abrupt("return",Promise.reject(t));case 7:if("token_not_valid"!==t.response.data.code||401!==t.response.status||"Unauthorized"!==t.response.statusText){e.next=37;break}if(!(a=localStorage.getItem("refresh_token"))){e.next=34;break}if(o=JSON.parse(s.lW.from(a.split(".")[1],"base64").toString()),i=Math.ceil(Date.now()/1e3),!(o.exp>i)){e.next=29;break}return e.prev=13,e.next=16,u.post("api/token/refresh/",{refresh:a});case 16:return l=e.sent,localStorage.setItem("access_token",l.data.access_token),localStorage.setItem("refresh_token",l.data.refresh_token),u.defaults.headers.Authorization="JWT "+l.data.access_token,r.headers.Authorization="JWT "+l.data.access_token,e.abrupt("return",u(r));case 24:e.prev=24,e.t0=e.catch(13),console.log(e.t0);case 27:e.next=32;break;case 29:console.log("Refresh token is expired",o.exp,i),localStorage.clear(),window.location.href="/userlogin2/";case 32:e.next=37;break;case 34:console.log("Refresh token not available."),localStorage.clear(),window.location.href="/userlogin3/";case 37:return 401===t.response.status&&localStorage.clear(),e.abrupt("return",Promise.reject(t));case 39:case"end":return e.stop()}}),e,null,[[13,24]])})));return function(t){return e.apply(this,arguments)}}()),t.Z=u},1915:function(e,t,r){r.r(t),r.d(t,{default:function(){return b}});var n=r(9439),a=r(2791),o=r(4165),s=r(5861),c=r(7689),i=(r(8040),r(1174),r(3712)),u=r(8596),l=r(3767),d=r(6151),p=r(2680),f=r(6779),h=r(3021),x=r(2918),m=r(184),v=function(e){var t=e.autores,r=(0,c.s0)(),v=(0,x.d)(!1),Z=(0,n.Z)(v,3),b=Z[0],g=Z[1],k=Z[2],j=(0,a.useState)(""),y=(0,n.Z)(j,2),w=y[0],S=y[1],C=(0,a.useState)({}),A=(0,n.Z)(C,2),N=A[0],_=A[1],I=(0,a.useState)(t),D=(0,n.Z)(I,2),P=D[0],R=D[1],T=(0,a.useState)({autores:""}),M=(0,n.Z)(T,2),z=M[0],F=M[1],E=(0,a.useContext)(p.Z).user,B=(0,u.Z)((function(e){return{paper:{marginTop:e.spacing(0),marginBottom:e.spacing(10),display:"flex",flexDirection:"column",alignItems:"center"},title1:{textAlign:"center",color:"white"}}})),J=function(){var e=(0,s.Z)((0,o.Z)().mark((function e(t){return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:S(t.id),_(t),F({autor:t.autor}),g(!0);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),L=function(){var e=(0,s.Z)((0,o.Z)().mark((function e(){return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:S(null),_({}),F({autor:""}),g(!0);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),O=function(){var e=(0,s.Z)((0,o.Z)().mark((function e(){var t,r;return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,(0,f.dM)();case 3:return t=e.sent,e.next=6,t;case 6:r=e.sent,R(r),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),console.log(e.t0);case 13:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(){return e.apply(this,arguments)}}();(0,a.useEffect)((function(){E&&E.is_superuser?(O(),S(null)):r("/loginuser")}),[]);var W=B();return E?(0,m.jsxs)(i.Z,{children:[(0,m.jsx)("div",{className:W.paper,children:(0,m.jsx)("h1",{className:"mt-4 text-center",children:"Autores"})}),(0,m.jsx)(l.Z,{alignItems:"center",children:(0,m.jsx)(d.Z,{variant:"contained",color:"success",type:"submit",onClick:function(){return L()},children:"Registrar Autor"})}),(0,m.jsx)("br",{}),(0,m.jsx)("br",{})," ",(0,m.jsx)("br",{}),(0,m.jsx)("div",{children:(0,m.jsx)("section",{className:"content",children:(0,m.jsx)("div",{className:"table-responsive table-condensed table-sm tabla",children:(0,m.jsxs)("table",{className:"table table-hover",id:"dataTableData",name:"dataTableData",style:{fontSize:11,textAlign:"center"},children:[(0,m.jsx)("thead",{className:W.title1,children:(0,m.jsxs)("tr",{children:[(0,m.jsx)("th",{style:{display:"none"},children:"Id"}),(0,m.jsx)("th",{children:"Codigo"}),(0,m.jsx)("th",{children:"Autor"}),(0,m.jsx)("th",{})]})}),(0,m.jsx)("tbody",{style:{backgroundColor:"white"},children:0===P.length?(0,m.jsx)("tr",{children:(0,m.jsx)("td",{colSpan:11,children:"No hay datos"})}):P.map((function(e,t){return(0,m.jsxs)("tr",{children:[(0,m.jsx)("td",{style:{display:"none"},children:e.id}),(0,m.jsx)("td",{children:e.id}),(0,m.jsx)("td",{children:e.autor}),(0,m.jsx)("td",{children:(0,m.jsx)("button",{className:"btn btn-outline-primary p-1 btn-sm float-right",type:"submit",onClick:function(){return J(e)},children:"editar"})})]},t)}))})]})})})}),(0,m.jsx)(h.Z,{handleClose:k,show:b,autor_id:w,currentItem:N,setAutores:R,setFormData:F,newData:z})]}):(0,m.jsx)("p",{style:{fontSize:"25px"},children:"Inicia sesi\xf3n para ver todos los videos!"})},Z=r(2516),b=function(){var e=(0,Z.Z)(v),t=(0,a.useContext)(p.Z).user,r=(0,a.useState)({loading:!0,autores:null}),o=(0,n.Z)(r,2),s=o[0],c=o[1];return(0,a.useEffect)((function(){f.dM().then((function(e){c({loading:!1,autores:e})}))}),[c]),t?(0,m.jsx)(i.Z,{children:(0,m.jsx)("div",{className:"App",children:(0,m.jsx)(e,{isLoading:s.loading,autores:s.autores})})}):(0,m.jsx)("p",{style:{fontSize:"25px"},children:"Inicia sesi\xf3n para ver todos los videos!"})}},3021:function(e,t,r){var n=r(4165),a=r(5861),o=r(4942),s=r(1413),c=r(5987),i=(r(2791),r(6779)),u=r(5342),l=r(3360),d=r(4437),p=r(8596),f=(r(9629),r(184)),h=["handleClose","show","autor_id","currentItem","setFormData","newData"],x=(0,p.Z)((function(e){return{containerModal:{border:"2px solid #ccc",borderRadius:50,boxShadow:"4px 4px 4px 0px #5a28e550"},containerForm:{height:"3rem",background:"#BFF",border:"2px solid #ccc",borderRadius:50,boxShadow:"4px 4px 4px 0px #5a28e550"},"@media (max-width: 720px)":{root:{display:"flex"}}}}));t.Z=function(e){var t=e.handleClose,r=e.show,p=e.autor_id,m=(e.currentItem,e.setFormData),v=e.newData,Z=(0,c.Z)(e,h),b=function(){var e=(0,a.Z)((0,n.Z)().mark((function e(t){var r,a,o;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),r=new FormData,e.prev=2,p){e.next=9;break}return r.append("autor",v.autor),e.next=7,i.iJ(r);case 7:e.next=12;break;case 9:return r.append("autor",v.autor),e.next=12,i.oT(p,r);case 12:return e.next=14,i.dM();case 14:return a=e.sent,e.next=17,a;case 17:o=e.sent,Z.setAutores(o),e.next=24;break;case 21:e.prev=21,e.t0=e.catch(2),console.log(e.t0);case 24:case"end":return e.stop()}}),e,null,[[2,21]])})));return function(t){return e.apply(this,arguments)}}(),g=x();return(0,f.jsxs)(u.Z,{show:r,onHide:t,"aria-labelledby":"example-custom-modal-styling-title",contentClassName:g.cloud,centered:!0,children:[(0,f.jsx)(u.Z.Header,{closeButton:!0,children:(0,f.jsx)(u.Z.Title,{id:"tituloModal",className:"text-dark mx-2 mt-2",children:(0,f.jsxs)("h4",{children:[p?"Editar ":"Registrar "," Autor"]})})}),(0,f.jsx)(u.Z.Body,{id:"bodyModal",children:(0,f.jsxs)(d.Z,{onSubmit:b,children:[(0,f.jsx)(d.Z.Group,{className:"mb-2 ",controlId:"exampleForm.ControlInput2",children:(0,f.jsx)(d.Z.Control,{type:"text",className:"form-control",rows:1,name:"autor",value:v.autor||"",onChange:function(e){var t=e.target.name;m((0,s.Z)((0,s.Z)({},v),{},(0,o.Z)({},t,e.target.value)))}})}),(0,f.jsxs)(u.Z.Footer,{children:[(0,f.jsx)(l.Z,{variant:"secondary",onClick:t,children:"Cerrar"}),(0,f.jsx)(l.Z,{variant:"primary",type:"submit",onClick:t,children:p?"Guardar Cambios":"Crear"})]})]})})]})}},2516:function(e,t,r){var n=r(1413),a=r(5987),o=(r(2791),r(184)),s=["isLoading"];t.Z=function(e){return function(t){var r=t.isLoading,c=(0,a.Z)(t,s);return r?(0,o.jsxs)("div",{className:"mt-4",style:{fontSize:"25px",display:"flex",justifyContent:"center",textAlign:"center",flexDirection:"column",alignItems:"center"},children:[(0,o.jsx)("div",{className:"spinner-grow text-light",role:"status",children:(0,o.jsx)("span",{className:"sr-only"})}),"Espera por favor"]}):(0,o.jsx)(e,(0,n.Z)({},c))}}},2918:function(e,t,r){r.d(t,{d:function(){return o}});var n=r(9439),a=r(2791),o=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=(0,a.useState)(e),r=(0,n.Z)(t,2),o=r[0],s=r[1],c=function(){return s(!0)},i=function(){return s(!1)};return[o,c,i]}},6779:function(e,t,r){r.d(t,{Pn:function(){return u},dM:function(){return c},iJ:function(){return i},oT:function(){return l}});var n=r(4165),a=r(5861),o=r(7411),s="https://sccotview.com/api/autores/",c=function(){var e=(0,a.Z)((0,n.Z)().mark((function e(){var t;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o.Z.get(s);case 2:if(t=e.sent,console.log(t),200!==t.status){e.next=8;break}return e.next=7,t.data;case 7:return e.abrupt("return",e.sent);case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),i=function(){var e=(0,a.Z)((0,n.Z)().mark((function e(t){var r;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o.Z.post(s,t);case 2:if(r=e.sent,console.log(r),200!==r.status&&201!==r.status){e.next=6;break}return e.abrupt("return",r.data);case 6:return e.abrupt("return",null);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),u=function(){var e=(0,a.Z)((0,n.Z)().mark((function e(t){var r;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,o.Z.get("".concat(s).concat(t));case 3:if(200!==(r=e.sent).status){e.next=6;break}return e.abrupt("return",r.data);case 6:e.next=12;break;case 8:return e.prev=8,e.t0=e.catch(0),console.error("\u274c Error al obtener el autor:",e.t0),e.abrupt("return",null);case 12:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}(),l=function(){var e=(0,a.Z)((0,n.Z)().mark((function e(t,r){var a;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o.Z.patch(s+t+"/",r);case 2:if(200!==(a=e.sent).status){e.next=5;break}return e.abrupt("return",a.data);case 5:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}()},3767:function(e,t,r){var n=r(4942),a=r(3366),o=r(7462),s=r(2791),c=r(1184),i=r(5682),u=r(8519),l=r(2466),d=r(6934),p=r(1402),f=r(184),h=["component","direction","spacing","divider","children"];function x(e,t){var r=s.Children.toArray(e).filter(Boolean);return r.reduce((function(e,n,a){return e.push(n),a<r.length-1&&e.push(s.cloneElement(t,{key:"separator-".concat(a)})),e}),[])}var m=(0,d.ZP)("div",{name:"MuiStack",slot:"Root",overridesResolver:function(e,t){return[t.root]}})((function(e){var t=e.ownerState,r=e.theme,a=(0,o.Z)({display:"flex",flexDirection:"column"},(0,c.k9)({theme:r},(0,c.P$)({values:t.direction,breakpoints:r.breakpoints.values}),(function(e){return{flexDirection:e}})));if(t.spacing){var s=(0,i.hB)(r),u=Object.keys(r.breakpoints.values).reduce((function(e,r){return("object"===typeof t.spacing&&null!=t.spacing[r]||"object"===typeof t.direction&&null!=t.direction[r])&&(e[r]=!0),e}),{}),d=(0,c.P$)({values:t.direction,base:u}),p=(0,c.P$)({values:t.spacing,base:u});"object"===typeof d&&Object.keys(d).forEach((function(e,t,r){if(!d[e]){var n=t>0?d[r[t-1]]:"column";d[e]=n}}));a=(0,l.Z)(a,(0,c.k9)({theme:r},p,(function(e,r){return{"& > :not(style) + :not(style)":(0,n.Z)({margin:0},"margin".concat((a=r?d[r]:t.direction,{row:"Left","row-reverse":"Right",column:"Top","column-reverse":"Bottom"}[a])),(0,i.NA)(s,e))};var a})))}return a=(0,c.dt)(r.breakpoints,a)})),v=s.forwardRef((function(e,t){var r=(0,p.Z)({props:e,name:"MuiStack"}),n=(0,u.Z)(r),s=n.component,c=void 0===s?"div":s,i=n.direction,l=void 0===i?"column":i,d=n.spacing,v=void 0===d?0:d,Z=n.divider,b=n.children,g=(0,a.Z)(n,h),k={direction:l,spacing:v};return(0,f.jsx)(m,(0,o.Z)({as:c,ownerState:k,ref:t},g,{children:Z?x(b,Z):b}))}));t.Z=v},8519:function(e,t,r){r.d(t,{Z:function(){return u}});var n=r(3433),a=r(7462),o=r(3366),s=r(2466),c=r(7416),i=["sx"];function u(e){var t,r=e.sx,u=function(e){var t,r,n={systemProps:{},otherProps:{}},a=null!=(t=null==e||null==(r=e.theme)?void 0:r.unstable_sxConfig)?t:c.Z;return Object.keys(e).forEach((function(t){a[t]?n.systemProps[t]=e[t]:n.otherProps[t]=e[t]})),n}((0,o.Z)(e,i)),l=u.systemProps,d=u.otherProps;return t=Array.isArray(r)?[l].concat((0,n.Z)(r)):"function"===typeof r?function(){var e=r.apply(void 0,arguments);return(0,s.P)(e)?(0,a.Z)({},l,e):l}:(0,a.Z)({},l,r),(0,a.Z)({},d,{sx:t})}},8040:function(){},9629:function(){}}]);
//# sourceMappingURL=915.3fa7c801.chunk.js.map