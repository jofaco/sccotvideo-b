"use strict";(self.webpackChunkvideoteca_frontend=self.webpackChunkvideoteca_frontend||[]).push([[504],{7411:function(e,n,t){var r=t(4165),a=t(5861),s=t(3263),o=t(9778),c="https://sccotview.com/api/",i=s.Z.create({baseURL:c,timeout:5e3,headers:{Authorization:localStorage.getItem("access_token")?"JWT "+localStorage.getItem("access_token"):null,"Content-Type":"multipart/form-data",accept:"application/json"}});i.interceptors.response.use((function(e){return e}),function(){var e=(0,a.Z)((0,r.Z)().mark((function e(n){var t,a,s,u;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=n.config,"undefined"!==typeof n.response){e.next=4;break}return console.warn("A server/network error occurred. Looks like CORS might be the problem. Sorry about this - we will get it fixed shortly."),e.abrupt("return",Promise.reject(n));case 4:if(401!==n.response.status||t.url!==c+"api/token/refresh/"){e.next=7;break}return window.location.href="/loginuser/",e.abrupt("return",Promise.reject(n));case 7:if("token_not_valid"!==n.response.data.code||401!==n.response.status||"Unauthorized"!==n.response.statusText){e.next=26;break}if(!(a=localStorage.getItem("refresh_token"))){e.next=24;break}if(s=JSON.parse(o.lW.from(a.split(".")[1],"base64").toString()),u=Math.ceil(Date.now()/1e3),console.log(s.exp),!(s.exp>u)){e.next=17;break}return e.abrupt("return",i.post("api/token/refresh/",{refresh:a}).then((function(e){return localStorage.setItem("access_token",e.data.access_token),localStorage.setItem("refresh_token",e.data.refresh_token),i.defaults.headers.Authorization="JWT "+e.data.access_token,t.headers.Authorization="JWT "+e.data.access_token,i(t)})).catch((function(e){console.log(e)})));case 17:console.log("Refresh token is expired",s.exp,u),window.localStorage.removeItem("access_token"),window.localStorage.removeItem("refresh_token"),window.localStorage.removeItem("user"),window.location.href="/loginuser/";case 22:e.next=26;break;case 24:console.log("Refresh token not available."),window.location.href="/loginuser/";case 26:return 401===n.response.status&&(window.location.href="/loginuser/"),e.abrupt("return",Promise.reject(n));case 28:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}()),n.Z=i},6833:function(e,n,t){t.r(n),t.d(n,{default:function(){return B}});var r=t(4165),a=t(5861),s=t(9439),o=t(2791),c=t(7689),i=t(2680),u=t(746),l=(t.p,t(8733)),d=t(5764),f=t(2918),p=t(4942),h=t(1413),m=t(5987),x=t(5342),v=t(3360),Z=t(4437),g=t(1830),b=t.n(g),w=t(184),j=["categorias","handleClose","show"],k=function(e){var n=e.categorias,t=e.handleClose,i=e.show,u=(0,m.Z)(e,j),d=(0,c.s0)(),f=(0,o.useState)({categoria:null}),g=(0,s.Z)(f,2),k=g[0],y=g[1],C=function(){var e=(0,a.Z)((0,r.Z)().mark((function e(n){var t,a;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.preventDefault(),t=new FormData,console.log(u.user.id),e.prev=3,t.append("usuario",u.user.id),t.append("categoria",k.categoria),e.next=8,l.bb(t);case 8:a=e.sent,b().fire({title:a.message,icon:"success"}).then((function(e){d("/Perfil"),window.location.reload()})),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(3),console.log(e.t0);case 15:case"end":return e.stop()}}),e,null,[[3,12]])})));return function(n){return e.apply(this,arguments)}}();return(0,w.jsxs)(x.Z,{show:i,onHide:t,"aria-labelledby":"contained-modal-title-vcenter",centered:!0,children:[(0,w.jsx)(x.Z.Header,{closeButton:!0,children:(0,w.jsx)(x.Z.Title,{id:"tituloModal",children:"Ingrese una preferencia"})}),(0,w.jsx)(x.Z.Body,{id:"bodyModal",children:(0,w.jsxs)(Z.Z,{onSubmit:C,children:[(0,w.jsxs)(Z.Z.Group,{className:"mb-3",controlId:"exampleForm.ControlInput1",children:[(0,w.jsx)(Z.Z.Label,{children:"Categor\xedas"}),(0,w.jsxs)(Z.Z.Select,{name:"categoria",autoFocus:!0,onChange:function(e){var n=e.target,t=n.name,r=Array.from(n.selectedOptions,(function(e){return e.value}));console.log(r),y((0,h.Z)((0,h.Z)({},k),{},(0,p.Z)({},t,r)))},children:[(0,w.jsx)("option",{children:"Seleccione una Categor\xeda"}),n&&n.map((function(e,n){return(0,w.jsx)("option",{value:e.id,children:e.categoria},n)}))]})]}),(0,w.jsxs)(x.Z.Footer,{children:[(0,w.jsx)(v.Z,{variant:"secondary",onClick:t,children:"Close"}),(0,w.jsx)(v.Z,{variant:"primary",type:"submit",onClick:t,children:"Save Changes"})]})]})})]})},y=["handleClose","show"],C=function(e){var n=e.handleClose,t=e.show,i=(0,m.Z)(e,y),l=(0,c.s0)(),d=(0,o.useState)(null),f=(0,s.Z)(d,2),p=f[0],h=f[1],g=function(){var e=(0,a.Z)((0,r.Z)().mark((function e(n){var t,a;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.preventDefault(),t=new FormData,e.prev=2,t.append("image",p),e.next=6,u.gO(i.user.id,t);case 6:a=e.sent,console.log(a.message),l("/Perfil"),window.location.reload(),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(2),console.log(e.t0);case 15:case"end":return e.stop()}}),e,null,[[2,12]])})));return function(n){return e.apply(this,arguments)}}();return(0,w.jsxs)(x.Z,{show:t,onHide:n,"aria-labelledby":"contained-modal-title-vcenter",centered:!0,children:[(0,w.jsx)(x.Z.Header,{closeButton:!0,children:(0,w.jsx)(x.Z.Title,{id:"tituloModal",children:"Cambiar Imagen de Perfil"})}),(0,w.jsx)(x.Z.Body,{id:"bodyModal",children:(0,w.jsxs)(Z.Z,{onSubmit:g,children:[(0,w.jsxs)(Z.Z.Group,{className:"mb-3",controlId:"exampleForm.ControlInput1",children:[(0,w.jsx)(Z.Z.Label,{children:"Imagen de Perfil"}),(0,w.jsx)("input",{className:"form-control",id:"min_image",name:"min_image",onChange:function(e){h(e.target.files[0])},type:"file",placeholder:"Imagen para Email"})]}),(0,w.jsxs)(x.Z.Footer,{children:[(0,w.jsx)(v.Z,{variant:"secondary",onClick:n,children:"Close"}),(0,w.jsx)(v.Z,{variant:"primary",type:"submit",onClick:n,children:"Save Changes"})]})]})})]})},N=t(4554),P=t(8596),S=["prefUsers","handleShow"],_=function(e){var n=e.prefUsers,t=e.handleShow,s=((0,m.Z)(e,S),function(){var e=(0,a.Z)((0,r.Z)().mark((function e(t){var a;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log(t),console.log(n),e.next=4,(0,l.Bx)(t);case 4:a=e.sent,console.log(a);case 6:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}()),o=(0,P.Z)((function(e){return{title1:{textAlign:"center"},"@media only screen and (max-width: 1000px)":{imagenPerfil:{width:"100%"}}}}))();return(0,w.jsxs)("div",{className:"container container1",children:[(0,w.jsx)("h3",{className:o.title1,children:"Preferencias"}),n?(0,w.jsxs)(w.Fragment,{children:[(0,w.jsx)("div",{className:"container ",children:(0,w.jsx)(N.Z,{sx:{display:"flex",justifyContent:"center",flexWrap:"wrap"},className:"btn-group btn-group-lg",children:(0,w.jsx)("div",{className:"d-flex flex-wrap",children:n&&n.map((function(e,n){return(0,w.jsxs)("span",{sx:{color:"#fff"},className:"bg-white px-3 py-2 rounded m-2 border-0 text-dark d-flex justify-content-between align-items-center "+o.botonList,children:[(0,w.jsx)("h6",{className:"pt-2 pe-4",children:e.categoria})," ",(0,w.jsx)("button",{className:"btn btn-danger",onClick:function(){s(e.id)},children:"\u2715"})]},n)}))})})}),(0,w.jsx)("br",{}),(0,w.jsx)("div",{className:"container",children:(0,w.jsx)("div",{className:"d-grid  col-8  mx-auto",children:(0,w.jsx)("button",{className:"btn btn-secondary btn-lg",type:"submit",onClick:t,children:"Ingresar Preferencia"})})})]}):(0,w.jsx)(N.Z,{display:"flex",mt:5,justifyContent:"space-between",children:(0,w.jsx)("div",{className:"d-grid  col-8  mx-auto",children:(0,w.jsx)("button",{className:"btn btn-secondary btn-lg",type:"submit",onClick:t,children:"Ingresar Preferencia"})})})]})},I=t(3712),A=t(2592),B=function(){var e=(0,c.s0)(),n=(0,o.useContext)(i.Z).user,t=(0,o.useState)(null),p=(0,s.Z)(t,2),h=p[0],m=p[1],x=(0,o.useState)(null),v=(0,s.Z)(x,2),Z=v[0],g=v[1],b=(0,o.useState)(),j=(0,s.Z)(b,2),y=j[0],N=j[1],S=(0,f.d)(!1),B=(0,s.Z)(S,3),F=B[0],R=B[1],T=B[2],z=(0,f.d)(!1),L=(0,s.Z)(z,3),M=L[0],W=L[1],O=L[2],U=(0,P.Z)((function(e){return{imagenPerfil:{display:"flex",maxWidth:200,marginBottom:e.spacing(2),margin:"auto",borderRadius:1e3},contenedorImg:{flexWrap:"wrap"},botonList:{margin:e.spacing(3,1),color:"black"},title1:{textAlign:"center"},"@media only screen and (max-width: 1000px)":{imagenPerfil:{width:"100%"}}}})),D=function(){var e=(0,a.Z)((0,r.Z)().mark((function e(n){var t;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,u.PR)(n);case 2:t=e.sent,m(t);case 4:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),E=function(){var e=(0,a.Z)((0,r.Z)().mark((function e(){var t;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,l.kt({user_id:n.id});case 3:t=e.sent,g(t),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}(),H=function(){var e=(0,a.Z)((0,r.Z)().mark((function e(){var n,t;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,d.wb();case 3:return n=e.sent,e.next=6,n;case 6:t=e.sent,N(t),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),console.log(e.t0);case 13:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(){return e.apply(this,arguments)}}();(0,o.useEffect)((function(){n?(D(n.id),E(),H()):e("/loginuser")}),[]);var J=U();return n?(0,w.jsxs)(I.Z,{children:[h&&h.image?(0,w.jsxs)("div",{className:"row",children:[(0,w.jsx)("h1",{id:"tituloName",children:(0,w.jsx)("center",{children:h.name_odoo})}),(0,w.jsxs)("div",{className:"col-md-5 "+J.contenedorImg,children:[(0,w.jsx)(A.Z,{src:"https://sccotview.com"+h.image,className:J.imagenPerfil}),(0,w.jsx)("div",{className:"d-grid  col-8  mx-auto",children:(0,w.jsx)("button",{className:"btn btn-primary btn-lg",id:"submitButton",type:"submit",onClick:W,children:"Actualizar"})})]}),(0,w.jsx)("div",{className:"col-md-7",children:(0,w.jsx)(_,{prefUsers:Z,handleShow:R})})]}):(0,w.jsxs)("div",{className:"row",children:[(0,w.jsx)("h3",{id:"tituloName",children:(0,w.jsx)("center",{children:n.name_odoo})}),(0,w.jsxs)("div",{className:"col-md-5 "+J.contenedorImg,children:[(0,w.jsx)(A.Z,{src:"https://sccotview.com/media/perfil/default.jpg",className:J.imagenPerfil}),(0,w.jsx)("div",{className:"d-grid  col-8  mx-auto",children:(0,w.jsx)("button",{className:"btn btn-primary ",type:"submit",onClick:W,children:"Actualizar"})})]}),(0,w.jsx)("div",{className:"col-md-7",children:(0,w.jsx)(_,{prefUsers:Z,handleShow:R})})]}),(0,w.jsx)(k,{categorias:y,handleClose:T,show:F,user:h}),(0,w.jsx)(C,{handleClose:O,show:M,user:h})]}):(0,w.jsx)("p",{style:{fontSize:"25px"},children:"Inicia sesi\xf3n para ver todos los videos!"})}},2918:function(e,n,t){t.d(n,{d:function(){return s}});var r=t(9439),a=t(2791),s=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],n=(0,a.useState)(e),t=(0,r.Z)(n,2),s=t[0],o=t[1],c=function(){return o(!0)},i=function(){return o(!1)};return[s,c,i]}},746:function(e,n,t){t.d(n,{PR:function(){return u},gO:function(){return l},m3:function(){return i}});var r=t(4165),a=t(5861),s=t(3263),o=t(7411),c="https://sccotview.com/api/",i=function(){var e=(0,a.Z)((0,r.Z)().mark((function e(n){var t;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s.Z.post(c+"login/",n);case 2:return t=e.sent,console.log(n),e.abrupt("return",t);case 5:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),u=function(){var e=(0,a.Z)((0,r.Z)().mark((function e(n){var t;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o.Z.get("".concat(c,"users/").concat(n));case 2:if(200!==(t=e.sent).status){e.next=8;break}return console.log(t),e.next=7,t.data;case 7:return e.abrupt("return",e.sent);case 8:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),l=function(){var e=(0,a.Z)((0,r.Z)().mark((function e(n,t){var a;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o.Z.patch("".concat(c,"users/").concat(n,"/"),t);case 2:if(200!==(a=e.sent).status){e.next=7;break}return e.next=6,a.data;case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}}),e)})));return function(n,t){return e.apply(this,arguments)}}()},5764:function(e,n,t){t.d(n,{CX:function(){return i},wb:function(){return c},yr:function(){return u}});var r=t(4165),a=t(5861),s=t(7411),o="https://sccotview.com/api/categorias/",c=function(){var e=(0,a.Z)((0,r.Z)().mark((function e(){var n;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s.Z.get(o);case 2:if(200!==(n=e.sent).status){e.next=7;break}return e.next=6,n.data;case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),i=function(){var e=(0,a.Z)((0,r.Z)().mark((function e(n){var t;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s.Z.post(o,n);case 2:if(200!==(t=e.sent).status){e.next=7;break}return e.next=6,t.data;case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),u=function(){var e=(0,a.Z)((0,r.Z)().mark((function e(n,t){var a;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s.Z.patch(o+n+"/",t);case 2:if(200!==(a=e.sent).status){e.next=5;break}return e.abrupt("return",a.data);case 5:case"end":return e.stop()}}),e)})));return function(n,t){return e.apply(this,arguments)}}()},8733:function(e,n,t){t.d(n,{Bx:function(){return d},bb:function(){return u},kt:function(){return l}});var r=t(4165),a=t(5861),s=t(1830),o=t.n(s),c=t(7411),i="https://sccotview.com/api/gustos_by_users/",u=function(){var e=(0,a.Z)((0,r.Z)().mark((function e(n){var t;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c.Z.post(i,n);case 2:if(200!==(t=e.sent).status){e.next=7;break}return e.next=6,t.data;case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),l=function(){var e=(0,a.Z)((0,r.Z)().mark((function e(n){var t;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c.Z.post("".concat(i,"list_by_user/"),n);case 2:if(200!==(t=e.sent).status){e.next=7;break}return e.next=6,t.data;case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),d=function(){var e=(0,a.Z)((0,r.Z)().mark((function e(n){var t;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c.Z.delete("".concat(i).concat(n));case 2:if(200!==(t=e.sent).status){e.next=8;break}return o().fire({title:t.data.message,icon:"success"}).then((function(e){window.location.reload()})).catch((function(){o().fire({title:"Lo sentimos no fue posible eliminar la preferencia, intenta nuevamente mas tarde",icon:"warning"})})),e.next=7,t.data;case 7:return e.abrupt("return",e.sent);case 8:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}()},4554:function(e,n,t){t.d(n,{Z:function(){return m}});var r=t(7462),a=t(3366),s=t(2791),o=t(8182),c=t(2421),i=t(104),u=t(8519),l=t(886),d=t(184),f=["className","component"];var p=t(5902),h=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.defaultTheme,t=e.defaultClassName,p=void 0===t?"MuiBox-root":t,h=e.generateClassName,m=(0,c.ZP)("div",{shouldForwardProp:function(e){return"theme"!==e&&"sx"!==e&&"as"!==e}})(i.Z),x=s.forwardRef((function(e,t){var s=(0,l.Z)(n),c=(0,u.Z)(e),i=c.className,x=c.component,v=void 0===x?"div":x,Z=(0,a.Z)(c,f);return(0,d.jsx)(m,(0,r.Z)({as:v,ref:t,className:(0,o.Z)(i,h?h(p):p),theme:s},Z))}));return x}({defaultTheme:(0,t(7107).Z)(),defaultClassName:"MuiBox-root",generateClassName:p.Z.generate}),m=h},8519:function(e,n,t){t.d(n,{Z:function(){return u}});var r=t(3433),a=t(7462),s=t(3366),o=t(2466),c=t(7416),i=["sx"];function u(e){var n,t=e.sx,u=function(e){var n,t,r={systemProps:{},otherProps:{}},a=null!=(n=null==e||null==(t=e.theme)?void 0:t.unstable_sxConfig)?n:c.Z;return Object.keys(e).forEach((function(n){a[n]?r.systemProps[n]=e[n]:r.otherProps[n]=e[n]})),r}((0,s.Z)(e,i)),l=u.systemProps,d=u.otherProps;return n=Array.isArray(t)?[l].concat((0,r.Z)(t)):"function"===typeof t?function(){var e=t.apply(void 0,arguments);return(0,o.P)(e)?(0,a.Z)({},l,e):l}:(0,a.Z)({},l,t),(0,a.Z)({},d,{sx:n})}},2592:function(e,n,t){var r=t(1413),a=t(5987),s=t(1694),o=t.n(s),c=t(2791),i=t(2007),u=t.n(i),l=t(162),d=t(184),f=["bsPrefix","className","fluid","rounded","roundedCircle","thumbnail"],p=(u().string,u().bool,u().bool,u().bool,u().bool,c.forwardRef((function(e,n){var t=e.bsPrefix,s=e.className,c=e.fluid,i=e.rounded,u=e.roundedCircle,p=e.thumbnail,h=(0,a.Z)(e,f);return t=(0,l.vE)(t,"img"),(0,d.jsx)("img",(0,r.Z)((0,r.Z)({ref:n},h),{},{className:o()(s,c&&"".concat(t,"-fluid"),i&&"rounded",u&&"rounded-circle",p&&"".concat(t,"-thumbnail"))}))})));p.displayName="Image",p.defaultProps={fluid:!1,rounded:!1,roundedCircle:!1,thumbnail:!1},n.Z=p}}]);
//# sourceMappingURL=504.e46db4f2.chunk.js.map