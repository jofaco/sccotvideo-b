"use strict";(self.webpackChunkvideoteca_frontend=self.webpackChunkvideoteca_frontend||[]).push([[838],{7411:function(e,r,t){var n=t(4165),a=t(5861),o=t(3263),s=t(9778),i="https://sccotview.com/api/",c=["free/","free"],u=(localStorage.getItem("access_token"),o.Z.create({baseURL:i,timeout:5e3,headers:{"Content-Type":"multipart/form-data",accept:"application/json"}}));u.interceptors.request.use((function(e){var r=localStorage.getItem("access_token"),t=c.some((function(r){return e.url.includes(r)}));return r&&!t?e.headers.Authorization="JWT "+r:delete e.headers.Authorization,e})),u.interceptors.response.use((function(e){return e}),function(){var e=(0,a.Z)((0,n.Z)().mark((function e(r){var t,a,o,c,l;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=r.config,"undefined"!==typeof r.response){e.next=4;break}return console.warn("A server/network error occurred. Looks like CORS might be the problem."),e.abrupt("return",Promise.reject(r));case 4:if(401!==r.response.status||t.url!==i+"api/token/refresh/"){e.next=7;break}return window.location.href="/userlogin1/",e.abrupt("return",Promise.reject(r));case 7:if("token_not_valid"!==r.response.data.code||401!==r.response.status||"Unauthorized"!==r.response.statusText){e.next=37;break}if(!(a=localStorage.getItem("refresh_token"))){e.next=34;break}if(o=JSON.parse(s.lW.from(a.split(".")[1],"base64").toString()),c=Math.ceil(Date.now()/1e3),!(o.exp>c)){e.next=29;break}return e.prev=13,e.next=16,u.post("api/token/refresh/",{refresh:a});case 16:return l=e.sent,localStorage.setItem("access_token",l.data.access_token),localStorage.setItem("refresh_token",l.data.refresh_token),u.defaults.headers.Authorization="JWT "+l.data.access_token,t.headers.Authorization="JWT "+l.data.access_token,e.abrupt("return",u(t));case 24:e.prev=24,e.t0=e.catch(13),console.log(e.t0);case 27:e.next=32;break;case 29:console.log("Refresh token is expired",o.exp,c),localStorage.clear(),window.location.href="/userlogin2/";case 32:e.next=37;break;case 34:console.log("Refresh token not available."),localStorage.clear(),window.location.href="/userlogin3/";case 37:return 401===r.response.status&&localStorage.clear(),e.abrupt("return",Promise.reject(r));case 39:case"end":return e.stop()}}),e,null,[[13,24]])})));return function(r){return e.apply(this,arguments)}}()),r.Z=u},2838:function(e,r,t){t.r(r),t.d(r,{default:function(){return N}});var n=t(9439),a=t(2791),o=t(4165),s=t(5861),i=t(7689),c=(t(8040),t(1174),t(3712)),u=t(8596),l=t(3767),d=t(6151),p=t(2680),f=t(6639),m=t(4942),h=t(1413),x=t(5987),v=t(3927),Z=t(5342),b=t(3360),j=t(4437),g=(t(9629),t(184)),k=["handleClose","show","temporada_id","currentItem","setFormData","newData","listSeries"],y=(0,u.Z)((function(e){return{containerModal:{border:"2px solid #ccc",borderRadius:50,boxShadow:"4px 4px 4px 0px #5a28e550"},containerForm:{height:"3rem",background:"#BFF",border:"2px solid #ccc",borderRadius:50,boxShadow:"4px 4px 4px 0px #5a28e550"},"@media (max-width: 720px)":{root:{display:"flex"}}}})),w=function(e){var r=e.handleClose,t=e.show,n=e.temporada_id,a=(e.currentItem,e.setFormData),i=e.newData,c=e.listSeries,u=(0,x.Z)(e,k),l=function(e){var r=e.target.name;a((0,h.Z)((0,h.Z)({},i),{},(0,m.Z)({},r,e.target.value)))},d=function(){var e=(0,s.Z)((0,o.Z)().mark((function e(r){var t,a,s;return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r.preventDefault(),t=new FormData,e.prev=2,n){e.next=13;break}return t.append("temporada",i.temporada),t.append("temporada_letras",i.temporada_letras),t.append("temporada_numero",i.temporada_numero),t.append("description",i.description),t.append("serie",i.serie),e.next=11,f.DN(t);case 11:e.next=20;break;case 13:return t.append("temporada",i.temporada),t.append("temporada_letras",i.temporada_letras),t.append("temporada_numero",i.temporada_numero),t.append("description",i.description),t.append("serie",i.serie),e.next=20,f.C1(n,t);case 20:return e.next=22,f.xI();case 22:return a=e.sent,e.next=25,a;case 25:s=e.sent,u.setTemporadas(s),e.next=32;break;case 29:e.prev=29,e.t0=e.catch(2),console.log(e.t0);case 32:case"end":return e.stop()}}),e,null,[[2,29]])})));return function(r){return e.apply(this,arguments)}}(),p=y();return(0,g.jsx)(v.S,{children:(0,g.jsxs)(Z.Z,{show:t,onHide:r,"aria-labelledby":"example-custom-modal-styling-title",contentClassName:p.cloud,centered:!0,children:[(0,g.jsx)(Z.Z.Header,{closeButton:!0,children:(0,g.jsx)(Z.Z.Title,{id:"tituloModal",children:(0,g.jsx)("h2",{children:n?"Editar Registro":"Crear Registro"})})}),(0,g.jsx)(Z.Z.Body,{id:"bodyModal",children:(0,g.jsxs)(j.Z,{onSubmit:d,children:[(0,g.jsx)(j.Z.Group,{className:"mb-2 ",controlId:"exampleForm.ControlInput1",children:(0,g.jsx)(j.Z.Control,{type:"text",name:"temporada",placeholder:"Nombre de la temporada",value:i.temporada||"",onChange:l})}),(0,g.jsx)("br",{}),(0,g.jsx)(j.Z.Group,{className:"mb-2 ",controlId:"exampleForm.ControlInput1",children:(0,g.jsx)(j.Z.Control,{type:"text",name:"temporada_letras",placeholder:"Temporada en letras",value:i.temporada_letras||"",onChange:l})}),(0,g.jsx)("br",{}),(0,g.jsx)(j.Z.Group,{className:"mb-2 ",controlId:"exampleForm.ControlInput1",children:(0,g.jsx)(j.Z.Control,{type:"number",name:"temporada_numero",placeholder:"Temporada en n\xfamero",value:i.temporada_numero||null,onChange:l})}),(0,g.jsx)("br",{}),(0,g.jsx)(j.Z.Group,{className:"mb-2 ",controlId:"exampleForm.ControlInput1",children:(0,g.jsx)(j.Z.Control,{as:"textarea",rows:3,name:"description",placeholder:"Descripci\xf3n de la temporada",value:i.description||"",onChange:l})}),(0,g.jsx)("br",{}),(0,g.jsx)(j.Z.Group,{className:"mb-2 ",controlId:"exampleForm.ControlInput1",children:(0,g.jsx)(j.Z.Select,{name:"serie",placeholder:"Serie a la que pertenece",value:i.serie||2,onChange:function(e){var r=e.target,t=r.name,n=Array.from(r.selectedOptions,(function(e){return e.value}));a((0,h.Z)((0,h.Z)({},i),{},(0,m.Z)({},t,n)))},children:c.map((function(e,r){return(0,g.jsx)("option",{value:e.id,children:e.serie},e.id)}))})}),(0,g.jsx)("br",{}),(0,g.jsxs)(Z.Z.Footer,{children:[(0,g.jsx)(b.Z,{variant:"secondary",onClick:r,children:"Close"}),(0,g.jsx)(b.Z,{variant:"primary",type:"submit",onClick:r,children:n?"Guardar Cambios":"Crear"})]})]})})]})})},_=t(6542),C=t(2918),S=function(e){var r=e.temporadas,t=(0,i.s0)(),m=(0,a.useState)(null),h=(0,n.Z)(m,2),x=h[0],v=h[1],Z=(0,C.d)(!1),b=(0,n.Z)(Z,3),j=b[0],k=b[1],y=b[2],S=(0,a.useState)(""),I=(0,n.Z)(S,2),N=I[0],D=I[1],T=(0,a.useState)(null),P=(0,n.Z)(T,2),A=P[0],F=P[1],R=(0,a.useState)(r),z=(0,n.Z)(R,2),E=z[0],G=z[1],B=(0,a.useState)({temporada:"",temporada_letras:"",temporada_numero:0,description:"",serie:1}),L=(0,n.Z)(B,2),M=L[0],O=L[1],J=(0,a.useContext)(p.Z).user,W=(0,u.Z)((function(e){return{paper:{marginTop:e.spacing(0),marginBottom:e.spacing(10),display:"flex",flexDirection:"column",alignItems:"center"},title1:{textAlign:"center",color:"white"}}})),H=function(){var e=(0,s.Z)((0,o.Z)().mark((function e(r){return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:D(r.id),F(r),O({temporada:r.temporada,temporada_letras:r.temporada_letras,temporada_numero:r.temporada_numero,description:r.description,serie:r.serie}),k(!0);case 4:case"end":return e.stop()}}),e)})));return function(r){return e.apply(this,arguments)}}(),$=function(){var e=(0,s.Z)((0,o.Z)().mark((function e(){return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:D(null),F({}),O({temporada:"",temporada_letras:"",temporada_numero:0,description:"",serie:1}),k(!0);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),q=function(){var e=(0,s.Z)((0,o.Z)().mark((function e(){var r,t;return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,f.xI();case 3:return r=e.sent,e.next=6,r;case 6:t=e.sent,G(t),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),console.log(e.t0);case 13:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(){return e.apply(this,arguments)}}(),U=function(){var e=(0,s.Z)((0,o.Z)().mark((function e(){var r,t;return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,_._G();case 3:return r=e.sent,e.next=6,r;case 6:t=e.sent,v(t),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),console.log(e.t0);case 13:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(){return e.apply(this,arguments)}}();(0,a.useEffect)((function(){J&&J.is_superuser?(U(),q(),D(null)):t("/loginuser")}),[]);var K=W();return J&&x?(0,g.jsxs)(c.Z,{children:[(0,g.jsx)("div",{className:K.paper,children:(0,g.jsx)("h1",{className:"mt-4 text-center",children:"Temporadas"})}),(0,g.jsx)(l.Z,{alignItems:"center",children:(0,g.jsx)(d.Z,{variant:"contained",color:"success",type:"submit",onClick:function(){return $()},children:"Registrar Temporada"})}),(0,g.jsx)("br",{}),(0,g.jsx)("br",{})," ",(0,g.jsx)("br",{}),(0,g.jsx)("div",{children:(0,g.jsx)("section",{className:"content",children:(0,g.jsx)("div",{className:"table-responsive table-condensed table-sm tabla",children:(0,g.jsxs)("table",{className:"table table-hover",id:"dataTableData",name:"dataTableData",style:{fontSize:11,textAlign:"center"},children:[(0,g.jsx)("thead",{className:K.title1,children:(0,g.jsxs)("tr",{children:[(0,g.jsx)("th",{style:{display:"none"},children:"Id"}),(0,g.jsx)("th",{children:"Codigo"}),(0,g.jsx)("th",{children:"Temporada"}),(0,g.jsx)("th",{children:"Temporada en tetras"}),(0,g.jsx)("th",{children:"Temporada en n\xfamero"}),(0,g.jsx)("th",{children:"Descripci\xf3n"}),(0,g.jsx)("th",{children:"Fecha de registro"}),(0,g.jsx)("th",{children:"Serie"}),(0,g.jsx)("th",{})]})}),(0,g.jsx)("tbody",{style:{backgroundColor:"white"},children:0===E.length?(0,g.jsx)("tr",{children:(0,g.jsx)("td",{colSpan:11,children:"No hay datos"})}):E.map((function(e,r){return(0,g.jsxs)("tr",{children:[(0,g.jsx)("td",{style:{display:"none"},children:e.id}),(0,g.jsx)("td",{children:e.id}),(0,g.jsx)("td",{children:e.temporada}),(0,g.jsx)("td",{children:e.temporada_letras}),(0,g.jsx)("td",{children:e.temporada_numero}),(0,g.jsx)("td",{children:e.description}),(0,g.jsx)("td",{children:e.create_date}),(0,g.jsx)("td",{children:e.serie}),(0,g.jsx)("td",{children:(0,g.jsx)("button",{className:"btn btn-outline-primary p-1 btn-sm float-right",type:"submit",onClick:function(){return H(e)},children:"editar"})})]},r)}))})]})})})}),(0,g.jsx)(w,{handleClose:y,show:j,temporada_id:N,currentItem:A,setTemporadas:G,setFormData:O,newData:M,listSeries:x})]}):(0,g.jsx)("p",{style:{fontSize:"25px"},children:"Inicia sesi\xf3n para ver todos los videos!"})},I=t(2516);var N=function(){var e=(0,I.Z)(S),r=(0,a.useContext)(p.Z).user,t=(0,a.useState)({loading:!0,temporadas:null}),o=(0,n.Z)(t,2),s=o[0],i=o[1];return(0,a.useEffect)((function(){f.xI().then((function(e){i({loading:!1,temporadas:e})}))}),[i]),r?(0,g.jsx)(c.Z,{children:(0,g.jsx)("div",{className:"App",children:(0,g.jsx)(e,{isLoading:s.loading,temporadas:s.temporadas})})}):(0,g.jsx)("p",{style:{fontSize:"25px"},children:"Inicia sesi\xf3n para ver todos los videos!"})}},3927:function(e,r,t){t.d(r,{S:function(){return u}});var n=t(5671),a=t(3144),o=t(136),s=t(7277),i=t(2791),c=t(184),u=function(e){(0,o.Z)(t,e);var r=(0,s.Z)(t);function t(e){var a;return(0,n.Z)(this,t),(a=r.call(this,e)).reloadPage=function(){window.location.reload()},a.state={error:null},a}return(0,a.Z)(t,[{key:"componentDidCatch",value:function(e){this.setState({error:e})}},{key:"render",value:function(){var e=this.state.error;return e?(0,c.jsxs)("div",{className:"alert alert-warning",role:"alert",children:[(0,c.jsx)("h3",{children:"Ha ocurrido un error por favor volver a cargar la p\xe1gina"}),(0,c.jsx)("p",{children:e.toString()}),(0,c.jsx)("button",{onClick:this.reloadPage,className:"btn btn-light mt-4",children:"Recargar p\xe1gina"})]}):this.props.children}}]),t}(i.Component)},2516:function(e,r,t){var n=t(1413),a=t(5987),o=(t(2791),t(184)),s=["isLoading"];r.Z=function(e){return function(r){var t=r.isLoading,i=(0,a.Z)(r,s);return t?(0,o.jsxs)("div",{className:"mt-4",style:{fontSize:"25px",display:"flex",justifyContent:"center",textAlign:"center",flexDirection:"column",alignItems:"center"},children:[(0,o.jsx)("div",{className:"spinner-grow text-light",role:"status",children:(0,o.jsx)("span",{className:"sr-only"})}),"Espera por favor"]}):(0,o.jsx)(e,(0,n.Z)({},i))}}},2918:function(e,r,t){t.d(r,{d:function(){return o}});var n=t(9439),a=t(2791),o=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],r=(0,a.useState)(e),t=(0,n.Z)(r,2),o=t[0],s=t[1],i=function(){return s(!0)},c=function(){return s(!1)};return[o,i,c]}},6542:function(e,r,t){t.d(r,{Ed:function(){return c},Zg:function(){return l},_G:function(){return i},dS:function(){return u}});var n=t(4165),a=t(5861),o=t(7411),s="https://sccotview.com/api/series/",i=function(){var e=(0,a.Z)((0,n.Z)().mark((function e(){var r;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o.Z.get(s);case 2:if(200!==(r=e.sent).status){e.next=7;break}return e.next=6,r.data;case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),c=function(){var e=(0,a.Z)((0,n.Z)().mark((function e(r){var t;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o.Z.post(s,r);case 2:if(200!==(t=e.sent).status){e.next=7;break}return e.next=6,t.data;case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}}),e)})));return function(r){return e.apply(this,arguments)}}(),u=function(){var e=(0,a.Z)((0,n.Z)().mark((function e(r){var t;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o.Z.get("".concat(s).concat(r));case 2:if(200!==(t=e.sent).status){e.next=7;break}return e.next=6,t.data;case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}}),e)})));return function(r){return e.apply(this,arguments)}}(),l=function(){var e=(0,a.Z)((0,n.Z)().mark((function e(r,t){var a;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o.Z.patch(s+r+"/",t);case 2:if(200!==(a=e.sent).status){e.next=5;break}return e.abrupt("return",a.data);case 5:case"end":return e.stop()}}),e)})));return function(r,t){return e.apply(this,arguments)}}()},6639:function(e,r,t){t.d(r,{C1:function(){return l},DN:function(){return c},op:function(){return u},xI:function(){return i}});var n=t(4165),a=t(5861),o=t(7411),s="https://sccotview.com/api/temporadas/",i=function(){var e=(0,a.Z)((0,n.Z)().mark((function e(){var r;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o.Z.get(s);case 2:if(200!==(r=e.sent).status){e.next=7;break}return e.next=6,r.data;case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),c=function(){var e=(0,a.Z)((0,n.Z)().mark((function e(r){var t;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o.Z.post(s,r);case 2:if(200!==(t=e.sent).status){e.next=7;break}return e.next=6,t.data;case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}}),e)})));return function(r){return e.apply(this,arguments)}}(),u=function(){var e=(0,a.Z)((0,n.Z)().mark((function e(r){var t;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o.Z.get("".concat(s).concat(r));case 2:if(200!==(t=e.sent).status){e.next=7;break}return e.next=6,t.data;case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}}),e)})));return function(r){return e.apply(this,arguments)}}(),l=function(){var e=(0,a.Z)((0,n.Z)().mark((function e(r,t){var a;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o.Z.patch(s+r+"/",t);case 2:if(200!==(a=e.sent).status){e.next=5;break}return e.abrupt("return",a.data);case 5:case"end":return e.stop()}}),e)})));return function(r,t){return e.apply(this,arguments)}}()},3767:function(e,r,t){var n=t(4942),a=t(3366),o=t(7462),s=t(2791),i=t(1184),c=t(5682),u=t(8519),l=t(2466),d=t(6934),p=t(1402),f=t(184),m=["component","direction","spacing","divider","children"];function h(e,r){var t=s.Children.toArray(e).filter(Boolean);return t.reduce((function(e,n,a){return e.push(n),a<t.length-1&&e.push(s.cloneElement(r,{key:"separator-".concat(a)})),e}),[])}var x=(0,d.ZP)("div",{name:"MuiStack",slot:"Root",overridesResolver:function(e,r){return[r.root]}})((function(e){var r=e.ownerState,t=e.theme,a=(0,o.Z)({display:"flex",flexDirection:"column"},(0,i.k9)({theme:t},(0,i.P$)({values:r.direction,breakpoints:t.breakpoints.values}),(function(e){return{flexDirection:e}})));if(r.spacing){var s=(0,c.hB)(t),u=Object.keys(t.breakpoints.values).reduce((function(e,t){return("object"===typeof r.spacing&&null!=r.spacing[t]||"object"===typeof r.direction&&null!=r.direction[t])&&(e[t]=!0),e}),{}),d=(0,i.P$)({values:r.direction,base:u}),p=(0,i.P$)({values:r.spacing,base:u});"object"===typeof d&&Object.keys(d).forEach((function(e,r,t){if(!d[e]){var n=r>0?d[t[r-1]]:"column";d[e]=n}}));a=(0,l.Z)(a,(0,i.k9)({theme:t},p,(function(e,t){return{"& > :not(style) + :not(style)":(0,n.Z)({margin:0},"margin".concat((a=t?d[t]:r.direction,{row:"Left","row-reverse":"Right",column:"Top","column-reverse":"Bottom"}[a])),(0,c.NA)(s,e))};var a})))}return a=(0,i.dt)(t.breakpoints,a)})),v=s.forwardRef((function(e,r){var t=(0,p.Z)({props:e,name:"MuiStack"}),n=(0,u.Z)(t),s=n.component,i=void 0===s?"div":s,c=n.direction,l=void 0===c?"column":c,d=n.spacing,v=void 0===d?0:d,Z=n.divider,b=n.children,j=(0,a.Z)(n,m),g={direction:l,spacing:v};return(0,f.jsx)(x,(0,o.Z)({as:i,ownerState:g,ref:r},j,{children:Z?h(b,Z):b}))}));r.Z=v},8519:function(e,r,t){t.d(r,{Z:function(){return u}});var n=t(3433),a=t(7462),o=t(3366),s=t(2466),i=t(7416),c=["sx"];function u(e){var r,t=e.sx,u=function(e){var r,t,n={systemProps:{},otherProps:{}},a=null!=(r=null==e||null==(t=e.theme)?void 0:t.unstable_sxConfig)?r:i.Z;return Object.keys(e).forEach((function(r){a[r]?n.systemProps[r]=e[r]:n.otherProps[r]=e[r]})),n}((0,o.Z)(e,c)),l=u.systemProps,d=u.otherProps;return r=Array.isArray(t)?[l].concat((0,n.Z)(t)):"function"===typeof t?function(){var e=t.apply(void 0,arguments);return(0,s.P)(e)?(0,a.Z)({},l,e):l}:(0,a.Z)({},l,t),(0,a.Z)({},d,{sx:r})}},8040:function(){},9629:function(){}}]);
//# sourceMappingURL=838.31a774bc.chunk.js.map