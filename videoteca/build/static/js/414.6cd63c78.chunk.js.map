{"version":3,"file":"static/js/414.6cd63c78.chunk.js","mappings":"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","sources":["components/series/serieVDetail.js","../node_modules/@babel/runtime/helpers/esm/objectSpread2.js"],"sourcesContent":["import { useEffect, useState } from \"react\";\r\nimport {useLocation, useNavigate} from 'react-router-dom';\r\nimport { useParams } from \"react-router-dom\";\r\n\r\n//dependencias\r\nimport * as VideoServer from \"../../services/videoServer\";\r\nimport * as SerieServer from \"../../services/serie\";\r\nimport * as TemporadaServer from \"../../services/temporada\";\r\nimport { LazyLoadImage } from 'react-lazy-load-image-component';\r\nimport 'react-lazy-load-image-component/src/effects/blur.css'\r\n\r\nimport * as HistorialUserServer from \"../../services/historialUser\";\r\nimport * as commentaryServer from \"../../services/commentary\";\r\nimport { useModal } from \"../../hooks/useModal\";\r\n\r\n//MaterialUI\r\nimport Box from \"@mui/material/Box\";\r\nimport Button from '@mui/material/Button';\r\nimport Container from \"@material-ui/core/Container\";\r\nimport StarIcon from \"@mui/icons-material/Star\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport StarBorderIcon from \"@mui/icons-material/StarBorder\";\r\nimport Stack from '@mui/material/Stack';\r\nimport Typography from \"@material-ui/core/Typography\";\r\nimport Rating from '@mui/material/Rating';\r\n\r\n//components\r\nimport \"../../styles/styles.css\";\r\nimport { Link } from \"@material-ui/icons\";\r\n\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  paper: {\r\n    marginTop: theme.spacing(0),\r\n    display: \"flex\",\r\n    flexDirection: \"column\",\r\n    alignItems: \"center\",\r\n  },\r\n  \r\n}));\r\n/**\r\n * Función para mostrar el detalle de un video y guardar la puntuación.\r\n * @returns Componente que muestra el detalle de un video junto con el iframe\r\n */\r\nconst SerieVDetail = () => {\r\n  const history = useNavigate();\r\n  const [show, handleShow, handleClose] = useModal(false);\r\n  const [show2, handleShow2, handleClose2] = useModal(false);\r\n  const [histUsers, setHistUsers] = useState();  \r\n\r\n  const location = useLocation();\r\n  const { id } = useParams();\r\n  const [video, setVideo] = useState([]);\r\n  const [serie, setSerie] = useState([]);\r\n  const [temporada,setTemporada] = useState([]);\r\n  const [duracion, setDuracion] = useState([]);\r\n  const [uploadDate, setUploadDate] = useState(null);\r\n  const [histUser, setHistUser] = useState(location.state);\r\n  const [commentaries, setCommentaries] = useState([]);\r\n  const [activeStar, setActiveStar] = useState(-1);\r\n  const [cantidadVideosSerie, setCantidadVideosSerie] = useState(1);\r\n  const totalStars = 5;\r\n  const [videos, setVideos] = useState([]);\r\n  const [temporadas, setTemporadas] = useState([]);\r\n  const [idTemporada,setIdTemporada] = useState(0);\r\nconst arra = [1,2,3]\r\n  \r\n  useEffect(() => {\r\n    const getSerie = async () => {\r\n      const res = await SerieServer.getSerie(id);\r\n      const serie = res;\r\n      console.log(serie);\r\n\r\n      setSerie({\r\n        ...serie,\r\n      });\r\n    };\r\n    getSerie();\r\n\r\n  }, []);\r\n    useEffect(() => {\r\n    const getTemporadas = async () => {\r\n    const res = await TemporadaServer.ListTemporadas()\r\n    const temporada = res;\r\n    setTemporada(temporada)\r\n    setTemporadas(temporada)\r\n    console.log(serie);\r\n};\r\ngetTemporadas()\r\n\r\n  }, []);\r\n  \r\n\r\n  useEffect(() => {\r\n    const getVideos = async () => {\r\n    const res = await VideoServer.ListVideos()\r\n    const videos = res;\r\n        setVideo(videos.videos)\r\n    };\r\n    getVideos()\r\n\r\n  }, []);\r\n\r\n  const getHistorialUsers = async () => {\r\n    try {\r\n      const res = await HistorialUserServer.ListHistorial();\r\n      setHistUsers(res[0]);// aqui se le coloco el [0] porque si no me estaria llamando a todos los usuarios\r\n    } catch (error) {\r\n      console.log(error);\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    getHistorialUsers();\r\n  }, []);\r\n\r\n  const entrarTemporada = (temporadaId)=>{\r\n    history(`/seeTemporada/${temporadaId}`,{state:histUsers});\r\n    setIdTemporada(temporadaId)\r\n    console.log(idTemporada);\r\n  }\r\n\r\n  const entrarVideo = (videoId)=>{\r\n    history(`/seeVideo/${videoId}`,{state:histUsers});\r\n  }\r\n  \r\n\r\n   useEffect(() => {      \r\n    if (histUser) {\r\n      setActiveStar(histUser.user_score-1);\r\n    } else {\r\n      history(\"/loginuser\");      \r\n    }\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, []) \r\n\r\n  /**\r\n   * Función para cambiar la calificación del video.\r\n   * @param {int} index \r\n   */\r\n  const handleClick = async (index) => {\r\n    setActiveStar(index);\r\n    let cumulative_score = video.cumulative_score;\r\n    let number_votes = video.numberOfVotes;\r\n\r\n    if (histUser.user_score) {\r\n      cumulative_score = cumulative_score - histUser.user_score + index+1;\r\n      const score_video = cumulative_score/number_votes;\r\n      setHistUser({...histUser, user_score:index+1});\r\n      await VideoServer.partialUpdateVideo(video.id, {'cumulative_score': cumulative_score, 'score': score_video})\r\n\r\n    } else {\r\n      number_votes +=1;\r\n      cumulative_score = cumulative_score + index+1;\r\n      const score_video = cumulative_score/number_votes;\r\n      setHistUser({...histUser, user_score:index+1});\r\n      await VideoServer.partialUpdateVideo(video.id, {'cumulative_score': cumulative_score,'numberOfVotes': number_votes,'score': score_video})\r\n    }\r\n    await HistorialUserServer.updateHistorialUser(histUser.id,{'user_score': index+1});\r\n\r\n  };\r\n  \r\n  if (histUser) {\r\n    console.log(temporada);\r\n\r\n        return (\r\n            <div>\r\n                {/* <div className=\"d-flex justify-content-end mb-4\">\r\n                  <button  onClick={() => window.history.back()} className=\"btn btn-light position-absolute \" value=\"Volver\">Volver</button>\r\n                </div> */}\r\n                <div className=\"\" style={\r\n                  {\r\n                    backgroundColor:'transparent',\r\n                    borderRadius:20\r\n                  }\r\n                }>\r\n                <div className=\"\">\r\n                  {/* Imagen de fondo */}\r\n                  <div style={{\r\n                  position: \"relative\",\r\n                  top:\"-24px\",\r\n                  width: \"100%\",\r\n                  minHeight: \"800px\",\r\n              }}>\r\n                  <LazyLoadImage \r\n                    \r\n                      src={`https://sccotview.com${serie.featured_image}`} \r\n                      alt=\"Featured\" \r\n                      style={{\r\n                          position: \"absolute\",\r\n                          left: 0,\r\n                          width: \"100%\",\r\n                      height:\"100%\",\r\n                      minHeight:\"500px\",\r\n                          objectFit: 'cover',\r\n                      }}\r\n                  />\r\n                  <div style={{\r\n                      position: \"absolute\",\r\n                      top: 0,\r\n                      left: 0,\r\n                      width: \"100%\",\r\n                      height:\"100%\",\r\n                      padding:\"50px 40px 0\",\r\n                      boxShadow: 'inset 600px -350px 700px -0px rgba(24, 26, 54, 1)', // Aplicar el box-shadow interno\r\n                      zIndex: 10, // Asegurar que el box-shadow esté encima de la imagen\r\n                  }}>\r\n                    {/* Contenido */}\r\n                  <div className=\"info-serie\" style={{\r\n                      position: \"relative\", // Asegúrate de que el contenido esté por encima del fondo\r\n                      zIndex: 1, // Asegúrate de que el contenido esté en la parte superior\r\n                  }}>\r\n                      <div className=\"d-flex justify-content-between\">\r\n                        <div >\r\n                          <small className=\"d-inline border-bottom border-light\">Serie</small>\r\n                        </div>\r\n                        <div>\r\n                          <button  onClick={() => window.history.back()} className=\"btn btn-light border border-2 border-dark\" value=\"Volver\">Volver</button>\r\n                        </div>\r\n                      </div>\r\n                      \r\n                      <h2 className=\"py-3\">{serie.serie}</h2>\r\n                      \r\n                      <div style={{\r\n                          overflowY: \"scroll\",\r\n                          maxWidth: \"550px\",\r\n                          zIndex: 20, // Asegurar que el box-shadow esté encima de la imagen\r\n                          height:\"320px\",\r\n                          paddingRight:\"20px\"\r\n                      }}>\r\n                          <p>{serie.description}</p>\r\n                      </div>\r\n                      \r\n                      <div className=\"d-flex justify-content-end\">\r\n                          {/* <div className=\"bg-light text-dark rounded-2 mb-2 p-2 d-inline px-2\">\r\n                              Cantidad de videos: {serie.quantity}\r\n                          </div> */}\r\n                      </div>\r\n                      \r\n                      <div className=\"d-flex justify-content-end\">\r\n                          {/* <input type=\"button\" value=\"Calificar serie\" className=\"btn btn-outline-warning mt-3 py-2\"/> */}\r\n                      </div>\r\n                  </div>\r\n                  {/* <p>⭐⭐⭐</p> */}\r\n                  <div className=\"d-flex flex-wrap\" style={\r\n                  {\r\n                    marginTop:\"20px\"\r\n                  }\r\n                }>\r\n                {temporada.filter(temporada =>temporada.serie == id).map((temporada,index)=>{\r\n                    return(\r\n                        <div className=\" border-2 card-temporada bg-light border text-dark p-3 m-3 rounded card-width cursorPointer \" key={index} onClick={()=>{entrarTemporada(temporada.id)}}>\r\n                            <small>Temporada {index + 1}</small>\r\n                            <h4 className=\"truncate-text border-bottom border-primary pb-3\">{temporada.temporada}</h4>\r\n                            <p className=\"truncate-text-6 \" style={{fontSize:13}}>{temporada.description}</p>\r\n                        </div>\r\n                        )\r\n                    })}\r\n                    \r\n\r\n                    \r\n                </div>\r\n                  </div>\r\n              </div>\r\n\r\n                  \r\n</div>\r\n                \r\n\r\n\r\n                \r\n                </div>\r\n\r\n            </div>\r\n        );\r\n\r\n  }\r\n  return (\r\n    <p style={{ fontSize: \"25px\" }}>Inicia sesión para ver todos los videos!</p>\r\n  );\r\n};\r\n\r\nexport default SerieVDetail;\r\n","import defineProperty from \"./defineProperty.js\";\nfunction ownKeys(e, r) {\n  var t = Object.keys(e);\n  if (Object.getOwnPropertySymbols) {\n    var o = Object.getOwnPropertySymbols(e);\n    r && (o = o.filter(function (r) {\n      return Object.getOwnPropertyDescriptor(e, r).enumerable;\n    })), t.push.apply(t, o);\n  }\n  return t;\n}\nexport default function _objectSpread2(e) {\n  for (var r = 1; r < arguments.length; r++) {\n    var t = null != arguments[r] ? arguments[r] : {};\n    r % 2 ? ownKeys(Object(t), !0).forEach(function (r) {\n      defineProperty(e, r, t[r]);\n    }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(t)) : ownKeys(Object(t)).forEach(function (r) {\n      Object.defineProperty(e, r, Object.getOwnPropertyDescriptor(t, r));\n    });\n  }\n  return e;\n}"],"names":["makeStyles","theme","paper","marginTop","spacing","display","flexDirection","alignItems","history","useNavigate","useModal","useState","histUsers","setHistUsers","location","useLocation","id","useParams","setVideo","serie","setSerie","temporada","setTemporada","state","histUser","setActiveStar","setTemporadas","idTemporada","setIdTemporada","useEffect","getSerie","SerieServer","res","console","log","getTemporadas","TemporadaServer","getVideos","VideoServer","videos","getHistorialUsers","HistorialUserServer","user_score","className","style","backgroundColor","borderRadius","position","top","width","minHeight","LazyLoadImage","src","featured_image","alt","left","height","objectFit","padding","boxShadow","zIndex","onClick","window","back","value","overflowY","maxWidth","paddingRight","description","filter","map","index","temporadaId","fontSize","ownKeys","e","r","t","Object","keys","getOwnPropertySymbols","o","getOwnPropertyDescriptor","enumerable","push","apply","_objectSpread2","arguments","length","forEach","getOwnPropertyDescriptors","defineProperties","defineProperty"],"sourceRoot":""}