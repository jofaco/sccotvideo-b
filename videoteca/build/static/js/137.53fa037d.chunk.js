"use strict";(self.webpackChunkvideoteca_frontend=self.webpackChunkvideoteca_frontend||[]).push([[137],{8953:function(e,t,r){var n=r(4165),a=r(5861),s=r(4942),c=r(1413),o=r(9439),u=r(5987),i=r(2791),p=r(733),d=r(5342),l=r(3360),f=r(4437),x=r(8596),v=(r(9629),r(184)),h=["histUser","handleClose","show","commentary_id"],m=(0,x.Z)((function(e){return{containerModal:{border:"2px solid #ccc",borderRadius:10,boxShadow:"4px 4px 4px 0px #5a28e550"},cloud:{width:"25rem",background:"white",color:"black",borderRadius:10},containerForm:{height:"3rem",background:"white",color:"black",border:"2px solid #ccc",borderRadius:10,boxShadow:"4px 4px 4px 0px #5a28e550"},"@media (max-width: 720px)":{root:{display:"flex"}}}}));t.Z=function(e){var t=e.histUser,r=e.handleClose,x=e.show,Z=e.commentary_id,b={commentary:"",historial_user:t,video:(0,u.Z)(e,h).videoID},w=(0,i.useState)(b),k=(0,o.Z)(w,2),y=k[0],g=k[1],j=function(){var e=(0,a.Z)((0,n.Z)().mark((function e(t){var r;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),r=new FormData,e.prev=2,Z){e.next=11;break}return r.append("commentary",y.commentary),r.append("historial_user",y.historial_user.id),r.append("video",y.video),e.next=9,p.z(r);case 9:e.next=14;break;case 11:return r.append("commentary",y.commentary),e.next=14,p.q4(Z,r);case 14:e.next=19;break;case 16:e.prev=16,e.t0=e.catch(2),console.log(e.t0);case 19:case"end":return e.stop()}}),e,null,[[2,16]])})));return function(t){return e.apply(this,arguments)}}();(0,i.useEffect)((function(){var e=function(){var e=(0,a.Z)((0,n.Z)().mark((function e(t){var r;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,p._K(t);case 3:r=e.sent,g((0,c.Z)((0,c.Z)({},y),{},{commentary:r.commentary})),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}();Z&&e(Z)}),[Z]);var _=m();return(0,v.jsxs)(d.Z,{show:x,onHide:r,"aria-labelledby":"example-custom-modal-styling-title",centered:!0,children:[(0,v.jsx)(d.Z.Header,{closeButton:!0,children:(0,v.jsx)(d.Z.Title,{id:"tituloModal",className:"text-dark",children:"Ingrese su Comentario"})}),(0,v.jsx)(d.Z.Body,{id:"bodyModal",children:(0,v.jsxs)(f.Z,{onSubmit:j,children:[(0,v.jsx)(f.Z.Group,{className:"mb-2 ",controlId:"exampleForm.ControlInput1",children:(0,v.jsx)(f.Z.Control,{as:"textarea",className:_.containerForm,rows:1,name:"commentary",value:y.commentary||"",onChange:function(e){var t=e.target.name;g((0,c.Z)((0,c.Z)({},y),{},(0,s.Z)({},t,e.target.value)))}})}),(0,v.jsxs)(d.Z.Footer,{children:[(0,v.jsx)(l.Z,{variant:"secondary",onClick:r,children:"Cerrar"}),(0,v.jsx)(l.Z,{variant:"primary",type:"submit",onClick:r,children:"Crear"})]})]})})]})}},4030:function(e,t,r){r.d(t,{Z:function(){return b}});var n=r(4165),a=r(5861),s=r(9439),c=r(2791),o=r(7689),u=r(90),i=r(7411),p="https://sccotview.com/api/fechaReprods/",d=function(){var e=(0,a.Z)((0,n.Z)().mark((function e(t){var r;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i.Z.post(p,t);case 2:if(200!==(r=e.sent).status){e.next=7;break}return e.next=6,r.data;case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),l=function(){var e=(0,a.Z)((0,n.Z)().mark((function e(t){var r;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i.Z.post("".concat(p,"list_by_user_video/"),t);case 2:if(200!==(r=e.sent).status){e.next=7;break}return e.next=6,r.data;case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),f=r(9929),x="https://sccotview.com/api/historialVideo/",v=function(){var e=(0,a.Z)((0,n.Z)().mark((function e(t){var r;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i.Z.post(x,t);case 2:if(200!==(r=e.sent).status){e.next=7;break}return e.next=6,r.data;case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),h=function(){var e=(0,a.Z)((0,n.Z)().mark((function e(t){var r;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i.Z.post("".concat(x,"list_by_video/"),t);case 2:if(200!==(r=e.sent).status){e.next=7;break}return e.next=6,r.data;case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),m=function(){var e=(0,a.Z)((0,n.Z)().mark((function e(t,r){var a;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i.Z.patch(x+t+"/",r);case 2:if(200!==(a=e.sent).status){e.next=5;break}return e.abrupt("return",a.data);case 5:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}(),Z=(r(5258),r(184)),b=function(e){var t=e.video,r=e.webinarCondition,i=(0,c.useState)(null),p=(0,s.Z)(i,2),x=p[0],b=p[1],w=(0,c.useState)(null),k=(0,s.Z)(w,2),y=k[0],g=k[1],j=(0,c.useState)(!0),_=(0,s.Z)(j,2),C=_[0],N=_[1],S=(0,o.UO)().id,D=(0,o.TH)(),F=(0,c.useRef)(null),I=(0,c.useRef)(null),E=function(){var e=(0,a.Z)((0,n.Z)().mark((function e(){var t,r,a,s;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,a=(null===D||void 0===D||null===(t=D.state)||void 0===t?void 0:t.id)||(null===D||void 0===D||null===(r=D.state)||void 0===r?void 0:r.usuario)){e.next=4;break}return e.abrupt("return",console.warn("No hay datos suficientes para historial"));case 4:return e.next=6,f.F2(a);case 6:s=e.sent,b(s),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),console.error("Error al obtener historial:",e.t0);case 13:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(){return e.apply(this,arguments)}}(),M=function(){var e=(0,a.Z)((0,n.Z)().mark((function e(){var t,r,a;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h({video_id:S});case 2:if(!((t=e.sent).length>0)){e.next=7;break}g(t),e.next=13;break;case 7:return(r=new FormData).append("video",S),e.next=11,v(r);case 11:a=e.sent,g(a);case 13:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),R=function(){var e=new Date,t="".concat(e.getDate()).padStart(2,"0"),r="".concat(e.getMonth()+1).padStart(2,"0"),n=e.getFullYear();return"".concat(n,"-").concat(r,"-").concat(t)},U=function(){var e=(0,a.Z)((0,n.Z)().mark((function e(t){var r,a,s,c,o;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t.getDuration();case 3:return r=e.sent,e.next=6,t.getCurrentTime();case 6:if(0===(a=e.sent)||null===x||void 0===x||!x.id){e.next=22;break}if(s=parseInt(90*r/100),c=x.counter_repro,o=y[0].reproducciones,!(a>=s)){e.next=20;break}return c+=1,o+=1,e.next=16,f.o0(x.id,{tiempo:0,visto:!0,counter_repro:c});case 16:return e.next=18,m(y[0].id,{reproducciones:o});case 18:e.next=22;break;case 20:return e.next=22,f.o0(x.id,{tiempo:parseInt(a)});case 22:e.next=27;break;case 24:e.prev=24,e.t0=e.catch(0),console.error("Error al guardar tiempo:",e.t0);case 27:case"end":return e.stop()}}),e,null,[[0,24]])})));return function(t){return e.apply(this,arguments)}}(),T=(0,c.useCallback)((function(){var e=new u.Z(F.current,{id:t.code_esp,playsinline:!0});if(!r&&null!==x&&void 0!==x&&x.tiempo){var c=function(e){var t=e.split(":").map(Number),r=(0,s.Z)(t,3);return 3600*r[0]+60*r[1]+r[2]}(x.tiempo);e.setCurrentTime(c)}r||(e.on("play",(0,a.Z)((0,n.Z)().mark((function e(){var t,r,a;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t=R(),(r=new FormData).append("historial_user",x.id),r.append("historial_Video",y[0].id),e.next=7,l(r);case 7:if(a=e.sent,a.some((function(e){return e.fecha===t}))){e.next=12;break}return e.next=12,d({historial_user:x.id,historial_Video:y[0].id});case 12:e.next=17;break;case 14:e.prev=14,e.t0=e.catch(0),console.error("Error en evento play:",e.t0);case 17:case"end":return e.stop()}}),e,null,[[0,14]])})))),document.URL.includes("/seeVideo/")&&function(e){I.current=setInterval((function(){return U(e)}),1e4)}(e)),N(!1)}),[t.code_esp,x,y,r]);return(0,c.useEffect)((function(){E(),M()}),[]),(0,c.useEffect)((function(){t.code_esp&&(r||!r&&y)?T():console.log("Esperando datos para getVimeoVideo:")}),[t.code_esp,x,y,r,T]),(0,Z.jsxs)(Z.Fragment,{children:[C&&(0,Z.jsx)("div",{className:"mt-5 d-flex justify-content-center align-items-center",children:(0,Z.jsx)("div",{className:"spinner-grow text-light",role:"status",children:(0,Z.jsx)("span",{className:"sr-only"})})}),(0,Z.jsx)("div",{id:"iframe1",ref:F})]})}},1241:function(e,t,r){var n=r(9439),a=r(5987),s=(r(2791),r(2918)),c=r(8953),o=r(8596),u=r(5342),i=r(3712),p=r(6151),d=r(3767),l=r(184),f=["handleClose","show","histUser","commentaries"],x=(0,o.Z)((function(e){return{title:{color:"black",textAlign:"center"},nameUser:{color:"Gray",fontSize:"15px"},containerModal:{boxShadow:"4px 4px 4px 0px #5a28e550"},containerComment:{maxWidth:720,margin:"auto",marginBottom:20},"@media (max-width: 720px)":{root:{display:"flex"}}}}));t.Z=function(e){var t=e.handleClose,r=e.show,o=e.histUser,v=e.commentaries,h=((0,a.Z)(e,f),(0,s.d)(!1)),m=(0,n.Z)(h,3),Z=m[0],b=m[1],w=m[2],k=x();if(v)return(0,l.jsxs)(u.Z,{show:r,onHide:t,"aria-labelledby":"example-custom-modal-styling-title",contentClassName:k.containerModal,centered:!0,scrollable:!0,children:[(0,l.jsx)(u.Z.Header,{closeButton:!0,children:(0,l.jsx)(u.Z.Title,{id:"titleModal",className:k.title,children:"Comentarios de usuarios"})}),(0,l.jsx)(u.Z.Body,{id:"bodyModal",className:k.containerModal,children:v&&v.length>0?v.map((function(e,t){var r;return(0,l.jsx)(i.Z,{className:k.containerComment,children:(0,l.jsxs)("div",{className:"row",children:[(0,l.jsxs)("div",{className:"col-9",children:[(0,l.jsx)("p",{children:new Date(e.created_date).toLocaleDateString()}),(0,l.jsx)("h5",{className:k.nameUser,children:e.historial_user.usuario.name}),(0,l.jsx)("h6",{children:e.commentary})]}),(0,l.jsx)("div",{className:"col-2",children:e.historial_user.usuario.id===(null===o||void 0===o||null===(r=o.usuario)||void 0===r?void 0:r.id)&&(0,l.jsxs)(d.Z,{alignItems:"center",children:[(0,l.jsx)(p.Z,{variant:"contained",color:"info",onClick:b,children:"EDITAR"}),(0,l.jsx)(c.Z,{handleClose:w,show:Z,commentary_id:e.id})]})}),(0,l.jsx)("hr",{})]})},t)})):(0,l.jsx)("p",{className:"text-center text-muted",children:"No hay comentarios a\xfan."})})]})}},2918:function(e,t,r){r.d(t,{d:function(){return s}});var n=r(9439),a=r(2791),s=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=(0,a.useState)(e),r=(0,n.Z)(t,2),s=r[0],c=r[1],o=function(){return c(!0)},u=function(){return c(!1)};return[s,o,u]}},733:function(e,t,r){r.d(t,{_K:function(){return i},q4:function(){return p},t$:function(){return u},z:function(){return o}});var n=r(4165),a=r(5861),s=r(7411),c="https://sccotview.com/api/commentaries/",o=function(){var e=(0,a.Z)((0,n.Z)().mark((function e(t){var r;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s.Z.post(c,t);case 2:if(200!==(r=e.sent).status){e.next=7;break}return e.next=6,r.data;case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),u=function(){var e=(0,a.Z)((0,n.Z)().mark((function e(t){var r;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s.Z.post("".concat(c,"list_by_video/"),t);case 2:if(200!==(r=e.sent).status){e.next=9;break}return e.next=6,r.data;case 6:case 12:return e.abrupt("return",e.sent);case 9:return console.log("error"),e.next=12,r.data;case 13:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),i=function(){var e=(0,a.Z)((0,n.Z)().mark((function e(t){var r;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s.Z.get("".concat(c).concat(t));case 2:if(200!==(r=e.sent).status){e.next=7;break}return e.next=6,r.data;case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),p=function(){var e=(0,a.Z)((0,n.Z)().mark((function e(t,r){var a;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s.Z.patch(c+t+"/",r);case 2:if(200!==(a=e.sent).status){e.next=5;break}return e.abrupt("return",a.data);case 5:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}()},6542:function(e,t,r){r.d(t,{Ed:function(){return u},Zg:function(){return p},_G:function(){return o},dS:function(){return i}});var n=r(4165),a=r(5861),s=r(7411),c="https://sccotview.com/api/series/",o=function(){var e=(0,a.Z)((0,n.Z)().mark((function e(){var t;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s.Z.get(c);case 2:if(200!==(t=e.sent).status){e.next=7;break}return e.next=6,t.data;case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),u=function(){var e=(0,a.Z)((0,n.Z)().mark((function e(t){var r;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s.Z.post(c,t);case 2:if(200!==(r=e.sent).status){e.next=7;break}return e.next=6,r.data;case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),i=function(){var e=(0,a.Z)((0,n.Z)().mark((function e(t){var r;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s.Z.get("".concat(c).concat(t));case 2:if(200!==(r=e.sent).status){e.next=7;break}return e.next=6,r.data;case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),p=function(){var e=(0,a.Z)((0,n.Z)().mark((function e(t,r){var a;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s.Z.patch(c+t+"/",r);case 2:if(200!==(a=e.sent).status){e.next=5;break}return e.abrupt("return",a.data);case 5:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}()},6639:function(e,t,r){r.d(t,{C1:function(){return p},DN:function(){return u},op:function(){return i},xI:function(){return o}});var n=r(4165),a=r(5861),s=r(7411),c="https://sccotview.com/api/temporadas/",o=function(){var e=(0,a.Z)((0,n.Z)().mark((function e(){var t;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s.Z.get(c);case 2:if(200!==(t=e.sent).status){e.next=7;break}return e.next=6,t.data;case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),u=function(){var e=(0,a.Z)((0,n.Z)().mark((function e(t){var r;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s.Z.post(c,t);case 2:if(200!==(r=e.sent).status){e.next=7;break}return e.next=6,r.data;case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),i=function(){var e=(0,a.Z)((0,n.Z)().mark((function e(t){var r;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s.Z.get("".concat(c).concat(t));case 2:if(200!==(r=e.sent).status){e.next=7;break}return e.next=6,r.data;case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),p=function(){var e=(0,a.Z)((0,n.Z)().mark((function e(t,r){var a;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s.Z.patch(c+t+"/",r);case 2:if(200!==(a=e.sent).status){e.next=5;break}return e.abrupt("return",a.data);case 5:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}()},9629:function(){}}]);
//# sourceMappingURL=137.53fa037d.chunk.js.map