{"version":3,"file":"static/js/403.ef49b8ba.chunk.js","mappings":"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","sources":["components/videos/comentarioModal.js","components/videos/listComentariosModal.js","services/ubicacion.js","services/fechaRepro.js","services/historialVideo.js","components/videos/iframeVideo.js","components/videos/videoDetail.js","components/videos/videoLoading.js"],"sourcesContent":["import { useState, useEffect } from \"react\";\r\n//dependencias\r\nimport * as commentaryServer from \"../../services/commentary\";\r\n\r\n//components\r\nimport Modal from \"react-bootstrap/Modal\";\r\nimport Button from \"react-bootstrap/Button\";\r\nimport Form from \"react-bootstrap/Form\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport \"../../styles/cloud.css\";\r\n\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  \r\n  containerModal:{\r\n    border: \"2px solid #ccc\",\r\n    borderRadius: 50,\r\n    boxShadow: \"4px 4px 4px 0px #5a28e550\",\r\n  },\r\n  cloud: {\r\n    width: \"25rem\",\r\n    background: \"white\",\r\n    color:\"black\",\r\n    borderRadius: 10,\r\n  },\r\n  containerForm: {\r\n    height:\"3rem\",\r\n    background: \"white\",\r\n    color:\"black\",\r\n    border: \"2px solid #ccc\",\r\n    borderRadius: 10,\r\n    boxShadow: \"4px 4px 4px 0px #5a28e550\",\r\n  },\r\n\r\n  \"@media (max-width: 720px)\": {\r\n    root: {\r\n      display: \"flex\",\r\n    },\r\n  },\r\n}));\r\nconst ModalComentario = ({histUser, handleClose, show, commentary_id, ...props}) => {\r\n  const initialFormData = {commentary:\"\", historial_user:histUser, video:props.videoID};\r\n  const [commentary, setCommentary] = useState(initialFormData);\r\n\r\n  const handleInputChange = (e) => {\r\n    let target = e.target;\r\n    let name = target.name;\r\n    setCommentary({...commentary, [name]: e.target.value });\r\n  };\r\n\r\n  const handleSubmit = async (e) => {\r\n    e.preventDefault();\r\n    const formData = new FormData();\r\n\r\n    try {\r\n      if (!commentary_id) {\r\n        formData.append(\"commentary\", commentary.commentary);\r\n        formData.append(\"historial_user\", commentary.historial_user.id);\r\n        formData.append(\"video\", commentary.video);\r\n        await commentaryServer.RegisterCommentary(formData);\r\n      } else {\r\n        formData.append(\"commentary\", commentary.commentary);\r\n        await commentaryServer.updateCommentary(commentary_id, formData);        \r\n      }\r\n      \r\n    } catch (error) {\r\n      console.log(error);      \r\n    }\r\n  }\r\n\r\n  \r\n\r\n  useEffect(() => {\r\n    const getCommentary = async (commentary_id) => {\r\n      try {\r\n        const res = await commentaryServer.getCommentary(commentary_id)\r\n        setCommentary({...commentary, commentary: res.commentary})\r\n        console.log(res);\r\n      } catch (error) {\r\n        console.log(error);\r\n      }\r\n    }\r\n    if (commentary_id) {\r\n      getCommentary(commentary_id)      \r\n    }\r\n  // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, [commentary_id])\r\n  \r\n  const classes = useStyles();\r\n  return (\r\n    <Modal \r\n      show={show} \r\n      onHide={handleClose}\r\n      aria-labelledby=\"example-custom-modal-styling-title\"\r\n      contentClassName = {\"cloud \"+ classes.cloud}\r\n      centered\r\n    >\r\n      <Modal.Header closeButton >\r\n        <Modal.Title id=\"tituloModal\" >Ingrese su Comentario</Modal.Title>\r\n      </Modal.Header>\r\n      <Modal.Body id=\"bodyModal\" >\r\n        <Form onSubmit={handleSubmit}  >\r\n          <Form.Group className={\"mb-2 \"} controlId=\"exampleForm.ControlInput1\">\r\n            <Form.Control as=\"textarea\" \r\n            className={classes.containerForm}\r\n            rows={1} \r\n            name=\"commentary\"\r\n            value={commentary.commentary || \"\"}\r\n            onChange={handleInputChange} \r\n            />\r\n          </Form.Group>\r\n          <Modal.Footer>\r\n            <Button variant=\"secondary\" onClick={handleClose}>\r\n              Cerrar\r\n            </Button>\r\n            <Button variant=\"primary\" type=\"submit\" onClick={handleClose}>\r\n              Crear\r\n            </Button>\r\n          </Modal.Footer>\r\n        </Form>\r\n      </Modal.Body>\r\n    </Modal>\r\n    \r\n  )\r\n};\r\n\r\nexport default ModalComentario;","import {useEffect, useState}from \"react\";\r\n//dependencias\r\n//import * as commentaryServer from \"../../services/commentary\";\r\nimport { useModal } from \"../../hooks/useModal\";\r\nimport ModalComentario from \"./comentarioModal\";\r\n\r\n//components\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport Modal from \"react-bootstrap/Modal\";\r\nimport Container from \"@material-ui/core/Container\";\r\nimport { Button } from \"@mui/material\";\r\nimport Stack from '@mui/material/Stack';\r\n\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  title:{\r\n    color: \"black\",\r\n    textAlign: \"center\",\r\n  },\r\n  nameUser:{\r\n    color:\"Gray\",\r\n    fontSize:\"15px\"\r\n  },\r\n  containerModal:{\r\n    boxShadow: \"4px 4px 4px 0px #5a28e550\",\r\n  },\r\n  containerComment: {\r\n    maxWidth: 720,\r\n    margin: \"auto\",\r\n    marginBottom: 20,\r\n  },\r\n  \"@media (max-width: 720px)\": {\r\n    root: {\r\n      display: \"flex\",\r\n    },\r\n  },\r\n}));\r\n\r\nconst ModalComentarios = ({ handleClose, show, histUser, commentaries,  ...props}) => {\r\n  const [showEdit, handleShowEdit, handleCloseEdit] = useModal(false);\r\n  const classes = useStyles();\r\n  \r\n  if (commentaries) {\r\n    return (\r\n    <Modal \r\n      show={show} \r\n      onHide={handleClose}\r\n      aria-labelledby=\"example-custom-modal-styling-title\"\r\n      contentClassName = {classes.containerModal}\r\n      centered\r\n      scrollable\r\n      \r\n    >\r\n      <Modal.Header closeButton  >\r\n        <Modal.Title id=\"titleModal\" className={classes.title} >Comentarios de usuarios</Modal.Title>\r\n      </Modal.Header>\r\n      <Modal.Body id=\"bodyModal\" className={classes.containerModal}>\r\n        {\r\n          commentaries.map( (element, index) => (\r\n              <Container key={index} className={classes.containerComment}>\r\n                <div className=\"row\">\r\n                  <div className=\"col-9 \">\r\n                    <p>{new Date(element.created_date).toLocaleDateString()}</p>\r\n                    <h5 className={classes.nameUser} >{element.historial_user.usuario.name}</h5>\r\n                    <h6 >{element.commentary}</h6>\r\n                  </div>\r\n                  <div className=\"col-2\">\r\n                  { element.historial_user.usuario.id === histUser.usuario.id ?\r\n                    <Stack  alignItems=\"center\" alignContent=\"center\">\r\n                      {/* <Button \r\n                      variant=\"contained\" \r\n                      color=\"info\"\r\n                      onClick={handleShowEdit}>\r\n                        EDITAR \r\n                      </Button> */}\r\n                      <ModalComentario\r\n                        handleClose={handleCloseEdit}\r\n                        show={showEdit}\r\n                        commentary_id = {element.id}\r\n                      ></ModalComentario>\r\n                    </Stack>\r\n                    : null\r\n                    }\r\n                  </div>                  \r\n                  <hr/>\r\n                </div>\r\n              </Container>\r\n            ))\r\n        }\r\n      </Modal.Body>\r\n    </Modal>\r\n    )\r\n  }\r\n  \r\n};\r\n\r\nexport default ModalComentarios;","import axiosInstance from \"../axios\";\r\n\r\nconst API_URL = \"https://sccotview.com/api/ubicaciones/\";\r\n\r\n/**\r\n * Función para registrar una ubicación.\r\n * @param {formData} newUbicacion\r\n * @returns La data enviada desde el backend.\r\n */\r\nexport const RegisterUbicacion = async (newUbicacion) => {\r\n    const response = await axiosInstance.post(API_URL, newUbicacion);\r\n    if (response.status === 200) {\r\n      return await response.data;\r\n    }\r\n  };\r\n/**\r\n * Función para consultar todas las ubicaciones\r\n * @returns La data enviada desde el backend.\r\n */\r\nexport const ListUbicacion = async () => {\r\n    const response = await axiosInstance.get(`${API_URL}`);\r\n    if (response.status === 200) {\r\n      return await response.data;\r\n    }\r\n  };\r\n/**\r\n * Función para consultar todas las ubicaciones de un historial de usuario en específico.\r\n * @param {fk} histUser_id \r\n * @returns data enviada desde el backend.\r\n */\r\nexport const ListUbicacionHist = async (histUser_id) => {\r\n    const response = await axiosInstance.post(`${API_URL}list_by_historial/`,histUser_id);\r\n    if (response.status === 200) {\r\n      return await response.data;\r\n    }\r\n  };\r\n\r\n/**\r\n * Función para actulizar una ubicación.\r\n * @param {pk} id\r\n * @param {formData} updateUbicacion \r\n * @returns La data enviada desde el backend.\r\n */\r\nexport const updateUbicacion = async(id,updateUbicacion) =>{\r\n    const response = await axiosInstance.patch(API_URL+id+\"/\",updateUbicacion);\r\n    if (response.status === 200) {\r\n        return response.data;\r\n    }\r\n}","import axiosInstance from \"../axios\";\r\n\r\nconst API_URL = \"https://sccotview.com/api/fechaReprods/\";\r\n\r\n/**\r\n * Función para registrar una nueva fecha de reproducción, este tiene relación con el historial de video e historial de usuario.\r\n * @param {formdata} newFecha \r\n * @returns data enviada desde el backend.\r\n */\r\nexport const RegisterFechaRepro = async (newFecha) => {\r\n    const response = await axiosInstance.post(API_URL, newFecha);\r\n    if (response.status === 200) {\r\n      return await response.data;\r\n    }\r\n  };\r\n/**\r\n * Función para consultar todas las fechas de reproduccion.\r\n * @returns data enviada desde el backend-\r\n */\r\nexport const ListFechaRepro = async () => {\r\n    const response = await axiosInstance.get(`${API_URL}`);\r\n    if (response.status === 200) {\r\n      return await response.data;\r\n    }\r\n  };\r\n/**\r\n * Función para consultar una fecha de reproducción en específico.\r\n * @param {pk} histID primary key\r\n * @returns data enviada desde el backend\r\n */\r\nexport const getFechaRepro = async (histID) => {\r\n    const response = await axiosInstance.get(`${API_URL}${histID}`);\r\n    if (response.status === 200) {\r\n      return await response.data;\r\n    }\r\n  };\r\n/**\r\n * Función para consultar la fecha de reproducción correspondiente a un usuario y video.\r\n * @param {formdata} data \r\n * @returns data enviada desde el backend\r\n */\r\nexport const ListFechaReprox2 = async (data) => {\r\n    const response = await axiosInstance.post(`${API_URL}list_by_user_video/`,data);\r\n    if (response.status === 200) {\r\n      return await response.data;\r\n    }\r\n  };\r\n\r\n/**\r\n * Función para actualizar una fecha de reproducción.\r\n * @param {pk} id \r\n * @param {formdata} updateHU \r\n * @returns data enviada desde el backend\r\n */\r\nexport const updateHistorialVideo = async(id,updateHU) =>{\r\n    const response = await axiosInstance.patch(API_URL+id+\"/\",updateHU);\r\n    if (response.status === 200) {\r\n        return response.data;\r\n    }\r\n}","import axiosInstance from \"../axios\";\r\n\r\nconst API_URL = \"https://sccotview.com/api/historialVideo/\";\r\n\r\n/**\r\n * Función para registrar un historial de video.\r\n * @param {dataform} newHistorial\r\n * @returns data enviada desde el backend.\r\n */\r\nexport const RegisterHistorialVideo = async (newHistorial) => {\r\n    const response = await axiosInstance.post(API_URL, newHistorial);\r\n    if (response.status === 200) {\r\n      console.log(response.data);\r\n      return await response.data;\r\n    }\r\n  };\r\n/**\r\n * Función para consultar todos los historiales.\r\n * @returns data enviada desde el backend.\r\n */\r\nexport const ListHistorial = async () => {\r\n    const response = await axiosInstance.get(`${API_URL}`);\r\n    if (response.status === 200) {\r\n      return await response.data;\r\n    }\r\n  };\r\n/**\r\n * Función para obtener un historial en específico.\r\n * @param {pk} histID \r\n * @returns data enviada desde el backend.\r\n */\r\nexport const getHistorial = async (histID) => {\r\n    const response = await axiosInstance.get(`${API_URL}${histID}`);\r\n    if (response.status === 200) {\r\n      return await response.data;\r\n    }\r\n  };\r\n/**\r\n * Función para obtener el historial de un video en específico.\r\n * @param {fk} idVideo \r\n * @returns data enviada desde el backend.\r\n */\r\nexport const ListHistorialVideo = async (idVideo) => {\r\n    const response = await axiosInstance.post(`${API_URL}list_by_video/`,idVideo);\r\n    if (response.status === 200) {\r\n      return await response.data;\r\n    }\r\n  };\r\n\r\n/**\r\n * Función para actualizar un historial de video.\r\n * @param {pk} id \r\n * @param {formdata} updateHU \r\n * @returns data enviada desde el backend\r\n */\r\nexport const updateHistorialVideo = async(id,updateHU) =>{\r\n    const response = await axiosInstance.patch(API_URL+id+\"/\",updateHU);\r\n    if (response.status === 200) {\r\n        return response.data;\r\n    }\r\n}","import { useEffect, useState,useCallback } from \"react\";\r\nimport {useLocation} from 'react-router-dom';\r\nimport { useParams } from \"react-router-dom\";\r\n\r\nimport Player from \"@vimeo/player\";\r\n\r\n//dependencias\r\nimport * as UbicacionServer from \"../../services/ubicacion\";\r\nimport * as FechareproServer from \"../../services/fechaRepro\"\r\nimport * as HistorialUserServer from \"../../services/historialUser\";\r\nimport * as HistorialVideoServer from \"../../services/historialVideo\";\r\n\r\nimport \"../../styles/styles.css\";\r\n\r\n/**\r\n * Función para obtener el video alojado en vimeo y mostrarlo en un iframe, también se hace la gestión del video para guardar su historial, tiempo de reproducción, etc.\r\n * @param {*} video\r\n * @returns Iframe del video en vimeo\r\n */\r\nconst IframeVideo =  ({video, ...props}) => {\r\n  const [ubicacionUsers, setUbicacionUsers] = useState(null);\r\n  const [histUser, setHistUser] = useState();\r\n  const [histVideo, setHistVideo] = useState();\r\n  const { id } = useParams();\r\n\r\n\r\n  const location = useLocation();\r\n\r\n  const iframe = document.getElementById('iframe1');\r\n  const URL_API = 'https://ipwho.is/';\r\n\r\n  /**\r\n   * Función para obtener la ubicación del usuario logeado\r\n   */\r\n  const getUbication= async ()=> {\r\n    await fetch(URL_API)\r\n    .then(response => response.json())\r\n    .then(data => {\r\n      setUbicacionUsers(data);\r\n    });\r\n  };\r\n  /**\r\n   * Función para obtener el historial de usuario para el video en reproducción\r\n   */\r\n  const getHistUser= async ()=> {\r\n    if(location.state.id){\r\n\r\n      console.log(location);\r\n      console.log(\" location.state.id\" , location.state.id);\r\n      const res = await HistorialUserServer.getHistorial(location.state.id);   \r\n      setHistUser(res);\r\n    }else{\r\n\r\n      console.log(location);\r\n      console.log(\" location.state.usuario\" , location.state.usuario);\r\n      const res = await HistorialUserServer.getHistorial(location.state.usuario);   \r\n      setHistUser(res);\r\n      console.log(res);\r\n    }\r\n  };\r\n\r\n  /**\r\n   * Función para obtener el historial del video en reproducción\r\n   */\r\n  const getHistorialVideo = async () => {\r\n    const res = await HistorialVideoServer.ListHistorialVideo({video_id:id})\r\n    if (res.length>0) {\r\n      setHistVideo(res);\r\n    } else {\r\n      const formData = new FormData();\r\n      formData.append('video',id);\r\n      const res = await HistorialVideoServer.RegisterHistorialVideo(formData);\r\n      setHistVideo(res);\r\n    }\r\n  }\r\n  \r\n  /**\r\n   * Función para convertir el tiempo de reproducción del video a segundos\r\n   * @param {time} tiempo \r\n   * @returns Tiempo en segundos.\r\n   */\r\n  const convertTime = (tiempo) => {\r\n    let [h, m, s] = tiempo.split(':').map(val => +val);\r\n    s = (s+(m*60)+(h*60^2))-2\r\n    return parseInt(s);\r\n  }\r\n\r\n  /**\r\n   * Función para obtener la fecha actual y pasarla a un formato YY-MM-dd\r\n   * @returns Fecha actual\r\n   */\r\n  function obetenerfecha() {\r\n    const f = new Date();\r\n    let day = `${(f.getDate())}`.padStart(2,'0');\r\n    let month = `${(f.getMonth()+1)}`.padStart(2,'0');\r\n    let year = f.getFullYear();\r\n    const fecha =year+ \"-\"+ month + \"-\" + day;\r\n    return fecha;\r\n  }\r\n  /**\r\n   * Función para realizar la gestión con el video (Guardar tiempo de reproducción, guardar calificación, guardar fecha de reproducción, guardar ubicación)\r\n   */\r\n  const getVimeoVideo = useCallback(() => {\r\n    const formData = new FormData();\r\n    let duracion = 0;\r\n    let tiempo;\r\n    let player;\r\n\r\n    if (video.code_esp && histUser) {\r\n      let options = {\r\n        id: video.code_esp,\r\n        playsinline: true,\r\n        \r\n      };\r\n      player = new Player(iframe, options);\r\n\r\n      if (histUser.tiempo !== null) {\r\n        const segundos = convertTime(histUser.tiempo);\r\n        player.setCurrentTime(segundos);\r\n      }\r\n      /**\r\n       * Metodo play en donde se realizan las operaciones mencionadas en la función useCallback\r\n       */\r\n      player.on('play', async () => {\r\n        const res = await UbicacionServer.ListUbicacionHist({ 'histUser_id': histUser.id });\r\n        const data = new FormData();\r\n        data.append(\"historial_user\", histUser.id);\r\n        data.append(\"historial_Video\",histVideo[0].id);\r\n        const fechaR = await FechareproServer.ListFechaReprox2(data);\r\n        let ubByHist;\r\n        let reproH;\r\n        const fecha = obetenerfecha();\r\n\r\n        if (res.length > 0) {\r\n          ubByHist = res;\r\n        }\r\n        if (fechaR.length >0 ) {\r\n          reproH = fechaR;\r\n        }\r\n        if (ubicacionUsers) {\r\n          formData.append(\"direccionIP\", ubicacionUsers.ip);\r\n          formData.append(\"ciudad\", ubicacionUsers.city);\r\n          formData.append(\"pais\", ubicacionUsers.country);\r\n          formData.append(\"historial_user\", histUser.id);\r\n          formData.append(\"historial_Video\", histVideo[0].id)\r\n          if (ubByHist) {\r\n            for (let index = 0; index < ubByHist.length; index++) {\r\n              const element = ubByHist[index];\r\n              if (element['direccionIP'] === ubicacionUsers.ip && element['ciudad'] === ubicacionUsers.city && element['pais'] === ubicacionUsers.country) {\r\n                console.log(\"Ya exite una hubicación del mismo lugar registrada!\");\r\n              }\r\n              else{\r\n                await  UbicacionServer.RegisterUbicacion(formData);\r\n                break;\r\n              }\r\n            }\r\n          }\r\n          else{ await  UbicacionServer.RegisterUbicacion(formData) }\r\n\r\n          if (reproH) {\r\n            for (let index = 0; index < reproH.length; index++) {\r\n              const element = reproH[index];\r\n              console.log(element['fecha']);\r\n              if (element['fecha'] === fecha) {                \r\n                console.log(\"Ya exite una fecha igual registrada!\");\r\n              }\r\n              else{\r\n                await  FechareproServer.RegisterFechaRepro({ 'historial_user': histUser.id, 'historial_Video':histVideo[0].id})\r\n                break;\r\n              }\r\n            }\r\n          }\r\n          else{await  FechareproServer.RegisterFechaRepro({ 'historial_user': histUser.id, 'historial_Video':histVideo[0].id})}            \r\n        }\r\n      });\r\n      /**\r\n       * Función para contar cada 10 segundos la reproducción del video.\r\n       * @param {*} player \r\n       */\r\n      const repetirCada10Segundos = (player)=> {\r\n        setInterval(saveTime, 10000, player);\r\n      }\r\n      /**\r\n       * Función para obtener la duración del video y guardarlo en la base de datos\r\n       * @param {*} player \r\n       */\r\n      const saveTime =(player)=> {\r\n        tiempo = 0;\r\n        console.log(\"Guardado después de 10s\");\r\n        player.getDuration().then( (duration) => {\r\n          duracion = parseInt(duration);\r\n        }).catch(function(error) {\r\n          console.error(error);\r\n        });\r\n        player.getCurrentTime().then((seconds) => {\r\n          tiempo = parseInt(seconds)\r\n          if (tiempo !== 0 && histUser.id){\r\n            const validacion = parseInt((duracion*90)/100);\r\n            console.log(\"Tiempo para el 90% \"+validacion);\r\n            let cont1 = histUser.counter_repro;\r\n            let cont2 = histVideo[0].reproducciones;\r\n            if (tiempo >= validacion) {\r\n              cont1 += 1;\r\n              cont2 += 1;\r\n              HistorialUserServer.updateHistorialUser(histUser.id,{'tiempo':0, 'visto':true, 'counter_repro':cont1});\r\n              HistorialVideoServer.updateHistorialVideo(histVideo[0].id, {'reproducciones':cont2})\r\n            }\r\n            else{\r\n              console.log(\"Tiempo actual de reproducción \"+tiempo);\r\n              HistorialUserServer.updateHistorialUser(histUser.id,{'tiempo':tiempo});\r\n            }\r\n          }\r\n        }).catch((error) => {\r\n          console.error(error);\r\n        });\r\n      }\r\n      if (document.URL.includes('/seeVideo/')) {\r\n        repetirCada10Segundos(player); \r\n      }\r\n    }\r\n  // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  },[ histUser , iframe, ubicacionUsers, video.code_esp]);\r\n\r\n  useEffect(()=>{    \r\n    getVimeoVideo();\r\n  },[getVimeoVideo]);\r\n\r\n  useEffect(()=>{\r\n    //getUbication();\r\n    getHistUser();\r\n    getHistorialVideo();\r\n\r\n  // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  },[]);\r\n  \r\n\r\n  return (\r\n      <div id=\"iframe1\">\r\n      </div>\r\n    );\r\n}\r\n\r\nexport default IframeVideo;","import { useEffect, useState } from \"react\";\r\nimport {useLocation, useNavigate} from 'react-router-dom';\r\nimport { useParams } from \"react-router-dom\";\r\n\r\n//dependencias\r\nimport * as VideoServer from \"../../services/videoServer\";\r\nimport * as SerieServer from \"../../services/serie\";\r\nimport VideoLoadingComponent from \"./videoLoading\";\r\n\r\n\r\nimport * as HistorialUserServer from \"../../services/historialUser\";\r\nimport * as commentaryServer from \"../../services/commentary\";\r\nimport { useModal } from \"../../hooks/useModal\";\r\n\r\n//MaterialUI\r\nimport Box from \"@mui/material/Box\";\r\nimport Button from '@mui/material/Button';\r\nimport Container from \"@material-ui/core/Container\";\r\nimport StarIcon from \"@mui/icons-material/Star\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport StarBorderIcon from \"@mui/icons-material/StarBorder\";\r\nimport Stack from '@mui/material/Stack';\r\nimport Typography from \"@material-ui/core/Typography\";\r\n\r\n//components\r\nimport \"../../styles/styles.css\";\r\nimport ModalComentario from \"./comentarioModal\";\r\nimport ModalComentarios from \"./listComentariosModal\";\r\nimport IframeVideo from \"./iframeVideo\";\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  paper: {\r\n    marginTop: theme.spacing(0),\r\n    display: \"flex\",\r\n    flexDirection: \"column\",\r\n    alignItems: \"center\",\r\n  },\r\n}));\r\n/**\r\n * Función para mostrar el detalle de un video y guardar la puntuación.\r\n * @returns Componente que muestra el detalle de un video junto con el iframe\r\n */\r\nconst VideoDetail = () => {\r\n  \r\n  const history = useNavigate();\r\n  const [show, handleShow, handleClose] = useModal(false);\r\n  const [show2, handleShow2, handleClose2] = useModal(false);\r\n  \r\n  const location = useLocation();\r\n  const { id } = useParams();\r\n  const [video, setVideo] = useState([]);\r\n  const [serie, setSerie] = useState([]);\r\n  const [loading, setLoading] = useState(true);\r\n  const [duracion, setDuracion] = useState([]);\r\n  const [uploadDate, setUploadDate] = useState(null);\r\n  const [histUser, setHistUser] = useState(location.state);\r\n  const [commentaries, setCommentaries] = useState([]);\r\n  const [activeStar, setActiveStar] = useState(-1);\r\n  const totalStars = 5;\r\n  const [appState, setAppState] = useState({\r\n    loading: true\r\n  });\r\n  const VideoLoading = VideoLoadingComponent(video);\r\n  \r\n  /**\r\n   * Función para almacenar la duración del video en un formato adecuado para mostrarla en pantalla.\r\n   * @param {time} duration \r\n   * @returns Duración en el formato adecuado.\r\n   */\r\n  const changeDuration = (duration) => {\r\n    let tiempo = duration.split(':');\r\n    let new_duration = \"\";\r\n    if (tiempo) {\r\n      if (tiempo[0] !== \"00\") {\r\n        new_duration = tiempo[0] + \"h\";\r\n      }\r\n      if (tiempo[1] !== \"00\") {\r\n        new_duration = \" \" + new_duration + \" \" + tiempo[1] + \"min\";\r\n      }\r\n      /* if (tiempo[2] !==\"00\") {\r\n        new_duration = \" \"+new_duration+\" \"+tiempo[2]+\"s\";\r\n      } */\r\n    }\r\n    return new_duration.trim(); // trim() para eliminar cualquier espacio en blanco adicional\r\n  };\r\n  \r\n\r\n  /**\r\n   * Función para obtener la información del video en reproducción\r\n   */\r\n  useEffect(() => {\r\n    const getVideo = async (videoID) => {\r\n      const res = await VideoServer.getVideo(videoID);\r\n      const video = res;\r\n      console.log(video);\r\n\r\n      setUploadDate(new Date(res.upload_date).toDateString());\r\n      setDuracion(changeDuration(res.duration));\r\n      setVideo({\r\n        ...video,\r\n        duration: duracion,           \r\n      });\r\n      setAppState({ loading: false});\r\n      \r\n    };\r\n    getVideo(id);\r\n\r\n  }, [duracion, id, setVideo, video.title_espanol, video.url_esp, video.url_vimeo_esp,video.serie_id]);\r\n  \r\n  \r\n  useEffect(() => {\r\n    const getSeries = async (serieID) => {\r\n      const res = await SerieServer.getSerie();\r\n      const serie = res;\r\n      console.log(serie);\r\n\r\n      setSerie({\r\n        ...serie,\r\n      });\r\n    };\r\n    getSeries(video.serie);\r\n\r\n  }, []);\r\n  \r\n\r\n   useEffect(() => {      \r\n    if (histUser) {\r\n      setActiveStar(histUser.user_score-1);\r\n    } else {\r\n      history(\"/loginuser\");      \r\n    }\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, []) \r\n  \r\n  useEffect(() => {\r\n    const getCommentaries = async (videoId) => {\r\n      const res = await commentaryServer.ListCommentaryVideo({'video_id':videoId});\r\n      setCommentaries(res);\r\n    }\r\n    getCommentaries(id);\r\n  }, [id]);\r\n  /**\r\n   * Función para cambiar la calificación del video.\r\n   * @param {int} index \r\n   */\r\n  const handleClick = async (index) => {\r\n    setActiveStar(index);\r\n    let cumulative_score = video.cumulative_score;\r\n    let number_votes = video.numberOfVotes;\r\n\r\n    if (histUser.user_score) {\r\n      cumulative_score = cumulative_score - histUser.user_score + index+1;\r\n      const score_video = cumulative_score/number_votes;\r\n      setHistUser({...histUser, user_score:index+1});\r\n      await VideoServer.partialUpdateVideo(video.id, {'cumulative_score': cumulative_score, 'score': score_video})\r\n\r\n    } else {\r\n      number_votes +=1;\r\n      cumulative_score = cumulative_score + index+1;\r\n      const score_video = cumulative_score/number_votes;\r\n      setHistUser({...histUser, user_score:index+1});\r\n      await VideoServer.partialUpdateVideo(video.id, {'cumulative_score': cumulative_score,'numberOfVotes': number_votes,'score': score_video})\r\n    }\r\n    await HistorialUserServer.updateHistorialUser(histUser.id,{'user_score': index+1});\r\n \r\n  };\r\n  \r\n  const classes = useStyles();\r\n\r\n  if (histUser) {\r\n    return (\r\n    <Container>\r\n      {appState.loading  ?  <VideoLoading isLoading={appState.loading} video={video} /> :\"\"}\r\n       \r\n      <div>\r\n        <div className=\"d-flex justify-content-end\">\r\n          <button  onClick={() => window.history.back()} className=\"btn btn-light my-2\" value=\"Volver\">Volver</button>\r\n        </div>\r\n      </div>\r\n      <div className={classes.paper}>\r\n        <h3>\r\n\r\n          {video.title_espanol}\r\n        </h3>\r\n      </div>\r\n      <br></br>\r\n      <div className=\"row\">\r\n        <div className=\"col-md-7 col-12 iframe1\">\r\n          <IframeVideo\r\n            video={video}\r\n            >\r\n          </IframeVideo>\r\n        </div>\r\n        <div className=\"col-md-5 col-12 infoVideo\" >\r\n          <Typography component=\"h5\" variant=\"h6\" style={{color:\"white\",borderBottom:\"3px solid white\",paddingBottom:'5px'}} align=\"center\">\r\n            {video.duration}\r\n          </Typography>\r\n          <br></br>\r\n          \r\n          <br></br>\r\n          <Typography component=\"h5\" variant=\"h6\">\r\n            Ayudanos a calificar   &nbsp;\r\n            <Box \r\n              sx={{\r\n                display: \"inline-flex\",\r\n                position: \"relative\",\r\n                cursor: \"pointer\",\r\n                textAlign: \"left\",\r\n              }}\r\n            >\r\n              {[...new Array(totalStars)].map((arr, index) => {\r\n                return (\r\n                  <Box \r\n                  key={index} \r\n                  position=\"relative\"\r\n                  sx={{\r\n                    cursor: \"pointer\",\r\n                  }}\r\n                  onClick={(e) => handleClick(index)}\r\n                  >\r\n                    <Box \r\n                      sx={{\r\n                        width: index <= activeStar ? \"100%\" : \"0%\",\r\n                        overflow: \"hidden\",\r\n                        position: \"absolute\",\r\n                      }}\r\n                    >\r\n                      <StarIcon />\r\n                    </Box>\r\n                    <Box>\r\n                      <StarBorderIcon />\r\n                    </Box>\r\n                  </Box>\r\n                )\r\n              })}\r\n            </Box>\r\n          </Typography>\r\n          <br></br>\r\n          <div className=\"d-flex \">\r\n\r\n          <Stack  alignItems=\"center\" className=\"p-2\">\r\n            <Button \r\n            variant=\"contained\" \r\n            color=\"success\"\r\n            type=\"submit\"\r\n            onClick={handleShow}>\r\n              Realizar comentario\r\n            </Button>\r\n          </Stack>\r\n          {commentaries ? \r\n            <Stack  alignItems=\"center\" className=\"p-2\">\r\n              <Button \r\n                variant=\"contained\" \r\n                color=\"primary\"\r\n                type=\"submit\"\r\n                onClick={handleShow2}>\r\n                Ver otros comentarios\r\n              </Button>\r\n            </Stack>\r\n          : \r\n          null\r\n        }\r\n        </div>\r\n        </div>\r\n        <p className=\"mt-3\">\r\n            {video.description_esp}\r\n        </p>\r\n        <br/>\r\n        <div className=\"d-flex justify-content-between\">\r\n          {video.categorias && (\r\n            <ul>\r\n              Categorias:\r\n              {video.categorias.map(categoria => (\r\n                <li key={categoria.id}><small className=\"\">{categoria.categoria}</small></li>\r\n              ))}\r\n            </ul>\r\n          )}\r\n          {video.especialidad && (\r\n            <ul>\r\n              Especialidades:\r\n              {video.especialidad.map(especialidad => (\r\n                <li key={especialidad.id}><small className=\"\">{especialidad.especialidad}</small></li>\r\n              ))}\r\n            </ul>\r\n          )}\r\n          </div>\r\n          <div className=\"d-flex justify-content-between border-top  pt-2 border-2 \">\r\n\r\n          {video.subEspecialidad && (\r\n            <ul>\r\n              Subespecialidades:\r\n              {video.subEspecialidad.map(subEspecialidad => (\r\n                <li key={subEspecialidad.id}><small className=\"\">{subEspecialidad.subEspecialidad}</small></li>\r\n              ))}\r\n            </ul>\r\n          )}\r\n          {video.palabraClave && (\r\n            <ul>\r\n              Palabras claves:\r\n              \r\n              {video.palabraClave.map(palabraClave => (\r\n                <li key={palabraClave.id}><small className=\"\">{palabraClave.palabraClave}</small></li>\r\n              ))}\r\n            </ul>\r\n          )}\r\n          </div>\r\n      </div>\r\n      <ModalComentario\r\n        handleClose={handleClose}\r\n        show={show}\r\n        histUser={histUser}\r\n        videoID ={id}\r\n      ></ModalComentario>\r\n      <ModalComentarios\r\n        handleClose={handleClose2}\r\n        show={show2}\r\n        histUser={histUser}\r\n        commentaries = {commentaries}\r\n        videoID= {id}\r\n      ></ModalComentarios>\r\n    </Container>\r\n    );\r\n  }\r\n  return (\r\n    <p style={{ fontSize: \"25px\" }}>Inicia sesión para ver todos los videos!</p>\r\n  );\r\n  \r\n};\r\n\r\nexport default VideoDetail;\r\n","import React from \"react\";\r\n\r\n/**\r\n * Verifica si los videos ya fueron cargados.\r\n * @param {component} Component \r\n * @returns\r\n */\r\nfunction VideoLoading(Component) {\r\n  /**\r\n    * @param {boolean} isLoading \r\n    * @param {Object} props\r\n    * @returns  Si ya cargaron los videos se retorna un componente recibido en la función main de lo contrario retorna mensaje indicando que aún se estan cargando.\r\n  */\r\n  return function VideoLoadingComponent({ isLoading, ...props }) {\r\n    if (!isLoading) return <Component {...props} />;\r\n    return (\r\n      <div style={{ fontSize: \"25px\",display:\"flex\",justifyContent:\"center\",textAlign:\"center\",flexDirection:\"column\",alignItems:\"center\" }}>\r\n        <div className=\"spinner-grow text-light\" role=\"status\">\r\n          <span className=\"sr-only\"></span>\r\n        </div>\r\n          Espera por favor\r\n      </div>\r\n    );\r\n  };\r\n}\r\nexport default VideoLoading;\r\n"],"names":["useStyles","makeStyles","theme","containerModal","border","borderRadius","boxShadow","cloud","width","background","color","containerForm","height","root","display","histUser","handleClose","show","commentary_id","initialFormData","commentary","historial_user","video","videoID","useState","setCommentary","handleSubmit","e","preventDefault","formData","FormData","append","id","commentaryServer","console","log","useEffect","getCommentary","res","classes","Modal","onHide","contentClassName","centered","closeButton","Form","onSubmit","className","controlId","as","rows","name","value","onChange","target","variant","onClick","type","title","textAlign","nameUser","fontSize","containerComment","maxWidth","margin","marginBottom","commentaries","useModal","showEdit","handleCloseEdit","scrollable","map","element","index","Container","Date","created_date","toLocaleDateString","usuario","Stack","alignItems","alignContent","API_URL","RegisterUbicacion","newUbicacion","axiosInstance","response","status","data","ListUbicacionHist","histUser_id","RegisterFechaRepro","newFecha","ListFechaReprox2","RegisterHistorialVideo","newHistorial","ListHistorialVideo","idVideo","updateHistorialVideo","updateHU","ubicacionUsers","setHistUser","histVideo","setHistVideo","useParams","location","useLocation","iframe","document","getElementById","getHistUser","state","HistorialUserServer","getHistorialVideo","HistorialVideoServer","video_id","length","obetenerfecha","f","day","getDate","padStart","month","getMonth","getFullYear","getVimeoVideo","useCallback","tiempo","player","duracion","code_esp","options","playsinline","Player","segundos","split","val","h","m","s","parseInt","convertTime","setCurrentTime","on","UbicacionServer","FechareproServer","fechaR","fecha","ubByHist","reproH","ip","city","country","saveTime","getDuration","then","duration","catch","error","getCurrentTime","seconds","validacion","cont1","counter_repro","cont2","reproducciones","URL","includes","setInterval","repetirCada10Segundos","paper","marginTop","spacing","flexDirection","history","useNavigate","handleShow","show2","handleShow2","handleClose2","setVideo","setSerie","setDuracion","setUploadDate","setCommentaries","activeStar","setActiveStar","loading","appState","setAppState","VideoLoading","VideoLoadingComponent","changeDuration","new_duration","trim","getVideo","VideoServer","upload_date","toDateString","title_espanol","url_esp","url_vimeo_esp","serie_id","getSeries","serieID","SerieServer","serie","user_score","getCommentaries","videoId","handleClick","cumulative_score","number_votes","numberOfVotes","score_video","isLoading","window","back","Typography","component","style","borderBottom","paddingBottom","align","Box","sx","position","cursor","Array","arr","overflow","Star","StarBorder","Button","description_esp","categorias","categoria","especialidad","subEspecialidad","palabraClave","Component","props","justifyContent","role"],"sourceRoot":""}