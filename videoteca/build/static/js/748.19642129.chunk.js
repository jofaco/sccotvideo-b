"use strict";(self.webpackChunkvideoteca_frontend=self.webpackChunkvideoteca_frontend||[]).push([[748],{5509:function(e,r,n){n.r(r);var t=n(3433),s=n(1413),i=n(4165),a=n(5861),c=n(9439),o=n(2791),l=n(7689),d=n(1652),u=n(6542),x=n(6639),p=n(2516),h=n(9929),m=n(733),f=n(2918),j=n(1614),v=n(890),Z=n(4554),b=n(3767),g=n(6151),w=n(151),N=n(8596),y=n(1444),_=(n(5258),n(8953)),k=n(1241),S=n(6292),C=n(1830),V=n.n(C),E=n(6627),B=n.n(E),D=n(184),I=(0,N.Z)((function(e){return{paper:{marginTop:e.spacing(0),display:"flex",flexDirection:"column",alignItems:"center"}}}));r.default=function(){var e=(0,l.s0)(),r=(0,f.d)(!1),n=(0,c.Z)(r,3),N=n[0],C=n[1],E=n[2],A=(0,f.d)(!1),T=(0,c.Z)(A,3),O=T[0],J=T[1],U=T[2],z=(0,o.useState)(),q=(0,c.Z)(z,2),F=q[0],H=q[1],K=(0,l.TH)(),L=(0,l.UO)().id,P=(0,o.useState)([]),R=(0,c.Z)(P,2),Y=R[0],$=R[1],G=(0,o.useState)([]),M=(0,c.Z)(G,2),Q=M[0],W=M[1],X=(0,o.useState)([]),ee=(0,c.Z)(X,2),re=ee[0],ne=ee[1],te=(0,o.useState)([]),se=(0,c.Z)(te,2),ie=(se[0],se[1]),ae=(0,o.useState)([]),ce=(0,c.Z)(ae,2),oe=(ce[0],ce[1]),le=(0,o.useState)(!0),de=(0,c.Z)(le,2),ue=de[0],xe=de[1],pe=(0,o.useState)([]),he=(0,c.Z)(pe,2),me=he[0],fe=he[1],je=(0,o.useState)(null),ve=(0,c.Z)(je,2),Ze=(ve[0],ve[1]),be=(0,o.useState)(K.state),ge=(0,c.Z)(be,2),we=ge[0],Ne=ge[1],ye=(0,o.useState)([]),_e=(0,c.Z)(ye,2),ke=_e[0],Se=_e[1],Ce=(0,o.useState)(-1),Ve=(0,c.Z)(Ce,2),Ee=Ve[0],Be=Ve[1],De=localStorage.getItem("user"),Ie=JSON.parse(De),Ae=(0,o.useState)({loading:!0}),Te=(0,c.Z)(Ae,2),Oe=Te[0],Je=Te[1],Ue=(0,p.Z)(Y),ze=function(e){var r=e.split(":"),n="";return r&&("00"!==r[0]&&(n=r[0]+"h"),"00"!==r[1]&&(n=" "+n+" "+r[1]+"min")),n.trim()},qe=function(){var r=(0,a.Z)((0,i.Z)().mark((function r(n){return(0,i.Z)().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:V().fire({title:"\xbfSeguro quieres eliminar este video?",text:"No podras recuperar la informaci\xf3n",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Eliminar video"}).then(function(){var r=(0,a.Z)((0,i.Z)().mark((function r(t){return(0,i.Z)().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(!t.isConfirmed){r.next=5;break}return r.next=3,d.gY(n);case 3:e("/"),V().fire({title:"Video eliminado con exito",text:"",icon:"success"});case 5:case"end":return r.stop()}}),r)})));return function(e){return r.apply(this,arguments)}}());case 1:case"end":return r.stop()}}),r)})));return function(e){return r.apply(this,arguments)}}(),Fe=function(){var e=(0,a.Z)((0,i.Z)().mark((function e(r,n){var t,s;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u.dS(r);case 2:return t=e.sent,console.log(t),W(t),e.next=7,x.op(n);case 7:s=e.sent,console.log(s),ne(s);case 10:case"end":return e.stop()}}),e)})));return function(r,n){return e.apply(this,arguments)}}(),He=function(){var r=(0,a.Z)((0,i.Z)().mark((function r(){var n;return(0,i.Z)().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,h.K7();case 3:(n=r.sent)&&Ie.id?(Be(n.user_score-1),H(n),xe(!1),void 0!==n.user_score&&Be(n.user_score-1)):e("/loginuser"),r.next=10;break;case 7:r.prev=7,r.t0=r.catch(0),console.log(r.t0);case 10:case"end":return r.stop()}}),r,null,[[0,7]])})));return function(){return r.apply(this,arguments)}}();(0,o.useEffect)((function(){He();var e=function(){var e=(0,a.Z)((0,i.Z)().mark((function e(r){var n,t;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d.om(r);case 2:n=e.sent,t=n,Ze(new Date(n.upload_date).toDateString()),fe(ze(n.duration)),$((0,s.Z)((0,s.Z)({},t),{},{duration:me})),Je({loading:!1});case 8:case"end":return e.stop()}}),e)})));return function(r){return e.apply(this,arguments)}}();e(L);var r=function(){var e=(0,a.Z)((0,i.Z)().mark((function e(r){var n;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m.t$({video_id:r});case 2:n=e.sent,Se(n);case 4:case"end":return e.stop()}}),e)})));return function(r){return e.apply(this,arguments)}}();r(L),Fe(Y.serie,Y.temporada)}),[me,L,$,Y.title_espanol,Y.url_esp,Y.url_vimeo_esp,Y.serie_id]);var Ke=function(){var e=(0,a.Z)((0,i.Z)().mark((function e(r){var n,t,a,c;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Be(r),n=Y.cumulative_score,t=Y.numberOfVotes,!we.user_score){e.next=11;break}return n=n-we.user_score+r+1,a=n/t,Ne((0,s.Z)((0,s.Z)({},we),{},{user_score:r+1})),e.next=9,d.Jp(Y.id,{cumulative_score:n,score:a});case 9:e.next=17;break;case 11:return c=(n=n+r+1)/(t+=1),Ne((0,s.Z)((0,s.Z)({},we),{},{user_score:r+1})),e.next=17,d.Jp(Y.id,{cumulative_score:n,numberOfVotes:t,score:c});case 17:return e.next=19,h.o0(we.id,{user_score:r+1});case 19:case"end":return e.stop()}}),e)})));return function(r){return e.apply(this,arguments)}}(),Le=I();if(!ue)return(0,D.jsxs)(j.Z,{children:[Oe.loading?(0,D.jsx)(Ue,{isLoading:Oe.loading,video:Y}):"",(0,D.jsx)("div",{children:(0,D.jsx)("div",{className:"d-flex justify-content-end",children:(0,D.jsx)("button",{onClick:function(){return window.history.back()},className:"btn btn-light mt-4 my-2",value:"Volver",children:"Volver"})})}),(0,D.jsx)("div",{className:Le.paper,children:(0,D.jsx)("h3",{children:Y.title_espanol})}),(0,D.jsx)("br",{}),(0,D.jsxs)("div",{className:"row",children:[(0,D.jsx)("div",{className:"col-8 iframe1",children:(0,D.jsx)(S.Z,{video:Y})}),(0,D.jsxs)("div",{className:"col infoVideo",children:[(0,D.jsx)(v.Z,{component:"h5",variant:"h6",style:{color:"white",borderBottom:"3px solid white",paddingBottom:"5px"},align:"center",children:Y.duration}),(0,D.jsx)("br",{}),Ie.is_superuser&&(0,D.jsxs)("div",{className:"d-flex justify-content-between mb-2",children:[(0,D.jsx)("button",{onClick:function(){return e("/updateVideo/".concat(Y.id))},className:"btn  btn-outline-primary form-control mx-1",children:"Actualizar"}),(0,D.jsx)("button",{onClick:function(){return Y.id&&qe(Y.id)},className:" btn  btn-outline-danger form-control mx-1",children:"Eliminar"})]}),(0,D.jsxs)("div",{className:"d-flex justify-content-center flex-column align-items-center",children:[(0,D.jsxs)(v.Z,{component:"h5",variant:"h6",children:["Ay\xfadanos a calificar   \xa0",(0,D.jsx)(Z.Z,{sx:{display:"inline-flex",position:"relative",cursor:"pointer",textAlign:"left"},children:(0,t.Z)(new Array(5)).map((function(e,r){return(0,D.jsxs)(Z.Z,{position:"relative",sx:{cursor:"pointer"},onClick:function(e){return Ke(r)},children:[(0,D.jsx)(Z.Z,{sx:{width:r<=Ee?"100%":"0%",overflow:"hidden",position:"absolute"},children:(0,D.jsx)(w.Z,{})}),(0,D.jsx)(Z.Z,{children:(0,D.jsx)(y.Z,{})})]},r)}))})]}),(0,D.jsx)("br",{}),(0,D.jsxs)("div",{className:"d-flex ",children:[(0,D.jsx)(b.Z,{alignItems:"center",className:"p-2",children:(0,D.jsx)(g.Z,{variant:"contained",color:"success",type:"submit",onClick:C,children:"Realizar comentario"})}),ke?(0,D.jsx)(b.Z,{alignItems:"center",className:"p-2",children:(0,D.jsx)(g.Z,{variant:"contained",color:"primary",type:"submit",onClick:J,children:"Ver otros comentarios"})}):null]}),(0,D.jsx)("div",{className:"mt-3",children:(0,D.jsx)("div",{className:"table-responsive ",children:(0,D.jsx)("table",{className:"table  text-light ",children:(0,D.jsxs)("thead",{children:[(0,D.jsxs)("tr",{className:"",children:[(0,D.jsx)("td",{scope:"",children:"Autores"}),(0,D.jsx)("td",{children:Y.autor&&Y.autor.map((function(e){return(0,D.jsx)("li",{children:(0,D.jsx)("small",{className:"",children:B()(e.autor)})},e.id)}))})]}),2===Y.tipe_of_video&&(0,D.jsxs)(D.Fragment,{children:[(0,D.jsxs)("tr",{children:[(0,D.jsx)("th",{scope:"col",children:"Serie"}),(0,D.jsx)("th",{scope:"col",children:(0,D.jsx)("a",{className:"text-primary",style:{cursor:"pointer"},onClick:function(){return r=Q.id,e("/seeSerie/".concat(r),{state:F}),ie(r),void console.log(r);var r},children:Q.serie})})]}),(0,D.jsxs)("tr",{children:[(0,D.jsx)("th",{scope:"col",children:"Temporada"}),(0,D.jsx)("th",{scope:"col",children:(0,D.jsx)("a",{className:"text-primary",style:{cursor:"pointer"},onClick:function(){return r=re.id,e("/seeTemporada/".concat(r),{state:F}),oe(r),void console.log(r);var r},children:re.temporada})})]})]})]})})})})]})]}),(0,D.jsxs)("div",{children:[(0,D.jsx)("h5",{children:"Descripci\xf3n"}),(0,D.jsx)("p",{className:"mt-3",children:Y.description_esp})]}),(0,D.jsx)("br",{}),(0,D.jsx)("div",{className:"table-responsive ",children:(0,D.jsxs)("table",{className:"table  text-light ",children:[(0,D.jsx)("thead",{children:(0,D.jsxs)("tr",{children:[(0,D.jsx)("th",{scope:"col",children:"Categor\xedas"}),(0,D.jsx)("th",{scope:"col",children:"Especialidades"}),(0,D.jsx)("th",{scope:"col",children:"Subespecialidades"}),(0,D.jsx)("th",{scope:"col",children:"Palabras claves"})]})}),(0,D.jsx)("tbody",{children:(0,D.jsxs)("tr",{children:[(0,D.jsx)("td",{children:Y.categorias&&Y.categorias.map((function(e){return(0,D.jsx)("li",{children:(0,D.jsx)("small",{className:"",children:e.categoria})},e.id)}))}),(0,D.jsx)("td",{children:Y.especialidad&&Y.especialidad.map((function(e){return(0,D.jsx)("li",{children:(0,D.jsx)("small",{className:"",children:e.especialidad})},e.id)}))}),(0,D.jsx)("td",{children:Y.subEspecialidad&&Y.subEspecialidad.map((function(e){return(0,D.jsx)("li",{children:(0,D.jsx)("small",{className:"",children:e.subEspecialidad})},e.id)}))}),(0,D.jsx)("td",{children:Y.palabraClave&&Y.palabraClave.map((function(e){return(0,D.jsx)("li",{children:(0,D.jsx)("small",{className:"",children:e.palabraClave})},e.id)}))})]})})]})})]}),(0,D.jsx)(_.Z,{handleClose:E,show:N,histUser:we,videoID:L}),(0,D.jsx)(k.Z,{handleClose:U,show:O,histUser:we,commentaries:ke,videoID:L})]})}}}]);
//# sourceMappingURL=748.19642129.chunk.js.map