"use strict";(self.webpackChunkvideoteca_frontend=self.webpackChunkvideoteca_frontend||[]).push([[504],{7411:function(e,n,r){var t=r(4165),a=r(5861),s=r(3263),o=r(9778),c="https://sccotview.com/api/",i=["free/","free"],u=(localStorage.getItem("access_token"),s.Z.create({baseURL:c,timeout:5e3,headers:{"Content-Type":"multipart/form-data",accept:"application/json"}}));u.interceptors.request.use((function(e){var n=localStorage.getItem("access_token"),r=i.some((function(n){return e.url.includes(n)}));return n&&!r?e.headers.Authorization="JWT "+n:delete e.headers.Authorization,e})),u.interceptors.response.use((function(e){return e}),function(){var e=(0,a.Z)((0,t.Z)().mark((function e(n){var r,a,s,i,l;return(0,t.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=n.config,"undefined"!==typeof n.response){e.next=4;break}return console.warn("A server/network error occurred. Looks like CORS might be the problem."),e.abrupt("return",Promise.reject(n));case 4:if(401!==n.response.status||r.url!==c+"api/token/refresh/"){e.next=7;break}return window.location.href="/userlogin1/",e.abrupt("return",Promise.reject(n));case 7:if("token_not_valid"!==n.response.data.code||401!==n.response.status||"Unauthorized"!==n.response.statusText){e.next=37;break}if(!(a=localStorage.getItem("refresh_token"))){e.next=34;break}if(s=JSON.parse(o.lW.from(a.split(".")[1],"base64").toString()),i=Math.ceil(Date.now()/1e3),!(s.exp>i)){e.next=29;break}return e.prev=13,e.next=16,u.post("api/token/refresh/",{refresh:a});case 16:return l=e.sent,localStorage.setItem("access_token",l.data.access_token),localStorage.setItem("refresh_token",l.data.refresh_token),u.defaults.headers.Authorization="JWT "+l.data.access_token,r.headers.Authorization="JWT "+l.data.access_token,e.abrupt("return",u(r));case 24:e.prev=24,e.t0=e.catch(13),console.log(e.t0);case 27:e.next=32;break;case 29:console.log("Refresh token is expired",s.exp,i),localStorage.clear(),window.location.href="/userlogin2/";case 32:e.next=37;break;case 34:console.log("Refresh token not available."),localStorage.clear(),window.location.href="/userlogin3/";case 37:return 401===n.response.status&&localStorage.clear(),e.abrupt("return",Promise.reject(n));case 39:case"end":return e.stop()}}),e,null,[[13,24]])})));return function(n){return e.apply(this,arguments)}}()),n.Z=u},6833:function(e,n,r){r.r(n),r.d(n,{default:function(){return B}});var t=r(4165),a=r(5861),s=r(9439),o=r(2791),c=r(7689),i=r(2680),u=r(746),l=(r.p,r(8733)),d=r(5764),f=r(2918),p=r(4942),h=r(1413),m=r(5987),x=r(5342),v=r(3360),Z=r(4437),g=r(1830),b=r.n(g),w=r(184),j=["categorias","handleClose","show"],k=function(e){var n=e.categorias,r=e.handleClose,i=e.show,u=(0,m.Z)(e,j),d=(0,c.s0)(),f=(0,o.useState)({categoria:null}),g=(0,s.Z)(f,2),k=g[0],y=g[1],N=function(){var e=(0,a.Z)((0,t.Z)().mark((function e(n){var r,a;return(0,t.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.preventDefault(),r=new FormData,console.log(u.user.id),e.prev=3,r.append("usuario",u.user.id),r.append("categoria",k.categoria),e.next=8,l.bb(r);case 8:a=e.sent,b().fire({title:a.message,icon:"success"}).then((function(e){d("/Perfil"),window.location.reload()})),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(3),console.log(e.t0);case 15:case"end":return e.stop()}}),e,null,[[3,12]])})));return function(n){return e.apply(this,arguments)}}();return(0,w.jsxs)(x.Z,{show:i,onHide:r,"aria-labelledby":"contained-modal-title-vcenter",centered:!0,children:[(0,w.jsx)(x.Z.Header,{closeButton:!0,children:(0,w.jsx)(x.Z.Title,{id:"tituloModal",children:"Ingrese una preferencia"})}),(0,w.jsx)(x.Z.Body,{id:"bodyModal",children:(0,w.jsxs)(Z.Z,{onSubmit:N,children:[(0,w.jsxs)(Z.Z.Group,{className:"mb-3",controlId:"exampleForm.ControlInput1",children:[(0,w.jsx)(Z.Z.Label,{children:"Categor\xedas"}),(0,w.jsxs)(Z.Z.Select,{name:"categoria",autoFocus:!0,onChange:function(e){var n=e.target,r=n.name,t=Array.from(n.selectedOptions,(function(e){return e.value}));console.log(t),y((0,h.Z)((0,h.Z)({},k),{},(0,p.Z)({},r,t)))},children:[(0,w.jsx)("option",{children:"Seleccione una Categor\xeda"}),n&&n.map((function(e,n){return(0,w.jsx)("option",{value:e.id,children:e.categoria},n)}))]})]}),(0,w.jsxs)(x.Z.Footer,{children:[(0,w.jsx)(v.Z,{variant:"secondary",onClick:r,children:"Cancelar"}),(0,w.jsx)(v.Z,{variant:"primary",type:"submit",onClick:r,children:"Guardar"})]})]})})]})},y=["handleClose","show"],N=function(e){var n=e.handleClose,r=e.show,i=(0,m.Z)(e,y),l=(0,c.s0)(),d=(0,o.useState)(null),f=(0,s.Z)(d,2),p=f[0],h=f[1],g=function(){var e=(0,a.Z)((0,t.Z)().mark((function e(n){var r,a;return(0,t.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.preventDefault(),r=new FormData,e.prev=2,r.append("image",p),e.next=6,u.gO(i.user.id,r);case 6:a=e.sent,console.log(a.message),l("/Perfil"),window.location.reload(),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(2),console.log(e.t0);case 15:case"end":return e.stop()}}),e,null,[[2,12]])})));return function(n){return e.apply(this,arguments)}}();return(0,w.jsxs)(x.Z,{show:r,onHide:n,"aria-labelledby":"contained-modal-title-vcenter",centered:!0,children:[(0,w.jsx)(x.Z.Header,{closeButton:!0,children:(0,w.jsx)(x.Z.Title,{id:"tituloModal",children:"Cambiar Imagen de Perfil"})}),(0,w.jsx)(x.Z.Body,{id:"bodyModal",children:(0,w.jsxs)(Z.Z,{onSubmit:g,children:[(0,w.jsxs)(Z.Z.Group,{className:"mb-3",controlId:"exampleForm.ControlInput1",children:[(0,w.jsx)(Z.Z.Label,{children:"Imagen de Perfil"}),(0,w.jsx)("input",{className:"form-control",id:"min_image",name:"min_image",onChange:function(e){h(e.target.files[0])},type:"file",placeholder:"Imagen para Email"})]}),(0,w.jsxs)(x.Z.Footer,{children:[(0,w.jsx)(v.Z,{variant:"secondary",onClick:n,children:"Cancelar"}),(0,w.jsx)(v.Z,{variant:"primary",type:"submit",onClick:n,children:"Guardar"})]})]})})]})},C=r(4554),P=r(8596),S=["prefUsers","handleShow"],_=function(e){var n=e.prefUsers,r=e.handleShow,s=((0,m.Z)(e,S),function(){var e=(0,a.Z)((0,t.Z)().mark((function e(r){var a;return(0,t.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log(r),console.log(n),e.next=4,(0,l.Bx)(r);case 4:a=e.sent,console.log(a);case 6:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}()),o=(0,P.Z)((function(e){return{title1:{textAlign:"center"},"@media only screen and (max-width: 1000px)":{imagenPerfil:{width:"100%"}}}}))();return(0,w.jsxs)("div",{className:"container container1",children:[(0,w.jsx)("h3",{className:o.title1,children:"Preferencias"}),n?(0,w.jsxs)(w.Fragment,{children:[(0,w.jsx)("div",{className:"container ",children:(0,w.jsx)(C.Z,{sx:{display:"flex",justifyContent:"center",flexWrap:"wrap"},className:"btn-group btn-group-lg",children:(0,w.jsx)("div",{className:"d-flex flex-wrap",children:n&&n.map((function(e,n){return(0,w.jsxs)("span",{sx:{color:"#fff"},className:"bg-white px-3 py-2 rounded m-2 border-0 text-dark d-flex justify-content-between align-items-center "+o.botonList,children:[(0,w.jsx)("h6",{className:"pt-2 pe-4",children:e.categoria})," ",(0,w.jsx)("button",{className:"btn btn-danger",onClick:function(){s(e.id)},children:"\u2715"})]},n)}))})})}),(0,w.jsx)("br",{}),(0,w.jsx)("div",{className:"container",children:(0,w.jsx)("div",{className:"d-grid  col-8  mx-auto",children:(0,w.jsx)("button",{className:"btn btn-secondary btn-lg",type:"submit",onClick:r,children:"Ingresar Preferencia"})})})]}):(0,w.jsx)(C.Z,{display:"flex",mt:5,justifyContent:"space-between",children:(0,w.jsx)("div",{className:"d-grid  col-8  mx-auto",children:(0,w.jsx)("button",{className:"btn btn-secondary btn-lg",type:"submit",onClick:r,children:"Ingresar Preferencia"})})})]})},I=r(3712),A=r(2592),B=function(){var e=(0,c.s0)(),n=(0,o.useContext)(i.Z).user,r=(0,o.useState)(null),p=(0,s.Z)(r,2),h=p[0],m=p[1],x=(0,o.useState)(null),v=(0,s.Z)(x,2),Z=v[0],g=v[1],b=(0,o.useState)(),j=(0,s.Z)(b,2),y=j[0],C=j[1],S=(0,f.d)(!1),B=(0,s.Z)(S,3),R=B[0],F=B[1],L=B[2],T=(0,f.d)(!1),z=(0,s.Z)(T,3),M=z[0],U=z[1],W=z[2],E=(0,P.Z)((function(e){return{imagenPerfil:{display:"flex",maxWidth:200,marginBottom:e.spacing(2),margin:"auto",borderRadius:1e3},contenedorImg:{flexWrap:"wrap"},botonList:{margin:e.spacing(3,1),color:"black"},title1:{textAlign:"center"},"@media only screen and (max-width: 1000px)":{imagenPerfil:{width:"100%"}}}})),O=function(){var e=(0,a.Z)((0,t.Z)().mark((function e(n){var r;return(0,t.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,u.PR)(n);case 2:r=e.sent,console.log(r),m(r);case 5:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),D=function(){var e=(0,a.Z)((0,t.Z)().mark((function e(){var r;return(0,t.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,l.kt({user_id:n.id});case 3:r=e.sent,g(r),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}(),G=function(){var e=(0,a.Z)((0,t.Z)().mark((function e(){var n,r;return(0,t.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,d.wb();case 3:return n=e.sent,e.next=6,n;case 6:r=e.sent,C(r),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),console.log(e.t0);case 13:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(){return e.apply(this,arguments)}}();(0,o.useEffect)((function(){n?(O(n.id),D(),G()):e("/loginuser")}),[]);var H=E();return n?(0,w.jsxs)(I.Z,{children:[h&&h.image?(0,w.jsxs)("div",{children:[(0,w.jsx)("h1",{id:"tituloName",children:(0,w.jsxs)("center",{children:[h.name_odoo," "]})}),(0,w.jsxs)("div",{className:"col-md-5 "+H.contenedorImg,children:[(0,w.jsx)(A.Z,{src:"https://sccotview.com"+h.image,className:H.imagenPerfil}),(0,w.jsx)("div",{className:"d-grid  col-8  mx-auto",children:(0,w.jsx)("button",{className:"btn btn-primary btn-lg",id:"submitButton",type:"submit",onClick:U,children:"Actualizar"})})]}),(0,w.jsx)("div",{className:"col-md-7",children:(0,w.jsx)(_,{prefUsers:Z,handleShow:F})})]}):(0,w.jsxs)("div",{className:"row",children:[(0,w.jsx)("h3",{id:"tituloName",className:"mt-4",children:(0,w.jsx)("center",{children:n.name_odoo})}),(0,w.jsxs)("div",{className:"col-md-5 "+H.contenedorImg,children:[(0,w.jsx)(A.Z,{src:"https://sccotview.com/media/perfil/default.jpg",className:H.imagenPerfil}),(0,w.jsx)("div",{className:"d-grid  col-8  mx-auto",children:(0,w.jsx)("button",{className:"btn btn-primary ",type:"submit",onClick:U,children:"Actualizar"})})]}),(0,w.jsx)("div",{className:"col-md-7",children:(0,w.jsx)(_,{prefUsers:Z,handleShow:F})})]}),(0,w.jsx)(k,{categorias:y,handleClose:L,show:R,user:h}),(0,w.jsx)(N,{handleClose:W,show:M,user:h})]}):(0,w.jsx)("p",{style:{fontSize:"25px"},children:"Inicia sesi\xf3n para ver todos los videos!"})}},2918:function(e,n,r){r.d(n,{d:function(){return s}});var t=r(9439),a=r(2791),s=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],n=(0,a.useState)(e),r=(0,t.Z)(n,2),s=r[0],o=r[1],c=function(){return o(!0)},i=function(){return o(!1)};return[s,c,i]}},746:function(e,n,r){r.d(n,{PR:function(){return u},gO:function(){return l},m3:function(){return i}});var t=r(4165),a=r(5861),s=r(3263),o=r(7411),c="https://sccotview.com/api/",i=function(){var e=(0,a.Z)((0,t.Z)().mark((function e(n){var r;return(0,t.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s.Z.post(c+"login/",n);case 2:return r=e.sent,console.log(n),e.abrupt("return",r);case 5:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),u=function(){var e=(0,a.Z)((0,t.Z)().mark((function e(n){var r;return(0,t.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o.Z.get("".concat(c,"users/").concat(n));case 2:if(200!==(r=e.sent).status){e.next=8;break}return console.log(r),e.next=7,r.data;case 7:return e.abrupt("return",e.sent);case 8:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),l=function(){var e=(0,a.Z)((0,t.Z)().mark((function e(n,r){var a;return(0,t.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o.Z.patch("".concat(c,"users/").concat(n,"/"),r);case 2:if(200!==(a=e.sent).status){e.next=7;break}return e.next=6,a.data;case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}}),e)})));return function(n,r){return e.apply(this,arguments)}}()},5764:function(e,n,r){r.d(n,{CX:function(){return i},wb:function(){return c},yr:function(){return u}});var t=r(4165),a=r(5861),s=r(7411),o="https://sccotview.com/api/categorias/",c=function(){var e=(0,a.Z)((0,t.Z)().mark((function e(){var n;return(0,t.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,s.Z.get(o);case 3:return n=e.sent,e.abrupt("return",n.data);case 7:throw e.prev=7,e.t0=e.catch(0),console.error("Error en ListCategorias:",e.t0),e.t0;case 11:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}(),i=function(){var e=(0,a.Z)((0,t.Z)().mark((function e(n){var r;return(0,t.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s.Z.post(o,n);case 2:if(200!==(r=e.sent).status){e.next=7;break}return e.next=6,r.data;case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),u=function(){var e=(0,a.Z)((0,t.Z)().mark((function e(n,r){var a;return(0,t.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s.Z.patch(o+n+"/",r);case 2:if(200!==(a=e.sent).status){e.next=5;break}return e.abrupt("return",a.data);case 5:case"end":return e.stop()}}),e)})));return function(n,r){return e.apply(this,arguments)}}()},8733:function(e,n,r){r.d(n,{Bx:function(){return d},bb:function(){return u},kt:function(){return l}});var t=r(4165),a=r(5861),s=r(1830),o=r.n(s),c=r(7411),i="https://sccotview.com/api/gustos_by_users/",u=function(){var e=(0,a.Z)((0,t.Z)().mark((function e(n){var r;return(0,t.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c.Z.post(i,n);case 2:if(200!==(r=e.sent).status){e.next=7;break}return e.next=6,r.data;case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),l=function(){var e=(0,a.Z)((0,t.Z)().mark((function e(n){var r;return(0,t.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,c.Z.post("".concat(i,"list_by_user/"),{id:n});case 3:if(200!==(r=e.sent).status){e.next=8;break}return e.abrupt("return",r.data);case 8:return console.warn("Respuesta inesperada:",r.status),e.abrupt("return",null);case 10:e.next=16;break;case 12:return e.prev=12,e.t0=e.catch(0),console.error("Error en ListPreferenciaUser:",e.t0),e.abrupt("return",null);case 16:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(n){return e.apply(this,arguments)}}(),d=function(){var e=(0,a.Z)((0,t.Z)().mark((function e(n){var r;return(0,t.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c.Z.delete("".concat(i).concat(n));case 2:if(200!==(r=e.sent).status){e.next=8;break}return o().fire({title:r.data.message,icon:"success"}).then((function(e){window.location.reload()})).catch((function(){o().fire({title:"Lo sentimos no fue posible eliminar la preferencia, intenta nuevamente mas tarde",icon:"warning"})})),e.next=7,r.data;case 7:return e.abrupt("return",e.sent);case 8:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}()},4554:function(e,n,r){r.d(n,{Z:function(){return m}});var t=r(7462),a=r(3366),s=r(2791),o=r(8182),c=r(2421),i=r(104),u=r(8519),l=r(886),d=r(184),f=["className","component"];var p=r(5902),h=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.defaultTheme,r=e.defaultClassName,p=void 0===r?"MuiBox-root":r,h=e.generateClassName,m=(0,c.ZP)("div",{shouldForwardProp:function(e){return"theme"!==e&&"sx"!==e&&"as"!==e}})(i.Z),x=s.forwardRef((function(e,r){var s=(0,l.Z)(n),c=(0,u.Z)(e),i=c.className,x=c.component,v=void 0===x?"div":x,Z=(0,a.Z)(c,f);return(0,d.jsx)(m,(0,t.Z)({as:v,ref:r,className:(0,o.Z)(i,h?h(p):p),theme:s},Z))}));return x}({defaultTheme:(0,r(7107).Z)(),defaultClassName:"MuiBox-root",generateClassName:p.Z.generate}),m=h},8519:function(e,n,r){r.d(n,{Z:function(){return u}});var t=r(3433),a=r(7462),s=r(3366),o=r(2466),c=r(7416),i=["sx"];function u(e){var n,r=e.sx,u=function(e){var n,r,t={systemProps:{},otherProps:{}},a=null!=(n=null==e||null==(r=e.theme)?void 0:r.unstable_sxConfig)?n:c.Z;return Object.keys(e).forEach((function(n){a[n]?t.systemProps[n]=e[n]:t.otherProps[n]=e[n]})),t}((0,s.Z)(e,i)),l=u.systemProps,d=u.otherProps;return n=Array.isArray(r)?[l].concat((0,t.Z)(r)):"function"===typeof r?function(){var e=r.apply(void 0,arguments);return(0,o.P)(e)?(0,a.Z)({},l,e):l}:(0,a.Z)({},l,r),(0,a.Z)({},d,{sx:n})}},2592:function(e,n,r){var t=r(1413),a=r(5987),s=r(1694),o=r.n(s),c=r(2791),i=r(2007),u=r.n(i),l=r(162),d=r(184),f=["bsPrefix","className","fluid","rounded","roundedCircle","thumbnail"],p=(u().string,u().bool,u().bool,u().bool,u().bool,c.forwardRef((function(e,n){var r=e.bsPrefix,s=e.className,c=e.fluid,i=e.rounded,u=e.roundedCircle,p=e.thumbnail,h=(0,a.Z)(e,f);return r=(0,l.vE)(r,"img"),(0,d.jsx)("img",(0,t.Z)((0,t.Z)({ref:n},h),{},{className:o()(s,c&&"".concat(r,"-fluid"),i&&"rounded",u&&"rounded-circle",p&&"".concat(r,"-thumbnail"))}))})));p.displayName="Image",p.defaultProps={fluid:!1,rounded:!1,roundedCircle:!1,thumbnail:!1},n.Z=p}}]);
//# sourceMappingURL=504.c4c18b86.chunk.js.map